import{r as e,o as t,c as s,a as n,w as i,F as o,b as a,d as r,e as l,v as c,p as h,f as d,g as m,h as p,i as u,j as w}from"./vendor.d7ba9d0d.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(s){const n=new URL(e,location),i=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((s,o)=>{const a=new URL(e,n);if(self[t].moduleMap[a])return s(self[t].moduleMap[a]);const r=new Blob([`import * as m from '${a}';`,`${t}.moduleMap['${a}']=m;`],{type:"text/javascript"}),l=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(r),onerror(){o(new Error(`Failed to import: ${e}`)),i(l)},onload(){s(self[t].moduleMap[a]),i(l)}});document.head.appendChild(l)})),self[t].moduleMap={}}}("/assets/");const v={},g={class:"navbar navbar-expand-lg navbar-light bg-light"},f={class:"container-fluid"},b=a("Fun"),x=a("Doodle");v.render=function(a,r){const l=e("router-link"),c=e("router-view");return t(),s(o,null,[n("nav",g,[n("div",f,[n(l,{to:"/",class:"navbar-brand"},{default:i((()=>[b])),_:1}),n(l,{to:"/doodle"},{default:i((()=>[x])),_:1})])]),n(c)],64)};const S=window.RTCPeerConnection||webkitRTCPeerConnection||mozRTCPeerConnection;class z{constructor(){this.connection=new S({iceServers:[{urls:["stun:stun.l.google.com:19302"]}]}),this.onOpen=()=>{},this.onMessage=()=>{},this.channel=null}send(e){this.channel&&this.channel.send(JSON.stringify(e))}createOffer(){return this.channel=this.connection.createDataChannel("main"),this.channel.onopen=this.onOpen,this.channel.onmessage=e=>{this.onMessage(JSON.parse(e.data))},new Promise(((e,t)=>{this.connection.createOffer().then((e=>{this.connection.setLocalDescription(e)})),this.connection.onicecandidate=t=>{null===t.candidate&&e(this.connection.localDescription)}}))}acceptOffer(e){const t=new RTCSessionDescription(e);return this.connection.ondatachannel=e=>{this.channel=e.channel,this.channel.onopen=this.onOpen,this.channel.onmessage=e=>{this.onMessage(JSON.parse(e.data))}},new Promise(((e,s)=>{this.connection.onicecandidate=t=>{null===t.candidate&&e(this.connection.localDescription)},this.connection.setRemoteDescription(t),this.connection.createAnswer().then((e=>{this.connection.setLocalDescription(e)})).catch(s)}))}acceptAnswer(e){this.connection.setRemoteDescription(new RTCSessionDescription(e))}}const y={data:()=>({p2p:null,myOffer:"",myAnswer:"",theirOffer:"",theirAnswer:"",starting:!1,join:!1,context:null}),methods:{createOffer(){this.p2p.createOffer().then((e=>{this.myOffer=btoa(JSON.stringify(e))}))},acceptOffer(){this.p2p.acceptOffer(JSON.parse(atob(this.theirOffer))).then((e=>{this.myAnswer=btoa(JSON.stringify(e))}))},acceptAnswer(){this.p2p.acceptAnswer(JSON.parse(atob(this.theirAnswer)))},startSession(){this.starting=!0,this.createOffer()},joinSession(){this.join=!0},acceptRequest(){this.acceptOffer()},onMessage(e){if(e)switch(e.message){case"start":this.start(e.value.x,e.value.y);break;case"move":this.move(e.value.x,e.value.y)}},start(e,t){this.context.moveTo(e,t),this.context.beginPath(),this.context.stroke()},startPeer(e,t){this.p2p.send({message:"start",value:{x:e,y:t}})},move(e,t){this.context.lineTo(e,t),this.context.stroke()},movePeer(e,t){this.p2p.send({message:"move",value:{x:e,y:t}})}},mounted(){this.p2p=new z,this.p2p.onMessage=this.onMessage;const e=e=>{const t=this.$refs.canvas.getBoundingClientRect();return[e.clientX-t.left,e.clientY-t.top]};this.context=this.$refs.canvas.getContext("2d");const t=t=>{const[s,n]=e(t);this.move(s,n),this.movePeer(s,n)};this.$refs.canvas.addEventListener("mousedown",(s=>{const[n,i]=e(s);this.start(n,i),this.startPeer(n,i),window.addEventListener("mousemove",t),window.addEventListener("mouseup",(()=>{window.removeEventListener("mousemove",t)}))}))}},C={class:"container"},L={key:0},M={key:1},k={class:"mb-3"},O=n("label",{class:"form-label"},"Your Request",-1),A=n("div",{class:"form-text"},"Send this to a friend.",-1),R={class:"mb-3"},V=n("label",{class:"form-label"},"Their Answer",-1),H=n("div",{class:"form-text"},"Get this from a friend.",-1),E={key:2},T={class:"mb-3"},P=n("label",{class:"form-label"},"Their Request",-1),$=n("div",{class:"form-text"},"Send this to a friend.",-1),j={class:"mb-3"},B=n("label",{class:"form-label"},"Your Answer",-1),U=n("div",{class:"form-text"},"Get this from a friend.",-1),D={ref:"canvas",width:"500",height:"500"};y.render=function(e,i,o,a,h,d){return t(),s("div",C,[h.starting||h.join?r("",!0):(t(),s("div",L,[n("button",{onClick:i[1]||(i[1]=(...e)=>d.startSession&&d.startSession(...e)),class:"btn btn-primary"},"Start Session"),n("button",{onClick:i[2]||(i[2]=(...e)=>d.joinSession&&d.joinSession(...e)),class:"btn btn-secondary ms-1"},"Join Session")])),h.starting?(t(),s("div",M,[n("div",k,[O,l(n("input",{"onUpdate:modelValue":i[3]||(i[3]=e=>h.myOffer=e),type:"text",class:"form-control"},null,512),[[c,h.myOffer]]),A]),n("div",R,[V,l(n("input",{"onUpdate:modelValue":i[4]||(i[4]=e=>h.theirAnswer=e),type:"text",class:"form-control"},null,512),[[c,h.theirAnswer]]),H]),n("button",{onClick:i[5]||(i[5]=(...e)=>d.acceptAnswer&&d.acceptAnswer(...e)),class:"btn btn-secondary ms-1"},"Accept Answer")])):r("",!0),h.join?(t(),s("div",E,[n("div",T,[P,l(n("input",{"onUpdate:modelValue":i[6]||(i[6]=e=>h.theirOffer=e),type:"text",class:"form-control"},null,512),[[c,h.theirOffer]]),$]),n("div",j,[B,l(n("input",{"onUpdate:modelValue":i[7]||(i[7]=e=>h.myAnswer=e),type:"text",class:"form-control"},null,512),[[c,h.myAnswer]]),U]),n("button",{onClick:i[8]||(i[8]=(...e)=>d.acceptRequest&&d.acceptRequest(...e)),class:"btn btn-secondary ms-1"},"Accept Request")])):r("",!0),n("canvas",D,null,512)])};const J={name:"Canvas",data:()=>({color:"#000000",context:null,lines:[],size:5,minSize:5,maxSize:20,width:500,height:400,operation:"source-over",showTools:!0,showSizeSlider:!1}),computed:{lastLine(){return this.lines[this.lines.length-1]},lastPoint(){return this.lastLine.points[this.lastLine.points.length-1]},writing(){return"source-over"===this.operation},erasing(){return"destination-out"===this.operation}},methods:{getCoords(e){const t=this.$refs.canvas.getBoundingClientRect();return{x:e.clientX-t.left,y:e.clientY-t.top}},reset(){this.lines=[],this.clear()},clear(){this.context.clearRect(0,0,this.$refs.canvas.width,this.$refs.canvas.height)},drawLine(e){const[t,...s]=e.points;this.drawStart(t,{color:e.color,operation:e.operation,size:e.size}),s.forEach(this.drawSeg),this.context.stroke()},repaint(){this.clear(),this.lines.forEach(this.drawLine)},undo(){this.lines=this.lines.slice(0,-1),this.repaint()},addLine(e){this.lines.push({color:this.color,operation:this.operation,size:this.size,points:[e]}),this.drawStart(e,{size:this.size,color:this.color,operation:this.operation}),this.context.stroke()},addSeg(e){this.lastLine.points.push(e),this.drawSeg(e),this.context.stroke()},drawSeg(e){this.context.lineTo(e.x,e.y)},drawStart(e,{size:t,color:s,operation:n}){this.context.lineWidth=t,this.context.strokeStyle=s,this.context.fillStyle=s,this.context.lineCap="round",this.context.globalCompositeOperation=n,this.context.moveTo(e.x,e.y),this.context.beginPath(),this.context.arc(e.x,e.y,t/2,0,2*Math.PI),this.context.closePath(),this.context.fill(),this.context.beginPath()},erase(){this.operation="destination-out"},write(){this.operation="source-over"},toggleSizeSlider(){this.showSizeSlider=!this.showSizeSlider},toggleTools(){this.showTools=!this.showTools}},mounted(){this.context=this.$refs.canvas.getContext("2d"),this.context.lineCap="round",this.context.globalCompositeOperation="source-over",this.context.translate(.5,.5),this.width=this.$refs.canvas.parentElement.clientWidth,this.height=this.$refs.canvas.parentElement.clientHeight;const e=e=>{const t=this.getCoords(e);this.addSeg(t)},t=e=>{if(1===e.touches.length){const t=this.getCoords(e.touches[0]);this.addSeg(t)}},s=e=>{const n=this.lastPoint;this.addSeg(n),window.removeEventListener("touchmove",t),window.removeEventListener("touchend",s)};this.$refs.canvas.addEventListener("mousedown",(t=>{const s=this.getCoords(t);this.addLine(s),window.addEventListener("mousemove",e),window.addEventListener("mouseup",(()=>{window.removeEventListener("mousemove",e)}))})),this.$refs.canvas.addEventListener("touchstart",(e=>{if(e.preventDefault(),1===e.touches.length){const n=this.getCoords(e.touches[0]);this.addLine(n),window.addEventListener("touchmove",t),window.addEventListener("touchend",s)}}))}},_=m("data-v-4566e572");h("data-v-4566e572");const N={class:"position-relative border"},q={class:"position-absolute top-0 end-0 m-2 d-flex flex-column align-items-end"},F=n("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-sliders",viewBox:"0 0 16 16"},[n("path",{"fill-rule":"evenodd",d:"M11.5 2a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM9.05 3a2.5 2.5 0 0 1 4.9 0H16v1h-2.05a2.5 2.5 0 0 1-4.9 0H0V3h9.05zM4.5 7a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM2.05 8a2.5 2.5 0 0 1 4.9 0H16v1H6.95a2.5 2.5 0 0 1-4.9 0H0V8h2.05zm9.45 4a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zm-2.45 1a2.5 2.5 0 0 1 4.9 0H16v1h-2.05a2.5 2.5 0 0 1-4.9 0H0v-1h9.05z"})],-1),Y={key:0,class:"d-flex flex-column align-items-end"},G=n("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",class:"bi bi-pencil",viewBox:"0 0 16 16"},[n("path",{d:"M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5L13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175l-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"})],-1),I=n("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",class:"bi bi-eraser",viewBox:"0 0 16 16"},[n("path",{d:"M8.086 2.207a2 2 0 0 1 2.828 0l3.879 3.879a2 2 0 0 1 0 2.828l-5.5 5.5A2 2 0 0 1 7.879 15H5.12a2 2 0 0 1-1.414-.586l-2.5-2.5a2 2 0 0 1 0-2.828l6.879-6.879zm2.121.707a1 1 0 0 0-1.414 0L4.16 7.547l5.293 5.293 4.633-4.633a1 1 0 0 0 0-1.414l-3.879-3.879zM8.746 13.547L3.453 8.254 1.914 9.793a1 1 0 0 0 0 1.414l2.5 2.5a1 1 0 0 0 .707.293H7.88a1 1 0 0 0 .707-.293l.16-.16z"})],-1),W=n("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",class:"bi bi-arrow-counterclockwise",viewBox:"0 0 16 16"},[n("path",{"fill-rule":"evenodd",d:"M8 3a5 5 0 1 1-4.546 2.914.5.5 0 0 0-.908-.417A6 6 0 1 0 8 2v1z"}),n("path",{d:"M8 4.466V.534a.25.25 0 0 0-.41-.192L5.23 2.308a.25.25 0 0 0 0 .384l2.36 1.966A.25.25 0 0 0 8 4.466z"})],-1),X={class:"d-flex align-items-center mt-1"},K={key:0,class:"d-flex align-items-center me-2 position-absolute end-100"},Q=n("circle",{cx:"8",cy:"8",r:"8"},null,-1),Z=n("circle",{cx:"8",cy:"8",r:"8"},null,-1),ee=n("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",class:"bi bi-toggle2-on",viewBox:"0 0 16 16"},[n("path",{d:"M7 5H3a3 3 0 0 0 0 6h4a4.995 4.995 0 0 1-.584-1H3a2 2 0 1 1 0-4h3.416c.156-.357.352-.692.584-1z"}),n("path",{d:"M16 8A5 5 0 1 1 6 8a5 5 0 0 1 10 0z"})],-1),te={class:"btn btn-outline-primary mt-1"},se=n("path",{d:"M0 .5A.5.5 0 0 1 .5 0h5a.5.5 0 0 1 .5.5v5.277l4.147-4.131a.5.5 0 0 1 .707 0l3.535 3.536a.5.5 0 0 1 0 .708L10.261 10H15.5a.5.5 0 0 1 .5.5v5a.5.5 0 0 1-.5.5H3a2.99 2.99 0 0 1-2.121-.879A2.99 2.99 0 0 1 0 13.044m6-.21l7.328-7.3-2.829-2.828L6 7.188v5.647zM4.5 13a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0zM15 15v-4H9.258l-4.015 4H15zM0 .5v12.495z"},null,-1),ne=n("path",{d:"M0 12.995V13a3.07 3.07 0 0 0 0-.005z"},null,-1),ie={key:0,class:"ms-2"},oe=n("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",class:"bi bi-trash",viewBox:"0 0 16 16"},[n("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"}),n("path",{"fill-rule":"evenodd",d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4L4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"})],-1);d();const ae=_(((e,i,o,a,h,d)=>(t(),s("div",N,[h.showSizeSlider?(t(),s("div",{key:0,onClick:i[1]||(i[1]=(...e)=>d.toggleSizeSlider&&d.toggleSizeSlider(...e)),class:"position-absolute top-0 bottom-0 start-0 end-0"})):r("",!0),n("div",q,[n("button",{onClick:i[2]||(i[2]=(...e)=>d.toggleTools&&d.toggleTools(...e)),class:"btn btn-outline-primary"},[F]),h.showTools?(t(),s("div",Y,[d.erasing?(t(),s("button",{key:0,onClick:i[3]||(i[3]=(...e)=>d.write&&d.write(...e)),class:"btn btn-outline-primary mt-1"},[G])):r("",!0),d.writing?(t(),s("button",{key:1,onClick:i[4]||(i[4]=(...e)=>d.erase&&d.erase(...e)),class:"btn btn-outline-danger mt-1"},[I])):r("",!0),n("button",{onClick:i[5]||(i[5]=(...e)=>d.undo&&d.undo(...e)),class:"btn btn-outline-primary mt-1"},[W]),n("div",X,[h.showSizeSlider?(t(),s("div",K,[(t(),s("svg",{style:{color:h.color},xmlns:"http://www.w3.org/2000/svg",width:h.minSize,height:h.minSize,fill:"currentColor",class:"bi bi-circle-fill",viewBox:"0 0 16 16"},[Q],12,["width","height"])),l(n("input",{"onUpdate:modelValue":i[6]||(i[6]=e=>h.size=e),type:"range",min:"5",max:"20",class:"mx-2"},null,512),[[c,h.size]]),(t(),s("svg",{style:{color:h.color},xmlns:"http://www.w3.org/2000/svg",width:h.maxSize,height:h.maxSize,fill:"currentColor",class:"bi bi-circle-fill",viewBox:"0 0 16 16"},[Z],12,["width","height"]))])):r("",!0),n("button",{onClick:i[7]||(i[7]=(...e)=>d.toggleSizeSlider&&d.toggleSizeSlider(...e)),class:"btn btn-outline-primary"},[ee])]),n("label",te,[l(n("input",{"onUpdate:modelValue":i[8]||(i[8]=e=>h.color=e),type:"color",class:"invisible position-absolute"},null,512),[[c,h.color]]),(t(),s("svg",{style:{color:h.color},xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",class:"bi bi-palette2",viewBox:"0 0 16 16"},[se,ne],4)),e.showSettings?(t(),s("span",ie,"Color")):r("",!0)]),n("button",{onClick:i[9]||(i[9]=(...e)=>d.reset&&d.reset(...e)),class:"btn btn-outline-danger mt-1"},[oe])])):r("",!0)]),n("canvas",{ref:"canvas",width:h.width,height:h.height,class:"d-block"},null,8,["width","height"])]))));J.render=ae,J.__scopeId="data-v-4566e572";const re={class:"container p-0"},le={expose:[],setup:e=>(e,i)=>(t(),s("div",re,[n(J)]))},ce=p({history:u(),routes:[{path:"/",component:le},{path:"/doodle",component:y}]}),he=w(v);he.use(ce),he.mount("#app");
