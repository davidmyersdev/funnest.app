import{r as t,o as e,c as s,a as n,w as i,F as o,b as a,d as r,e as l,v as c,p as h,f as d,g as p,h as m,i as u,j as v}from"./vendor.d7ba9d0d.js";!function(t=".",e="__import__"){try{self[e]=new Function("u","return import(u)")}catch(s){const n=new URL(t,location),i=t=>{URL.revokeObjectURL(t.src),t.remove()};self[e]=t=>new Promise(((s,o)=>{const a=new URL(t,n);if(self[e].moduleMap[a])return s(self[e].moduleMap[a]);const r=new Blob([`import * as m from '${a}';`,`${e}.moduleMap['${a}']=m;`],{type:"text/javascript"}),l=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(r),onerror(){o(new Error(`Failed to import: ${t}`)),i(l)},onload(){s(self[e].moduleMap[a]),i(l)}});document.head.appendChild(l)})),self[e].moduleMap={}}}("/assets/");const w={},g={class:"navbar navbar-expand-lg navbar-light bg-light"},f={class:"container-fluid"},b=a("Fun"),x=a("Doodle");w.render=function(a,r){const l=t("router-link"),c=t("router-view");return e(),s(o,null,[n("nav",g,[n("div",f,[n(l,{to:"/",class:"navbar-brand"},{default:i((()=>[b])),_:1}),n(l,{to:"/doodle"},{default:i((()=>[x])),_:1})])]),n(c)],64)};const y=window.RTCPeerConnection||webkitRTCPeerConnection||mozRTCPeerConnection;class C{constructor(){this.connection=new y({iceServers:[{urls:["stun:stun.l.google.com:19302"]}]}),this.onOpen=()=>{},this.onMessage=()=>{},this.channel=null}send(t){this.channel&&this.channel.send(JSON.stringify(t))}createOffer(){return this.channel=this.connection.createDataChannel("main"),this.channel.onopen=this.onOpen,this.channel.onmessage=t=>{this.onMessage(JSON.parse(t.data))},new Promise(((t,e)=>{this.connection.createOffer().then((t=>{this.connection.setLocalDescription(t)})),this.connection.onicecandidate=e=>{null===e.candidate&&t(this.connection.localDescription)}}))}acceptOffer(t){const e=new RTCSessionDescription(t);return this.connection.ondatachannel=t=>{this.channel=t.channel,this.channel.onopen=this.onOpen,this.channel.onmessage=t=>{this.onMessage(JSON.parse(t.data))}},new Promise(((t,s)=>{this.connection.onicecandidate=e=>{null===e.candidate&&t(this.connection.localDescription)},this.connection.setRemoteDescription(e),this.connection.createAnswer().then((t=>{this.connection.setLocalDescription(t)})).catch(s)}))}acceptAnswer(t){this.connection.setRemoteDescription(new RTCSessionDescription(t))}}const S={data:()=>({p2p:null,myOffer:"",myAnswer:"",theirOffer:"",theirAnswer:"",starting:!1,join:!1,context:null}),methods:{createOffer(){this.p2p.createOffer().then((t=>{this.myOffer=btoa(JSON.stringify(t))}))},acceptOffer(){this.p2p.acceptOffer(JSON.parse(atob(this.theirOffer))).then((t=>{this.myAnswer=btoa(JSON.stringify(t))}))},acceptAnswer(){this.p2p.acceptAnswer(JSON.parse(atob(this.theirAnswer)))},startSession(){this.starting=!0,this.createOffer()},joinSession(){this.join=!0},acceptRequest(){this.acceptOffer()},onMessage(t){if(t)switch(t.message){case"start":this.start(t.value.x,t.value.y);break;case"move":this.move(t.value.x,t.value.y)}},start(t,e){this.context.moveTo(t,e),this.context.beginPath(),this.context.stroke()},startPeer(t,e){this.p2p.send({message:"start",value:{x:t,y:e}})},move(t,e){this.context.lineTo(t,e),this.context.stroke()},movePeer(t,e){this.p2p.send({message:"move",value:{x:t,y:e}})}},mounted(){this.p2p=new C,this.p2p.onMessage=this.onMessage;const t=t=>{const e=this.$refs.canvas.getBoundingClientRect();return[t.clientX-e.left,t.clientY-e.top]};this.context=this.$refs.canvas.getContext("2d");const e=e=>{const[s,n]=t(e);this.move(s,n),this.movePeer(s,n)};this.$refs.canvas.addEventListener("mousedown",(s=>{const[n,i]=t(s);this.start(n,i),this.startPeer(n,i),window.addEventListener("mousemove",e),window.addEventListener("mouseup",(()=>{window.removeEventListener("mousemove",e)}))}))}},L={class:"container"},z={key:0},O={key:1},k={class:"mb-3"},A=n("label",{class:"form-label"},"Your Request",-1),M=n("div",{class:"form-text"},"Send this to a friend.",-1),R={class:"mb-3"},V=n("label",{class:"form-label"},"Their Answer",-1),E=n("div",{class:"form-text"},"Get this from a friend.",-1),P={key:2},$={class:"mb-3"},j=n("label",{class:"form-label"},"Their Request",-1),U=n("div",{class:"form-text"},"Send this to a friend.",-1),D={class:"mb-3"},T=n("label",{class:"form-label"},"Your Answer",-1),B=n("div",{class:"form-text"},"Get this from a friend.",-1),H={ref:"canvas",width:"500",height:"500"};S.render=function(t,i,o,a,h,d){return e(),s("div",L,[h.starting||h.join?r("",!0):(e(),s("div",z,[n("button",{onClick:i[1]||(i[1]=(...t)=>d.startSession&&d.startSession(...t)),class:"btn btn-primary"},"Start Session"),n("button",{onClick:i[2]||(i[2]=(...t)=>d.joinSession&&d.joinSession(...t)),class:"btn btn-secondary ms-1"},"Join Session")])),h.starting?(e(),s("div",O,[n("div",k,[A,l(n("input",{"onUpdate:modelValue":i[3]||(i[3]=t=>h.myOffer=t),type:"text",class:"form-control"},null,512),[[c,h.myOffer]]),M]),n("div",R,[V,l(n("input",{"onUpdate:modelValue":i[4]||(i[4]=t=>h.theirAnswer=t),type:"text",class:"form-control"},null,512),[[c,h.theirAnswer]]),E]),n("button",{onClick:i[5]||(i[5]=(...t)=>d.acceptAnswer&&d.acceptAnswer(...t)),class:"btn btn-secondary ms-1"},"Accept Answer")])):r("",!0),h.join?(e(),s("div",P,[n("div",$,[j,l(n("input",{"onUpdate:modelValue":i[6]||(i[6]=t=>h.theirOffer=t),type:"text",class:"form-control"},null,512),[[c,h.theirOffer]]),U]),n("div",D,[T,l(n("input",{"onUpdate:modelValue":i[7]||(i[7]=t=>h.myAnswer=t),type:"text",class:"form-control"},null,512),[[c,h.myAnswer]]),B]),n("button",{onClick:i[8]||(i[8]=(...t)=>d.acceptRequest&&d.acceptRequest(...t)),class:"btn btn-secondary ms-1"},"Accept Request")])):r("",!0),n("canvas",H,null,512)])};const J={name:"Canvas",data:()=>({color:"#000000",context:null,lines:[],size:5,width:500,height:400,operation:"source-over",showSettings:!1}),computed:{lastLine(){return this.lines[this.lines.length-1]},lastPoint(){return this.lastLine.points[this.lastLine.points.length-1]},writing(){return"source-over"===this.operation},erasing(){return"destination-out"===this.operation}},methods:{getCoords(t){const e=this.$refs.canvas.getBoundingClientRect();return{x:t.clientX-e.left,y:t.clientY-e.top}},reset(){this.lines=[],this.clear()},clear(){this.context.clearRect(0,0,this.$refs.canvas.width,this.$refs.canvas.height)},drawLine(t){const[e,...s]=t.points;this.drawStart(e,{color:t.color,operation:t.operation,size:t.size}),s.forEach(this.drawSeg)},repaint(){this.clear(),this.lines.forEach(this.drawLine)},undo(){this.lines=this.lines.slice(0,-1),this.repaint()},addLine(t){this.lines.push({color:this.color,operation:this.operation,size:this.size,points:[t]}),this.drawStart(t,{size:this.size,color:this.color,operation:this.operation})},addSeg(t){this.lastLine.points.push(t),this.drawSeg(t)},drawSeg(t){this.context.lineTo(t.x,t.y),this.context.stroke()},drawStart(t,{size:e,color:s,operation:n}){this.context.lineWidth=e,this.context.strokeStyle=s,this.context.fillStyle=s,this.context.lineCap="round",this.context.globalCompositeOperation=n,this.context.moveTo(t.x,t.y),this.context.beginPath(),this.context.arc(t.x,t.y,e/2,0,2*Math.PI),this.context.closePath(),this.context.fill(),this.context.beginPath(),this.context.stroke()},erase(){this.operation="destination-out"},write(){this.operation="source-over"},toggleSettings(){this.showSettings=!this.showSettings}},mounted(){this.context=this.$refs.canvas.getContext("2d"),this.context.lineCap="round",this.context.globalCompositeOperation="source-over",this.context.translate(.5,.5),this.width=this.$refs.canvas.parentElement.clientWidth,this.height=this.$refs.canvas.parentElement.clientHeight;const t=t=>{const e=this.getCoords(t);this.addSeg(e)},e=t=>{if(1===t.touches.length){const e=this.getCoords(t.touches[0]);this.addSeg(e)}},s=t=>{const n=this.lastPoint;this.addSeg(n),window.removeEventListener("touchmove",e),window.removeEventListener("touchend",s)};this.$refs.canvas.addEventListener("mousedown",(e=>{const s=this.getCoords(e);this.addLine(s),window.addEventListener("mousemove",t),window.addEventListener("mouseup",(()=>{window.removeEventListener("mousemove",t)}))})),this.$refs.canvas.addEventListener("touchstart",(t=>{if(t.preventDefault(),1===t.touches.length){const n=this.getCoords(t.touches[0]);this.addLine(n),window.addEventListener("touchmove",e),window.addEventListener("touchend",s)}}))}},_=p("data-v-10907acb");h("data-v-10907acb");const N={class:"position-relative border"},q={class:"position-absolute top-0 end-0 m-2 d-flex flex-column"},F={type:"button",class:"btn btn-outline-primary mb-1"},Y={key:0,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-pencil",viewBox:"0 0 16 16"},G=n("path",{d:"M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5L13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175l-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"},null,-1),I={key:1,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-eraser",viewBox:"0 0 16 16"},W=n("path",{d:"M8.086 2.207a2 2 0 0 1 2.828 0l3.879 3.879a2 2 0 0 1 0 2.828l-5.5 5.5A2 2 0 0 1 7.879 15H5.12a2 2 0 0 1-1.414-.586l-2.5-2.5a2 2 0 0 1 0-2.828l6.879-6.879zm2.121.707a1 1 0 0 0-1.414 0L4.16 7.547l5.293 5.293 4.633-4.633a1 1 0 0 0 0-1.414l-3.879-3.879zM8.746 13.547L3.453 8.254 1.914 9.793a1 1 0 0 0 0 1.414l2.5 2.5a1 1 0 0 0 .707.293H7.88a1 1 0 0 0 .707-.293l.16-.16z"},null,-1),X={key:0,class:"card"},K={class:"card-body p-2 d-flex flex-column"},Q=n("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-arrow-counterclockwise",viewBox:"0 0 16 16"},[n("path",{"fill-rule":"evenodd",d:"M8 3a5 5 0 1 1-4.546 2.914.5.5 0 0 0-.908-.417A6 6 0 1 0 8 2v1z"}),n("path",{d:"M8 4.466V.534a.25.25 0 0 0-.41-.192L5.23 2.308a.25.25 0 0 0 0 .384l2.36 1.966A.25.25 0 0 0 8 4.466z"})],-1),Z=n("span",{class:"ms-2"},"Undo",-1),tt=n("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-trash",viewBox:"0 0 16 16"},[n("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"}),n("path",{"fill-rule":"evenodd",d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4L4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"})],-1),et=n("span",{class:"ms-2"},"Clear",-1),st=n("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-pencil",viewBox:"0 0 16 16"},[n("path",{d:"M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5L13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175l-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"})],-1),nt=n("span",{class:"ms-2"},"Draw",-1),it=n("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-eraser",viewBox:"0 0 16 16"},[n("path",{d:"M8.086 2.207a2 2 0 0 1 2.828 0l3.879 3.879a2 2 0 0 1 0 2.828l-5.5 5.5A2 2 0 0 1 7.879 15H5.12a2 2 0 0 1-1.414-.586l-2.5-2.5a2 2 0 0 1 0-2.828l6.879-6.879zm2.121.707a1 1 0 0 0-1.414 0L4.16 7.547l5.293 5.293 4.633-4.633a1 1 0 0 0 0-1.414l-3.879-3.879zM8.746 13.547L3.453 8.254 1.914 9.793a1 1 0 0 0 0 1.414l2.5 2.5a1 1 0 0 0 .707.293H7.88a1 1 0 0 0 .707-.293l.16-.16z"})],-1),ot=n("span",{class:"ms-2"},"Erase",-1),at={class:"d-flex align-items-center my-3"},rt=n("div",{class:"dot dot-min"},null,-1),lt=n("div",{class:"dot dot-max"},null,-1),ct={class:"btn d-flex align-items-center"},ht=n("circle",{cx:"8",cy:"8",r:"8"},null,-1),dt=n("span",{class:"ms-2"},"Color",-1);d();const pt=_(((t,i,o,a,h,d)=>(e(),s("div",N,[h.showSettings?(e(),s("div",{key:0,onClick:i[1]||(i[1]=(...t)=>d.toggleSettings&&d.toggleSettings(...t)),class:"position-absolute top-0 bottom-0 start-0 end-0"})):r("",!0),n("div",q,[n("div",{onClick:i[2]||(i[2]=(...t)=>d.toggleSettings&&d.toggleSettings(...t)),class:"d-flex justify-content-end"},[n("button",F,[d.writing?(e(),s("svg",Y,[G])):r("",!0),d.erasing?(e(),s("svg",I,[W])):r("",!0)])]),h.showSettings?(e(),s("div",X,[n("div",K,[n("button",{onClick:i[3]||(i[3]=(...t)=>d.undo&&d.undo(...t)),class:"btn btn-primary d-flex align-items-center"},[Q,Z]),n("button",{onClick:i[4]||(i[4]=(...t)=>d.reset&&d.reset(...t)),class:"btn btn-danger d-flex align-items-center mt-1"},[tt,et]),d.erasing?(e(),s("button",{key:0,class:[{active:d.writing},"btn btn-primary d-flex align-items-center mt-1"],onClick:i[5]||(i[5]=(...t)=>d.write&&d.write(...t))},[st,nt],2)):r("",!0),d.writing?(e(),s("button",{key:1,onClick:i[6]||(i[6]=(...t)=>d.erase&&d.erase(...t)),class:[{active:d.erasing},"btn btn-danger d-flex align-items-center mt-1"]},[it,ot],2)):r("",!0),n("div",at,[rt,l(n("input",{"onUpdate:modelValue":i[7]||(i[7]=t=>h.size=t),type:"range",min:"5",max:"20",class:"mx-2"},null,512),[[c,h.size]]),lt]),n("label",ct,[l(n("input",{"onUpdate:modelValue":i[8]||(i[8]=t=>h.color=t),type:"color",class:"invisible position-absolute"},null,512),[[c,h.color]]),(e(),s("svg",{style:{color:h.color},xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-circle-fill",viewBox:"0 0 16 16"},[ht],4)),dt])])])):r("",!0)]),n("canvas",{ref:"canvas",width:h.width,height:h.height,class:"d-block"},null,8,["width","height"])]))));J.render=pt,J.__scopeId="data-v-10907acb";const mt={class:"container p-0"},ut={expose:[],setup:t=>(t,i)=>(e(),s("div",mt,[n(J)]))},vt=m({history:u(),routes:[{path:"/",component:ut},{path:"/doodle",component:S}]}),wt=v(w);wt.use(vt),wt.mount("#app");
