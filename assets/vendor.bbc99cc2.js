function t(t,e){const n=Object.create(null),r=t.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return e?t=>!!n[t.toLowerCase()]:t=>!!n[t]}const e=t("Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl"),n=t("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function r(t){if(w(t)){const e={};for(let n=0;n<t.length;n++){const i=t[n],o=r(S(i)?s(i):i);if(o)for(const t in o)e[t]=o[t]}return e}if(N(t))return t}const i=/;(?![^(]*\))/g,o=/:(.+)/;function s(t){const e={};return t.split(i).forEach((t=>{if(t){const n=t.split(o);n.length>1&&(e[n[0].trim()]=n[1].trim())}})),e}function a(t){let e="";if(S(t))e=t;else if(w(t))for(let n=0;n<t.length;n++)e+=a(t[n])+" ";else if(N(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const u=t=>null==t?"":N(t)?JSON.stringify(t,c,2):String(t),c=(t,e)=>E(e)?{[`Map(${e.size})`]:[...e.entries()].reduce(((t,[e,n])=>(t[`${e} =>`]=n,t)),{})}:I(e)?{[`Set(${e.size})`]:[...e.values()]}:!N(e)||w(e)||O(e)?e:String(e),h={},l=[],f=()=>{},p=()=>!1,d=/^on[^a-z]/,v=t=>d.test(t),y=t=>t.startsWith("onUpdate:"),g=Object.assign,m=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},_=Object.prototype.hasOwnProperty,b=(t,e)=>_.call(t,e),w=Array.isArray,E=t=>"[object Map]"===P(t),I=t=>"[object Set]"===P(t),T=t=>"function"==typeof t,S=t=>"string"==typeof t,C=t=>"symbol"==typeof t,N=t=>null!==t&&"object"==typeof t,A=t=>N(t)&&T(t.then)&&T(t.catch),k=Object.prototype.toString,P=t=>k.call(t),O=t=>"[object Object]"===P(t),x=t=>S(t)&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t,R=t(",key,ref,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),D=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},L=/-(\w)/g,M=D((t=>t.replace(L,((t,e)=>e?e.toUpperCase():"")))),F=/\B([A-Z])/g,V=D((t=>t.replace(F,"-$1").toLowerCase())),U=D((t=>t.charAt(0).toUpperCase()+t.slice(1))),j=D((t=>t?`on${U(t)}`:"")),q=(t,e)=>t!==e&&(t==t||e==e),B=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},W=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},H=t=>{const e=parseFloat(t);return isNaN(e)?t:e},G=new WeakMap,z=[];let Q;const K=Symbol(""),Y=Symbol("");function X(t,e=h){(function(t){return t&&!0===t._isEffect})(t)&&(t=t.raw);const n=function(t,e){const n=function(){if(!n.active)return e.scheduler?void 0:t();if(!z.includes(n)){Z(n);try{return et.push(tt),tt=!0,z.push(n),Q=n,t()}finally{z.pop(),rt(),Q=z[z.length-1]}}};return n.id=J++,n.allowRecurse=!!e.allowRecurse,n._isEffect=!0,n.active=!0,n.raw=t,n.deps=[],n.options=e,n}(t,e);return e.lazy||n(),n}function $(t){t.active&&(Z(t),t.options.onStop&&t.options.onStop(),t.active=!1)}let J=0;function Z(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let tt=!0;const et=[];function nt(){et.push(tt),tt=!1}function rt(){const t=et.pop();tt=void 0===t||t}function it(t,e,n){if(!tt||void 0===Q)return;let r=G.get(t);r||G.set(t,r=new Map);let i=r.get(n);i||r.set(n,i=new Set),i.has(Q)||(i.add(Q),Q.deps.push(i))}function ot(t,e,n,r,i,o){const s=G.get(t);if(!s)return;const a=new Set,u=t=>{t&&t.forEach((t=>{(t!==Q||t.allowRecurse)&&a.add(t)}))};if("clear"===e)s.forEach(u);else if("length"===n&&w(t))s.forEach(((t,e)=>{("length"===e||e>=r)&&u(t)}));else switch(void 0!==n&&u(s.get(n)),e){case"add":w(t)?x(n)&&u(s.get("length")):(u(s.get(K)),E(t)&&u(s.get(Y)));break;case"delete":w(t)||(u(s.get(K)),E(t)&&u(s.get(Y)));break;case"set":E(t)&&u(s.get(K))}a.forEach((t=>{t.options.scheduler?t.options.scheduler(t):t()}))}const st=new Set(Object.getOwnPropertyNames(Symbol).map((t=>Symbol[t])).filter(C)),at=ft(),ut=ft(!1,!0),ct=ft(!0),ht=ft(!0,!0),lt={};function ft(t=!1,e=!1){return function(n,r,i){if("__v_isReactive"===r)return!t;if("__v_isReadonly"===r)return t;if("__v_raw"===r&&i===(t?Ut:Vt).get(n))return n;const o=w(n);if(!t&&o&&b(lt,r))return Reflect.get(lt,r,i);const s=Reflect.get(n,r,i);if(C(r)?st.has(r):"__proto__"===r||"__v_isRef"===r)return s;if(t||it(n,0,r),e)return s;if(Yt(s)){return!o||!x(r)?s.value:s}return N(s)?t?Bt(s):qt(s):s}}["includes","indexOf","lastIndexOf"].forEach((t=>{const e=Array.prototype[t];lt[t]=function(...t){const n=Qt(this);for(let e=0,i=this.length;e<i;e++)it(n,0,e+"");const r=e.apply(n,t);return-1===r||!1===r?e.apply(n,t.map(Qt)):r}})),["push","pop","shift","unshift","splice"].forEach((t=>{const e=Array.prototype[t];lt[t]=function(...t){nt();const n=e.apply(this,t);return rt(),n}}));function pt(t=!1){return function(e,n,r,i){const o=e[n];if(!t&&(r=Qt(r),!w(e)&&Yt(o)&&!Yt(r)))return o.value=r,!0;const s=w(e)&&x(n)?Number(n)<e.length:b(e,n),a=Reflect.set(e,n,r,i);return e===Qt(i)&&(s?q(r,o)&&ot(e,"set",n,r):ot(e,"add",n,r)),a}}const dt={get:at,set:pt(),deleteProperty:function(t,e){const n=b(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&n&&ot(t,"delete",e,void 0),r},has:function(t,e){const n=Reflect.has(t,e);return C(e)&&st.has(e)||it(t,0,e),n},ownKeys:function(t){return it(t,0,w(t)?"length":K),Reflect.ownKeys(t)}},vt={get:ct,set:(t,e)=>!0,deleteProperty:(t,e)=>!0},yt=g({},dt,{get:ut,set:pt(!0)});g({},vt,{get:ht});const gt=t=>N(t)?qt(t):t,mt=t=>N(t)?Bt(t):t,_t=t=>t,bt=t=>Reflect.getPrototypeOf(t);function wt(t,e,n=!1,r=!1){const i=Qt(t=t.__v_raw),o=Qt(e);e!==o&&!n&&it(i,0,e),!n&&it(i,0,o);const{has:s}=bt(i),a=n?mt:r?_t:gt;return s.call(i,e)?a(t.get(e)):s.call(i,o)?a(t.get(o)):void 0}function Et(t,e=!1){const n=this.__v_raw,r=Qt(n),i=Qt(t);return t!==i&&!e&&it(r,0,t),!e&&it(r,0,i),t===i?n.has(t):n.has(t)||n.has(i)}function It(t,e=!1){return t=t.__v_raw,!e&&it(Qt(t),0,K),Reflect.get(t,"size",t)}function Tt(t){t=Qt(t);const e=Qt(this),n=bt(e).has.call(e,t);return e.add(t),n||ot(e,"add",t,t),this}function St(t,e){e=Qt(e);const n=Qt(this),{has:r,get:i}=bt(n);let o=r.call(n,t);o||(t=Qt(t),o=r.call(n,t));const s=i.call(n,t);return n.set(t,e),o?q(e,s)&&ot(n,"set",t,e):ot(n,"add",t,e),this}function Ct(t){const e=Qt(this),{has:n,get:r}=bt(e);let i=n.call(e,t);i||(t=Qt(t),i=n.call(e,t)),r&&r.call(e,t);const o=e.delete(t);return i&&ot(e,"delete",t,void 0),o}function Nt(){const t=Qt(this),e=0!==t.size,n=t.clear();return e&&ot(t,"clear",void 0,void 0),n}function At(t,e){return function(n,r){const i=this,o=i.__v_raw,s=Qt(o),a=t?mt:e?_t:gt;return!t&&it(s,0,K),o.forEach(((t,e)=>n.call(r,a(t),a(e),i)))}}function kt(t,e,n){return function(...r){const i=this.__v_raw,o=Qt(i),s=E(o),a="entries"===t||t===Symbol.iterator&&s,u="keys"===t&&s,c=i[t](...r),h=e?mt:n?_t:gt;return!e&&it(o,0,u?Y:K),{next(){const{value:t,done:e}=c.next();return e?{value:t,done:e}:{value:a?[h(t[0]),h(t[1])]:h(t),done:e}},[Symbol.iterator](){return this}}}}function Pt(t){return function(...e){return"delete"!==t&&this}}const Ot={get(t){return wt(this,t)},get size(){return It(this)},has:Et,add:Tt,set:St,delete:Ct,clear:Nt,forEach:At(!1,!1)},xt={get(t){return wt(this,t,!1,!0)},get size(){return It(this)},has:Et,add:Tt,set:St,delete:Ct,clear:Nt,forEach:At(!1,!0)},Rt={get(t){return wt(this,t,!0)},get size(){return It(this,!0)},has(t){return Et.call(this,t,!0)},add:Pt("add"),set:Pt("set"),delete:Pt("delete"),clear:Pt("clear"),forEach:At(!0,!1)};function Dt(t,e){const n=e?xt:t?Rt:Ot;return(e,r,i)=>"__v_isReactive"===r?!t:"__v_isReadonly"===r?t:"__v_raw"===r?e:Reflect.get(b(n,r)&&r in e?n:e,r,i)}["keys","values","entries",Symbol.iterator].forEach((t=>{Ot[t]=kt(t,!1,!1),Rt[t]=kt(t,!0,!1),xt[t]=kt(t,!1,!0)}));const Lt={get:Dt(!1,!1)},Mt={get:Dt(!1,!0)},Ft={get:Dt(!0,!1)},Vt=new WeakMap,Ut=new WeakMap;function jt(t){return t.__v_skip||!Object.isExtensible(t)?0:function(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}((t=>P(t).slice(8,-1))(t))}function qt(t){return t&&t.__v_isReadonly?t:Wt(t,!1,dt,Lt)}function Bt(t){return Wt(t,!0,vt,Ft)}function Wt(t,e,n,r){if(!N(t))return t;if(t.__v_raw&&(!e||!t.__v_isReactive))return t;const i=e?Ut:Vt,o=i.get(t);if(o)return o;const s=jt(t);if(0===s)return t;const a=new Proxy(t,2===s?r:n);return i.set(t,a),a}function Ht(t){return Gt(t)?Ht(t.__v_raw):!(!t||!t.__v_isReactive)}function Gt(t){return!(!t||!t.__v_isReadonly)}function zt(t){return Ht(t)||Gt(t)}function Qt(t){return t&&Qt(t.__v_raw)||t}const Kt=t=>N(t)?qt(t):t;function Yt(t){return Boolean(t&&!0===t.__v_isRef)}class Xt{constructor(t,e=!1){this._rawValue=t,this._shallow=e,this.__v_isRef=!0,this._value=e?t:Kt(t)}get value(){return it(Qt(this),0,"value"),this._value}set value(t){q(Qt(t),this._rawValue)&&(this._rawValue=t,this._value=this._shallow?t:Kt(t),ot(Qt(this),"set","value",t))}}function $t(t,e=!1){return Yt(t)?t:new Xt(t,e)}function Jt(t){return Yt(t)?t.value:t}const Zt={get:(t,e,n)=>Jt(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return Yt(i)&&!Yt(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function te(t){return Ht(t)?t:new Proxy(t,Zt)}class ee{constructor(t,e){this._object=t,this._key=e,this.__v_isRef=!0}get value(){return this._object[this._key]}set value(t){this._object[this._key]=t}}class ne{constructor(t,e,n){this._setter=e,this._dirty=!0,this.__v_isRef=!0,this.effect=X(t,{lazy:!0,scheduler:()=>{this._dirty||(this._dirty=!0,ot(Qt(this),"set","value"))}}),this.__v_isReadonly=n}get value(){return this._dirty&&(this._value=this.effect(),this._dirty=!1),it(Qt(this),0,"value"),this._value}set value(t){this._setter(t)}}function re(t,e,n,r){let i;try{i=r?t(...r):t()}catch(o){oe(o,e,n)}return i}function ie(t,e,n,r){if(T(t)){const i=re(t,e,n,r);return i&&A(i)&&i.catch((t=>{oe(t,e,n)})),i}const i=[];for(let o=0;o<t.length;o++)i.push(ie(t[o],e,n,r));return i}function oe(t,e,n,r=!0){e&&e.vnode;if(e){let r=e.parent;const i=e.proxy,o=n;for(;r;){const e=r.ec;if(e)for(let n=0;n<e.length;n++)if(!1===e[n](t,i,o))return;r=r.parent}const s=e.appContext.config.errorHandler;if(s)return void re(s,null,10,[t,i,o])}!function(t,e,n,r=!0){console.error(t)}(t,0,0,r)}let se=!1,ae=!1;const ue=[];let ce=0;const he=[];let le=null,fe=0;const pe=[];let de=null,ve=0;const ye=Promise.resolve();let ge=null,me=null;function _e(t){const e=ge||ye;return t?e.then(this?t.bind(this):t):e}function be(t){ue.length&&ue.includes(t,se&&t.allowRecurse?ce+1:ce)||t===me||(ue.push(t),we())}function we(){se||ae||(ae=!0,ge=ye.then(Ce))}function Ee(t,e,n,r){w(t)?n.push(...t):e&&e.includes(t,t.allowRecurse?r+1:r)||n.push(t),we()}function Ie(t,e=null){if(he.length){for(me=e,le=[...new Set(he)],he.length=0,fe=0;fe<le.length;fe++)le[fe]();le=null,fe=0,me=null,Ie(t,e)}}function Te(t){if(pe.length){const t=[...new Set(pe)];if(pe.length=0,de)return void de.push(...t);for(de=t,de.sort(((t,e)=>Se(t)-Se(e))),ve=0;ve<de.length;ve++)de[ve]();de=null,ve=0}}const Se=t=>null==t.id?1/0:t.id;function Ce(t){ae=!1,se=!0,Ie(t),ue.sort(((t,e)=>Se(t)-Se(e)));try{for(ce=0;ce<ue.length;ce++){const t=ue[ce];t&&re(t,null,14)}}finally{ce=0,ue.length=0,Te(),se=!1,ge=null,(ue.length||pe.length)&&Ce(t)}}function Ne(t,e,...n){const r=t.vnode.props||h;let i=n;const o=e.startsWith("update:"),s=o&&e.slice(7);if(s&&s in r){const t=`${"modelValue"===s?"model":s}Modifiers`,{number:e,trim:o}=r[t]||h;o?i=n.map((t=>t.trim())):e&&(i=n.map(H))}let a=j(M(e)),u=r[a];!u&&o&&(a=j(V(e)),u=r[a]),u&&ie(u,t,6,i);const c=r[a+"Once"];if(c){if(t.emitted){if(t.emitted[a])return}else(t.emitted={})[a]=!0;ie(c,t,6,i)}}function Ae(t,e,n=!1){if(!e.deopt&&void 0!==t.__emits)return t.__emits;const r=t.emits;let i={},o=!1;if(!T(t)){const r=t=>{o=!0,g(i,Ae(t,e,!0))};!n&&e.mixins.length&&e.mixins.forEach(r),t.extends&&r(t.extends),t.mixins&&t.mixins.forEach(r)}return r||o?(w(r)?r.forEach((t=>i[t]=null)):g(i,r),t.__emits=i):t.__emits=null}function ke(t,e){return!(!t||!v(e))&&(e=e.slice(2).replace(/Once$/,""),b(t,e[0].toLowerCase()+e.slice(1))||b(t,V(e))||b(t,e))}let Pe=null;function Oe(t){Pe=t}function xe(t){const{type:e,vnode:n,proxy:r,withProxy:i,props:o,propsOptions:[s],slots:a,attrs:u,emit:c,render:h,renderCache:l,data:f,setupState:p,ctx:d}=t;let v;Pe=t;try{let t;if(4&n.shapeFlag){const e=i||r;v=Zn(h.call(e,e,l,o,p,f,d)),t=u}else{const n=e;0,v=Zn(n.length>1?n(o,{attrs:u,slots:a,emit:c}):n(o,null)),t=e.props?u:De(u)}let g=v;if(!1!==e.inheritAttrs&&t){const e=Object.keys(t),{shapeFlag:n}=g;e.length&&(1&n||6&n)&&(s&&e.some(y)&&(t=Le(t,s)),g=Xn(g,t))}n.dirs&&(g.dirs=g.dirs?g.dirs.concat(n.dirs):n.dirs),n.transition&&(g.transition=n.transition),v=g}catch(g){oe(g,t,1),v=Yn(Fn)}return Pe=null,v}function Re(t){let e;for(let n=0;n<t.length;n++){const r=t[n];if(!Hn(r))return;if(r.type!==Fn||"v-if"===r.children){if(e)return;e=r}}return e}const De=t=>{let e;for(const n in t)("class"===n||"style"===n||v(n))&&((e||(e={}))[n]=t[n]);return e},Le=(t,e)=>{const n={};for(const r in t)y(r)&&r.slice(9)in e||(n[r]=t[r]);return n};function Me(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(e[o]!==t[o]&&!ke(n,o))return!0}return!1}function Fe(t){if(T(t)&&(t=t()),w(t)){t=Re(t)}return Zn(t)}let Ve=0;const Ue=t=>Ve+=t;function je(t,e=Pe){if(!e)return t;const n=(...n)=>{Ve||qn(!0);const r=Pe;Oe(e);const i=t(...n);return Oe(r),Ve||Bn(),i};return n._c=!0,n}function qe(t,e,n,r=!1){const i={},o={};W(o,zn,1),Be(t,e,i,o),n?t.props=r?i:Wt(i,!1,yt,Mt):t.type.props?t.props=i:t.props=o,t.attrs=o}function Be(t,e,n,r){const[i,o]=t.propsOptions;if(e)for(const s in e){const o=e[s];if(R(s))continue;let a;i&&b(i,a=M(s))?n[a]=o:ke(t.emitsOptions,s)||(r[s]=o)}if(o){const e=Qt(n);for(let r=0;r<o.length;r++){const s=o[r];n[s]=We(i,e,s,e[s],t)}}}function We(t,e,n,r,i){const o=t[n];if(null!=o){const t=b(o,"default");if(t&&void 0===r){const t=o.default;o.type!==Function&&T(t)?(br(i),r=t(e),br(null)):r=t}o[0]&&(b(e,n)||t?!o[1]||""!==r&&r!==V(n)||(r=!0):r=!1)}return r}function He(t,e,n=!1){if(!e.deopt&&t.__props)return t.__props;const r=t.props,i={},o=[];let s=!1;if(!T(t)){const r=t=>{s=!0;const[n,r]=He(t,e,!0);g(i,n),r&&o.push(...r)};!n&&e.mixins.length&&e.mixins.forEach(r),t.extends&&r(t.extends),t.mixins&&t.mixins.forEach(r)}if(!r&&!s)return t.__props=l;if(w(r))for(let a=0;a<r.length;a++){const t=M(r[a]);Ge(t)&&(i[t]=h)}else if(r)for(const a in r){const t=M(a);if(Ge(t)){const e=r[a],n=i[t]=w(e)||T(e)?{type:e}:e;if(n){const e=Ke(Boolean,n.type),r=Ke(String,n.type);n[0]=e>-1,n[1]=r<0||e<r,(e>-1||b(n,"default"))&&o.push(t)}}}return t.__props=[i,o]}function Ge(t){return"$"!==t[0]}function ze(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:""}function Qe(t,e){return ze(t)===ze(e)}function Ke(t,e){if(w(e)){for(let n=0,r=e.length;n<r;n++)if(Qe(e[n],t))return n}else if(T(e))return Qe(e,t)?0:-1;return-1}function Ye(t,e,n=_r,r=!1){if(n){const i=n[t]||(n[t]=[]),o=e.__weh||(e.__weh=(...r)=>{if(n.isUnmounted)return;nt(),br(n);const i=ie(e,n,t,r);return br(null),rt(),i});return r?i.unshift(o):i.push(o),o}}const Xe=t=>(e,n=_r)=>!wr&&Ye(t,e,n),$e=Xe("bm"),Je=Xe("m"),Ze=Xe("bu"),tn=Xe("u"),en=Xe("bum"),nn=Xe("um"),rn=Xe("rtg"),on=Xe("rtc"),sn={};function an(t,e,n){return un(t,e,n)}function un(t,e,{immediate:n,deep:r,flush:i,onTrack:o,onTrigger:s}=h,a=_r){let u,c,l=!1;if(Yt(t)?(u=()=>t.value,l=!!t._shallow):Ht(t)?(u=()=>t,r=!0):u=w(t)?()=>t.map((t=>Yt(t)?t.value:Ht(t)?hn(t):T(t)?re(t,a,2):void 0)):T(t)?e?()=>re(t,a,2):()=>{if(!a||!a.isUnmounted)return c&&c(),re(t,a,3,[p])}:f,e&&r){const t=u;u=()=>hn(t())}const p=t=>{c=g.options.onStop=()=>{re(t,a,4)}};let d=w(t)?[]:sn;const v=()=>{if(g.active)if(e){const t=g();(r||l||q(t,d))&&(c&&c(),ie(e,a,3,[t,d===sn?void 0:d,p]),d=t)}else g()};let y;v.allowRecurse=!!e,y="sync"===i?v:"post"===i?()=>Cn(v,a&&a.suspense):()=>{!a||a.isMounted?function(t){Ee(t,le,he,fe)}(v):v()};const g=X(u,{lazy:!0,onTrack:o,onTrigger:s,scheduler:y});return Tr(g,a),e?n?v():d=g():"post"===i?Cn(g,a&&a.suspense):g(),()=>{$(g),a&&m(a.effects,g)}}function cn(t,e,n){const r=this.proxy;return un(S(t)?()=>r[t]:t.bind(r),e.bind(r),n,this)}function hn(t,e=new Set){if(!N(t)||e.has(t))return t;if(e.add(t),Yt(t))hn(t.value,e);else if(w(t))for(let n=0;n<t.length;n++)hn(t[n],e);else if(I(t)||E(t))t.forEach((t=>{hn(t,e)}));else for(const n in t)hn(t[n],e);return t}const ln=t=>t.type.__isKeepAlive;function fn(t,e,n=_r){const r=t.__wdc||(t.__wdc=()=>{let e=n;for(;e;){if(e.isDeactivated)return;e=e.parent}t()});if(Ye(e,r,n),n){let t=n.parent;for(;t&&t.parent;)ln(t.parent.vnode)&&pn(r,e,n,t),t=t.parent}}function pn(t,e,n,r){const i=Ye(e,t,r,!0);nn((()=>{m(r[e],i)}),n)}const dn=t=>"_"===t[0]||"$stable"===t,vn=t=>w(t)?t.map(Zn):[Zn(t)],yn=(t,e,n)=>je((t=>vn(e(t))),n),gn=(t,e)=>{const n=t._ctx;for(const r in t){if(dn(r))continue;const i=t[r];if(T(i))e[r]=yn(0,i,n);else if(null!=i){const t=vn(i);e[r]=()=>t}}},mn=(t,e)=>{const n=vn(e);t.slots.default=()=>n};function _n(t,e){if(null===Pe)return t;const n=Pe.proxy,r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[t,o,s,a=h]=e[i];T(t)&&(t={mounted:t,updated:t}),r.push({dir:t,instance:n,value:o,oldValue:void 0,arg:s,modifiers:a})}return t}function bn(t,e,n,r){const i=t.dirs,o=e&&e.dirs;for(let s=0;s<i.length;s++){const a=i[s];o&&(a.oldValue=o[s].value);const u=a.dir[r];u&&ie(u,n,8,[t.el,a,t,e])}}function wn(){return{app:null,config:{isNativeTag:p,performance:!1,globalProperties:{},optionMergeStrategies:{},isCustomElement:p,errorHandler:void 0,warnHandler:void 0},mixins:[],components:{},directives:{},provides:Object.create(null)}}let En=0;function In(t,e){return function(n,r=null){null==r||N(r)||(r=null);const i=wn(),o=new Set;let s=!1;const a=i.app={_uid:En++,_component:n,_props:r,_container:null,_context:i,version:kr,get config(){return i.config},set config(t){},use:(t,...e)=>(o.has(t)||(t&&T(t.install)?(o.add(t),t.install(a,...e)):T(t)&&(o.add(t),t(a,...e))),a),mixin:t=>(i.mixins.includes(t)||(i.mixins.push(t),(t.props||t.emits)&&(i.deopt=!0)),a),component:(t,e)=>e?(i.components[t]=e,a):i.components[t],directive:(t,e)=>e?(i.directives[t]=e,a):i.directives[t],mount(o,u){if(!s){const c=Yn(n,r);return c.appContext=i,u&&e?e(c,o):t(c,o),s=!0,a._container=o,o.__vue_app__=a,c.component.proxy}},unmount(){s&&t(null,a._container)},provide:(t,e)=>(i.provides[t]=e,a)};return a}}function Tn(t){return T(t)?{setup:t,name:t.name}:t}const Sn={scheduler:be,allowRecurse:!0},Cn=function(t,e){e&&e.pendingBranch?w(t)?e.effects.push(...t):e.effects.push(t):Ee(t,de,pe,ve)},Nn=(t,e,n,r)=>{if(w(t))return void t.forEach(((t,i)=>Nn(t,e&&(w(e)?e[i]:e),n,r)));let i;i=!r||r.type.__asyncLoader?null:4&r.shapeFlag?r.component.exposed||r.component.proxy:r.el;const{i:o,r:s}=t,a=e&&e.r,u=o.refs===h?o.refs={}:o.refs,c=o.setupState;if(null!=a&&a!==s&&(S(a)?(u[a]=null,b(c,a)&&(c[a]=null)):Yt(a)&&(a.value=null)),S(s)){const t=()=>{u[s]=i,b(c,s)&&(c[s]=i)};i?(t.id=-1,Cn(t,n)):t()}else if(Yt(s)){const t=()=>{s.value=i};i?(t.id=-1,Cn(t,n)):t()}else T(s)&&re(s,o,12,[i,u])};function An(t){return function(t,e){const{insert:n,remove:r,patchProp:i,forcePatchProp:o,createElement:s,createText:a,createComment:u,setText:c,setElementText:p,parentNode:d,nextSibling:v,setScopeId:y=f,cloneNode:m,insertStaticContent:_}=t,w=(t,e,n,r=null,i=null,o=null,s=!1,a=!1)=>{t&&!Gn(t,e)&&(r=st(t),J(t,i,o,!0),t=null),-2===e.patchFlag&&(a=!1,e.dynamicChildren=null);const{type:u,ref:c,shapeFlag:h}=e;switch(u){case Mn:E(t,e,n,r);break;case Fn:I(t,e,n,r);break;case Vn:null==t&&T(e,n,r,s);break;case Ln:F(t,e,n,r,i,o,s,a);break;default:1&h?N(t,e,n,r,i,o,s,a):6&h?U(t,e,n,r,i,o,s,a):(64&h||128&h)&&u.process(t,e,n,r,i,o,s,a,ut)}null!=c&&i&&Nn(c,t&&t.ref,o,e)},E=(t,e,r,i)=>{if(null==t)n(e.el=a(e.children),r,i);else{const n=e.el=t.el;e.children!==t.children&&c(n,e.children)}},I=(t,e,r,i)=>{null==t?n(e.el=u(e.children||""),r,i):e.el=t.el},T=(t,e,n,r)=>{[t.el,t.anchor]=_(t.children,e,n,r)},S=({el:t,anchor:e},r,i)=>{let o;for(;t&&t!==e;)o=v(t),n(t,r,i),t=o;n(e,r,i)},C=({el:t,anchor:e})=>{let n;for(;t&&t!==e;)n=v(t),r(t),t=n;r(e)},N=(t,e,n,r,i,o,s,a)=>{s=s||"svg"===e.type,null==t?k(e,n,r,i,o,s,a):x(t,e,i,o,s,a)},k=(t,e,r,o,a,u,c)=>{let h,l;const{type:f,props:d,shapeFlag:v,transition:y,scopeId:g,patchFlag:_,dirs:b}=t;if(t.el&&void 0!==m&&-1===_)h=t.el=m(t.el);else{if(h=t.el=s(t.type,u,d&&d.is),8&v?p(h,t.children):16&v&&O(t.children,h,null,o,a,u&&"foreignObject"!==f,c||!!t.dynamicChildren),b&&bn(t,null,o,"created"),d){for(const e in d)R(e)||i(h,e,null,d[e],u,t.children,o,a,it);(l=d.onVnodeBeforeMount)&&kn(l,o,t)}P(h,g,t,o)}b&&bn(t,null,o,"beforeMount");const w=(!a||a&&!a.pendingBranch)&&y&&!y.persisted;w&&y.beforeEnter(h),n(h,e,r),((l=d&&d.onVnodeMounted)||w||b)&&Cn((()=>{l&&kn(l,o,t),w&&y.enter(h),b&&bn(t,null,o,"mounted")}),a)},P=(t,e,n,r)=>{if(e&&y(t,e),r){const i=r.type.__scopeId;i&&i!==e&&y(t,i+"-s"),n===r.subTree&&P(t,r.vnode.scopeId,r.vnode,r.parent)}},O=(t,e,n,r,i,o,s,a=0)=>{for(let u=a;u<t.length;u++){const a=t[u]=s?tr(t[u]):Zn(t[u]);w(null,a,e,n,r,i,o,s)}},x=(t,e,n,r,s,a)=>{const u=e.el=t.el;let{patchFlag:c,dynamicChildren:l,dirs:f}=e;c|=16&t.patchFlag;const d=t.props||h,v=e.props||h;let y;if((y=v.onVnodeBeforeUpdate)&&kn(y,n,e,t),f&&bn(e,t,n,"beforeUpdate"),c>0){if(16&c)L(u,e,d,v,n,r,s);else if(2&c&&d.class!==v.class&&i(u,"class",null,v.class,s),4&c&&i(u,"style",d.style,v.style,s),8&c){const a=e.dynamicProps;for(let e=0;e<a.length;e++){const c=a[e],h=d[c],l=v[c];(l!==h||o&&o(u,c))&&i(u,c,h,l,s,t.children,n,r,it)}}1&c&&t.children!==e.children&&p(u,e.children)}else a||null!=l||L(u,e,d,v,n,r,s);const g=s&&"foreignObject"!==e.type;l?D(t.dynamicChildren,l,u,n,r,g):a||z(t,e,u,null,n,r,g),((y=v.onVnodeUpdated)||f)&&Cn((()=>{y&&kn(y,n,e,t),f&&bn(e,t,n,"updated")}),r)},D=(t,e,n,r,i,o)=>{for(let s=0;s<e.length;s++){const a=t[s],u=e[s],c=a.type===Ln||!Gn(a,u)||6&a.shapeFlag||64&a.shapeFlag?d(a.el):n;w(a,u,c,null,r,i,o,!0)}},L=(t,e,n,r,s,a,u)=>{if(n!==r){for(const c in r){if(R(c))continue;const h=r[c],l=n[c];(h!==l||o&&o(t,c))&&i(t,c,l,h,u,e.children,s,a,it)}if(n!==h)for(const o in n)R(o)||o in r||i(t,o,n[o],null,u,e.children,s,a,it)}},F=(t,e,r,i,o,s,u,c)=>{const h=e.el=t?t.el:a(""),l=e.anchor=t?t.anchor:a("");let{patchFlag:f,dynamicChildren:p}=e;f>0&&(c=!0),null==t?(n(h,r,i),n(l,r,i),O(e.children,r,l,o,s,u,c)):f>0&&64&f&&p&&t.dynamicChildren?(D(t.dynamicChildren,p,r,o,s,u),(null!=e.key||o&&e===o.subTree)&&Pn(t,e,!0)):z(t,e,r,l,o,s,u,c)},U=(t,e,n,r,i,o,s,a)=>{null==t?512&e.shapeFlag?i.ctx.activate(e,n,r,s,a):j(e,n,r,i,o,s,a):q(t,e,a)},j=(t,e,n,r,i,o,s)=>{const a=t.component=function(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||gr,o={uid:mr++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,update:null,render:null,proxy:null,exposed:null,withProxy:null,effects:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:He(r,i),emitsOptions:Ae(r,i),emit:null,emitted:null,ctx:h,data:h,props:h,attrs:h,slots:h,refs:h,setupState:h,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=Ne.bind(null,o),o}(t,r,i);if(ln(t)&&(a.ctx.renderer=ut),function(t,e=!1){wr=e;const{props:n,children:r,shapeFlag:i}=t.vnode,o=4&i;qe(t,n,o,e),((t,e)=>{if(32&t.vnode.shapeFlag){const n=e._;n?(t.slots=e,W(e,"_",n)):gn(e,t.slots={})}else t.slots={},e&&mn(t,e);W(t.slots,zn,1)})(t,r);const s=o?function(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,vr);const{setup:r}=n;if(r){const n=t.setupContext=r.length>1?function(t){const e=e=>{t.exposed=te(e)};return{attrs:t.attrs,slots:t.slots,emit:t.emit,expose:e}}(t):null;_r=t,nt();const i=re(r,t,0,[t.props,n]);if(rt(),_r=null,A(i)){if(e)return i.then((e=>{Er(t,e)}));t.asyncDep=i}else Er(t,i)}else Ir(t)}(t,e):void 0;wr=!1}(a),a.asyncDep){if(i&&i.registerDep(a,H),!t.el){const t=a.subTree=Yn(Fn);I(null,t,e,n)}}else H(a,t,e,n,i,o,s)},q=(t,e,n)=>{const r=e.component=t.component;if(function(t,e,n){const{props:r,children:i,component:o}=t,{props:s,children:a,patchFlag:u}=e,c=o.emitsOptions;if(e.dirs||e.transition)return!0;if(!(n&&u>=0))return!(!i&&!a||a&&a.$stable)||r!==s&&(r?!s||Me(r,s,c):!!s);if(1024&u)return!0;if(16&u)return r?Me(r,s,c):!!s;if(8&u){const t=e.dynamicProps;for(let e=0;e<t.length;e++){const n=t[e];if(s[n]!==r[n]&&!ke(c,n))return!0}}return!1}(t,e,n)){if(r.asyncDep&&!r.asyncResolved)return void G(r,e,n);r.next=e,function(t){const e=ue.indexOf(t);e>-1&&ue.splice(e,1)}(r.update),r.update()}else e.component=t.component,e.el=t.el,r.vnode=e},H=(t,e,n,r,i,o,s)=>{t.update=X((function(){if(t.isMounted){let e,{next:n,bu:r,u:a,parent:u,vnode:c}=t,h=n;n?(n.el=c.el,G(t,n,s)):n=c,r&&B(r),(e=n.props&&n.props.onVnodeBeforeUpdate)&&kn(e,u,n,c);const l=xe(t),f=t.subTree;t.subTree=l,w(f,l,d(f.el),st(f),t,i,o),n.el=l.el,null===h&&function({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}(t,l.el),a&&Cn(a,i),(e=n.props&&n.props.onVnodeUpdated)&&Cn((()=>{kn(e,u,n,c)}),i)}else{let s;const{el:a,props:u}=e,{bm:c,m:h,parent:l}=t;c&&B(c),(s=u&&u.onVnodeBeforeMount)&&kn(s,l,e);const f=t.subTree=xe(t);if(a&&ht?ht(e.el,f,t,i):(w(null,f,n,r,t,i,o),e.el=f.el),h&&Cn(h,i),s=u&&u.onVnodeMounted){const t=e;Cn((()=>{kn(s,l,t)}),i)}const{a:p}=t;p&&256&e.shapeFlag&&Cn(p,i),t.isMounted=!0,e=n=r=null}}),Sn)},G=(t,e,n)=>{e.component=t;const r=t.vnode.props;t.vnode=e,t.next=null,function(t,e,n,r){const{props:i,attrs:o,vnode:{patchFlag:s}}=t,a=Qt(i),[u]=t.propsOptions;if(!(r||s>0)||16&s){let r;Be(t,e,i,o);for(const o in a)e&&(b(e,o)||(r=V(o))!==o&&b(e,r))||(u?!n||void 0===n[o]&&void 0===n[r]||(i[o]=We(u,e||h,o,void 0,t)):delete i[o]);if(o!==a)for(const t in o)e&&b(e,t)||delete o[t]}else if(8&s){const n=t.vnode.dynamicProps;for(let r=0;r<n.length;r++){const s=n[r],c=e[s];if(u)if(b(o,s))o[s]=c;else{const e=M(s);i[e]=We(u,a,e,c,t)}else o[s]=c}}ot(t,"set","$attrs")}(t,e.props,r,n),((t,e)=>{const{vnode:n,slots:r}=t;let i=!0,o=h;if(32&n.shapeFlag){const t=e._;t?1===t?i=!1:g(r,e):(i=!e.$stable,gn(e,r)),o=e}else e&&(mn(t,e),o={default:1});if(i)for(const s in r)dn(s)||s in o||delete r[s]})(t,e.children),Ie(void 0,t.update)},z=(t,e,n,r,i,o,s,a=!1)=>{const u=t&&t.children,c=t?t.shapeFlag:0,h=e.children,{patchFlag:l,shapeFlag:f}=e;if(l>0){if(128&l)return void K(u,h,n,r,i,o,s,a);if(256&l)return void Q(u,h,n,r,i,o,s,a)}8&f?(16&c&&it(u,i,o),h!==u&&p(n,h)):16&c?16&f?K(u,h,n,r,i,o,s,a):it(u,i,o,!0):(8&c&&p(n,""),16&f&&O(h,n,r,i,o,s,a))},Q=(t,e,n,r,i,o,s,a)=>{e=e||l;const u=(t=t||l).length,c=e.length,h=Math.min(u,c);let f;for(f=0;f<h;f++){const r=e[f]=a?tr(e[f]):Zn(e[f]);w(t[f],r,n,null,i,o,s,a)}u>c?it(t,i,o,!0,!1,h):O(e,n,r,i,o,s,a,h)},K=(t,e,n,r,i,o,s,a)=>{let u=0;const c=e.length;let h=t.length-1,f=c-1;for(;u<=h&&u<=f;){const r=t[u],c=e[u]=a?tr(e[u]):Zn(e[u]);if(!Gn(r,c))break;w(r,c,n,null,i,o,s,a),u++}for(;u<=h&&u<=f;){const r=t[h],u=e[f]=a?tr(e[f]):Zn(e[f]);if(!Gn(r,u))break;w(r,u,n,null,i,o,s,a),h--,f--}if(u>h){if(u<=f){const t=f+1,h=t<c?e[t].el:r;for(;u<=f;)w(null,e[u]=a?tr(e[u]):Zn(e[u]),n,h,i,o,s),u++}}else if(u>f)for(;u<=h;)J(t[u],i,o,!0),u++;else{const p=u,d=u,v=new Map;for(u=d;u<=f;u++){const t=e[u]=a?tr(e[u]):Zn(e[u]);null!=t.key&&v.set(t.key,u)}let y,g=0;const m=f-d+1;let _=!1,b=0;const E=new Array(m);for(u=0;u<m;u++)E[u]=0;for(u=p;u<=h;u++){const r=t[u];if(g>=m){J(r,i,o,!0);continue}let c;if(null!=r.key)c=v.get(r.key);else for(y=d;y<=f;y++)if(0===E[y-d]&&Gn(r,e[y])){c=y;break}void 0===c?J(r,i,o,!0):(E[c-d]=u+1,c>=b?b=c:_=!0,w(r,e[c],n,null,i,o,s,a),g++)}const I=_?function(t){const e=t.slice(),n=[0];let r,i,o,s,a;const u=t.length;for(r=0;r<u;r++){const u=t[r];if(0!==u){if(i=n[n.length-1],t[i]<u){e[r]=i,n.push(r);continue}for(o=0,s=n.length-1;o<s;)a=(o+s)/2|0,t[n[a]]<u?o=a+1:s=a;u<t[n[o]]&&(o>0&&(e[r]=n[o-1]),n[o]=r)}}o=n.length,s=n[o-1];for(;o-- >0;)n[o]=s,s=e[s];return n}(E):l;for(y=I.length-1,u=m-1;u>=0;u--){const t=d+u,a=e[t],h=t+1<c?e[t+1].el:r;0===E[u]?w(null,a,n,h,i,o,s):_&&(y<0||u!==I[y]?Y(a,n,h,2):y--)}}},Y=(t,e,r,i,o=null)=>{const{el:s,type:a,transition:u,children:c,shapeFlag:h}=t;if(6&h)return void Y(t.component.subTree,e,r,i);if(128&h)return void t.suspense.move(e,r,i);if(64&h)return void a.move(t,e,r,ut);if(a===Ln){n(s,e,r);for(let t=0;t<c.length;t++)Y(c[t],e,r,i);return void n(t.anchor,e,r)}if(a===Vn)return void S(t,e,r);if(2!==i&&1&h&&u)if(0===i)u.beforeEnter(s),n(s,e,r),Cn((()=>u.enter(s)),o);else{const{leave:t,delayLeave:i,afterLeave:o}=u,a=()=>n(s,e,r),c=()=>{t(s,(()=>{a(),o&&o()}))};i?i(s,a,c):c()}else n(s,e,r)},J=(t,e,n,r=!1,i=!1)=>{const{type:o,props:s,ref:a,children:u,dynamicChildren:c,shapeFlag:h,patchFlag:l,dirs:f}=t;if(null!=a&&Nn(a,null,n,null),256&h)return void e.ctx.deactivate(t);const p=1&h&&f;let d;if((d=s&&s.onVnodeBeforeUnmount)&&kn(d,e,t),6&h)et(t.component,n,r);else{if(128&h)return void t.suspense.unmount(n,r);p&&bn(t,null,e,"beforeUnmount"),c&&(o!==Ln||l>0&&64&l)?it(c,e,n,!1,!0):(o===Ln&&(128&l||256&l)||!i&&16&h)&&it(u,e,n),64&h&&(r||!On(t.props))&&t.type.remove(t,ut),r&&Z(t)}((d=s&&s.onVnodeUnmounted)||p)&&Cn((()=>{d&&kn(d,e,t),p&&bn(t,null,e,"unmounted")}),n)},Z=t=>{const{type:e,el:n,anchor:i,transition:o}=t;if(e===Ln)return void tt(n,i);if(e===Vn)return void C(t);const s=()=>{r(n),o&&!o.persisted&&o.afterLeave&&o.afterLeave()};if(1&t.shapeFlag&&o&&!o.persisted){const{leave:e,delayLeave:r}=o,i=()=>e(n,s);r?r(t.el,s,i):i()}else s()},tt=(t,e)=>{let n;for(;t!==e;)n=v(t),r(t),t=n;r(e)},et=(t,e,n)=>{const{bum:r,effects:i,update:o,subTree:s,um:a}=t;if(r&&B(r),i)for(let u=0;u<i.length;u++)$(i[u]);o&&($(o),J(s,t,e,n)),a&&Cn(a,e),Cn((()=>{t.isUnmounted=!0}),e),e&&e.pendingBranch&&!e.isUnmounted&&t.asyncDep&&!t.asyncResolved&&t.suspenseId===e.pendingId&&(e.deps--,0===e.deps&&e.resolve())},it=(t,e,n,r=!1,i=!1,o=0)=>{for(let s=o;s<t.length;s++)J(t[s],e,n,r,i)},st=t=>6&t.shapeFlag?st(t.component.subTree):128&t.shapeFlag?t.suspense.next():v(t.anchor||t.el),at=(t,e)=>{null==t?e._vnode&&J(e._vnode,null,null,!0):w(e._vnode||null,t,e),Te(),e._vnode=t},ut={p:w,um:J,m:Y,r:Z,mt:j,mc:O,pc:z,pbc:D,n:st,o:t};let ct,ht;e&&([ct,ht]=e(ut));return{render:at,hydrate:ct,createApp:In(at,ct)}}(t)}function kn(t,e,n,r=null){ie(t,e,7,[n,r])}function Pn(t,e,n=!1){const r=t.children,i=e.children;if(w(r)&&w(i))for(let o=0;o<r.length;o++){const t=r[o];let e=i[o];1&e.shapeFlag&&!e.dynamicChildren&&((e.patchFlag<=0||32===e.patchFlag)&&(e=i[o]=tr(i[o]),e.el=t.el),n||Pn(t,e))}}const On=t=>t&&(t.disabled||""===t.disabled);function xn(t){return function(t,e,n=!0){const r=Pe||_r;if(r){const n=r.type;if("components"===t){if("_self"===e)return n;const t=Sr(n);if(t&&(t===e||t===M(e)||t===U(M(e))))return n}return Dn(r[t]||n[t],e)||Dn(r.appContext[t],e)}}("components",t)||t}const Rn=Symbol();function Dn(t,e){return t&&(t[e]||t[M(e)]||t[U(M(e))])}const Ln=Symbol(void 0),Mn=Symbol(void 0),Fn=Symbol(void 0),Vn=Symbol(void 0),Un=[];let jn=null;function qn(t=!1){Un.push(jn=t?null:[])}function Bn(){Un.pop(),jn=Un[Un.length-1]||null}function Wn(t,e,n,r,i){const o=Yn(t,e,n,r,i,!0);return o.dynamicChildren=jn||l,Bn(),jn&&jn.push(o),o}function Hn(t){return!!t&&!0===t.__v_isVNode}function Gn(t,e){return t.type===e.type&&t.key===e.key}const zn="__vInternal",Qn=({key:t})=>null!=t?t:null,Kn=({ref:t})=>null!=t?S(t)||Yt(t)||T(t)?{i:Pe,r:t}:t:null,Yn=function(t,e=null,n=null,i=0,o=null,s=!1){t&&t!==Rn||(t=Fn);if(Hn(t)){const r=Xn(t,e,!0);return n&&er(r,n),r}u=t,T(u)&&"__vccOpts"in u&&(t=t.__vccOpts);var u;if(e){(zt(e)||zn in e)&&(e=g({},e));let{class:t,style:n}=e;t&&!S(t)&&(e.class=a(t)),N(n)&&(zt(n)&&!w(n)&&(n=g({},n)),e.style=r(n))}const c=S(t)?1:(t=>t.__isSuspense)(t)?128:(t=>t.__isTeleport)(t)?64:N(t)?4:T(t)?2:0,h={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Qn(e),ref:e&&Kn(e),scopeId:null,children:null,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:c,patchFlag:i,dynamicProps:o,dynamicChildren:null,appContext:null};if(er(h,n),128&c){const{content:t,fallback:e}=function(t){const{shapeFlag:e,children:n}=t;let r,i;return 32&e?(r=Fe(n.default),i=Fe(n.fallback)):(r=Fe(n),i=Zn(null)),{content:r,fallback:i}}(h);h.ssContent=t,h.ssFallback=e}!s&&jn&&(i>0||6&c)&&32!==i&&jn.push(h);return h};function Xn(t,e,n=!1){const{props:i,ref:o,patchFlag:s}=t,u=e?function(...t){const e=g({},t[0]);for(let n=1;n<t.length;n++){const i=t[n];for(const t in i)if("class"===t)e.class!==i.class&&(e.class=a([e.class,i.class]));else if("style"===t)e.style=r([e.style,i.style]);else if(v(t)){const n=e[t],r=i[t];n!==r&&(e[t]=n?[].concat(n,i[t]):r)}else""!==t&&(e[t]=i[t])}return e}(i||{},e):i;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&Qn(u),ref:e&&e.ref?n&&o?w(o)?o.concat(Kn(e)):[o,Kn(e)]:Kn(e):o,scopeId:t.scopeId,children:t.children,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ln?-1===s?16:16|s:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Xn(t.ssContent),ssFallback:t.ssFallback&&Xn(t.ssFallback),el:t.el,anchor:t.anchor}}function $n(t=" ",e=0){return Yn(Mn,null,t,e)}function Jn(t="",e=!1){return e?(qn(),Wn(Fn,null,t)):Yn(Fn,null,t)}function Zn(t){return null==t||"boolean"==typeof t?Yn(Fn):w(t)?Yn(Ln,null,t):"object"==typeof t?null===t.el?t:Xn(t):Yn(Mn,null,String(t))}function tr(t){return null===t.el?t:Xn(t)}function er(t,e){let n=0;const{shapeFlag:r}=t;if(null==e)e=null;else if(w(e))n=16;else if("object"==typeof e){if(1&r||64&r){const n=e.default;return void(n&&(n._c&&Ue(1),er(t,n()),n._c&&Ue(-1)))}{n=32;const r=e._;r||zn in e?3===r&&Pe&&(1024&Pe.vnode.patchFlag?(e._=2,t.patchFlag|=1024):e._=1):e._ctx=Pe}}else T(e)?(e={default:e,_ctx:Pe},n=32):(e=String(e),64&r?(n=16,e=[$n(e)]):n=8);t.children=e,t.shapeFlag|=n}function nr(t,e){if(_r){let n=_r.provides;const r=_r.parent&&_r.parent.provides;r===n&&(n=_r.provides=Object.create(r)),n[t]=e}else;}function rr(t,e,n=!1){const r=_r||Pe;if(r){const i=null==r.parent?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(i&&t in i)return i[t];if(arguments.length>1)return n&&T(e)?e():e}}let ir=!1;function or(t,e,n=[],r=[],i=[],o=!1){const{mixins:s,extends:a,data:u,computed:c,methods:l,watch:p,provide:d,inject:v,components:y,directives:m,beforeMount:_,mounted:b,beforeUpdate:E,updated:I,activated:S,deactivated:C,beforeDestroy:A,beforeUnmount:k,destroyed:P,unmounted:O,render:x,renderTracked:R,renderTriggered:D,errorCaptured:L,expose:M}=e,F=t.proxy,V=t.ctx,U=t.appContext.mixins;if(o&&x&&t.render===f&&(t.render=x),o||(ir=!0,sr("beforeCreate","bc",e,t,U),ir=!1,cr(t,U,n,r,i)),a&&or(t,a,n,r,i,!0),s&&cr(t,s,n,r,i),v)if(w(v))for(let h=0;h<v.length;h++){const t=v[h];V[t]=rr(t)}else for(const h in v){const t=v[h];N(t)?V[h]=rr(t.from||h,t.default,!0):V[h]=rr(t)}if(l)for(const h in l){const t=l[h];T(t)&&(V[h]=t.bind(F))}if(o?u&&n.push(u):(n.length&&n.forEach((e=>hr(t,e,F))),u&&hr(t,u,F)),c)for(const h in c){const t=c[h],e=Cr({get:T(t)?t.bind(F,F):T(t.get)?t.get.bind(F,F):f,set:!T(t)&&T(t.set)?t.set.bind(F):f});Object.defineProperty(V,h,{enumerable:!0,configurable:!0,get:()=>e.value,set:t=>e.value=t})}var j;if(p&&r.push(p),!o&&r.length&&r.forEach((t=>{for(const e in t)lr(t[e],V,F,e)})),d&&i.push(d),!o&&i.length&&i.forEach((t=>{const e=T(t)?t.call(F):t;Reflect.ownKeys(e).forEach((t=>{nr(t,e[t])}))})),o&&(y&&g(t.components||(t.components=g({},t.type.components)),y),m&&g(t.directives||(t.directives=g({},t.type.directives)),m)),o||sr("created","c",e,t,U),_&&$e(_.bind(F)),b&&Je(b.bind(F)),E&&Ze(E.bind(F)),I&&tn(I.bind(F)),S&&fn(S.bind(F),"a",j),C&&function(t,e){fn(t,"da",e)}(C.bind(F)),L&&((t,e=_r)=>{Ye("ec",t,e)})(L.bind(F)),R&&on(R.bind(F)),D&&rn(D.bind(F)),k&&en(k.bind(F)),O&&nn(O.bind(F)),w(M)&&!o)if(M.length){const e=t.exposed||(t.exposed=te({}));M.forEach((t=>{e[t]=function(t,e){return Yt(t[e])?t[e]:new ee(t,e)}(F,t)}))}else t.exposed||(t.exposed=h)}function sr(t,e,n,r,i){ur(t,e,i,r);const{extends:o,mixins:s}=n;o&&ar(t,e,o,r),s&&ur(t,e,s,r);const a=n[t];a&&ie(a.bind(r.proxy),r,e)}function ar(t,e,n,r){n.extends&&ar(t,e,n.extends,r);const i=n[t];i&&ie(i.bind(r.proxy),r,e)}function ur(t,e,n,r){for(let i=0;i<n.length;i++){const o=n[i].mixins;o&&ur(t,e,o,r);const s=n[i][t];s&&ie(s.bind(r.proxy),r,e)}}function cr(t,e,n,r,i){for(let o=0;o<e.length;o++)or(t,e[o],n,r,i,!0)}function hr(t,e,n){const r=e.call(n,n);N(r)&&(t.data===h?t.data=qt(r):g(t.data,r))}function lr(t,e,n,r){const i=r.includes(".")?function(t,e){const n=e.split(".");return()=>{let e=t;for(let t=0;t<n.length&&e;t++)e=e[n[t]];return e}}(n,r):()=>n[r];if(S(t)){const n=e[t];T(n)&&an(i,n)}else if(T(t))an(i,t.bind(n));else if(N(t))if(w(t))t.forEach((t=>lr(t,e,n,r)));else{const r=T(t.handler)?t.handler.bind(n):e[t.handler];T(r)&&an(i,r,t)}}function fr(t,e,n){const r=n.appContext.config.optionMergeStrategies,{mixins:i,extends:o}=e;o&&fr(t,o,n),i&&i.forEach((e=>fr(t,e,n)));for(const s in e)r&&b(r,s)?t[s]=r[s](t[s],e[s],n.proxy,s):t[s]=e[s]}const pr=t=>t&&(t.proxy?t.proxy:pr(t.parent)),dr=g(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>pr(t.parent),$root:t=>t.root&&t.root.proxy,$emit:t=>t.emit,$options:t=>function(t){const e=t.type,{__merged:n,mixins:r,extends:i}=e;if(n)return n;const o=t.appContext.mixins;if(!o.length&&!r&&!i)return e;const s={};return o.forEach((e=>fr(s,e,t))),fr(s,e,t),e.__merged=s}(t),$forceUpdate:t=>()=>be(t.update),$nextTick:t=>_e.bind(t.proxy),$watch:t=>cn.bind(t)}),vr={get({_:t},e){const{ctx:n,setupState:r,data:i,props:o,accessCache:s,type:a,appContext:u}=t;if("__v_skip"===e)return!0;let c;if("$"!==e[0]){const a=s[e];if(void 0!==a)switch(a){case 0:return r[e];case 1:return i[e];case 3:return n[e];case 2:return o[e]}else{if(r!==h&&b(r,e))return s[e]=0,r[e];if(i!==h&&b(i,e))return s[e]=1,i[e];if((c=t.propsOptions[0])&&b(c,e))return s[e]=2,o[e];if(n!==h&&b(n,e))return s[e]=3,n[e];ir||(s[e]=4)}}const l=dr[e];let f,p;return l?("$attrs"===e&&it(t,0,e),l(t)):(f=a.__cssModules)&&(f=f[e])?f:n!==h&&b(n,e)?(s[e]=3,n[e]):(p=u.config.globalProperties,b(p,e)?p[e]:void 0)},set({_:t},e,n){const{data:r,setupState:i,ctx:o}=t;if(i!==h&&b(i,e))i[e]=n;else if(r!==h&&b(r,e))r[e]=n;else if(e in t.props)return!1;return("$"!==e[0]||!(e.slice(1)in t))&&(o[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:o}},s){let a;return void 0!==n[s]||t!==h&&b(t,s)||e!==h&&b(e,s)||(a=o[0])&&b(a,s)||b(r,s)||b(dr,s)||b(i.config.globalProperties,s)}},yr=g({},vr,{get(t,e){if(e!==Symbol.unscopables)return vr.get(t,e,t)},has:(t,n)=>"_"!==n[0]&&!e(n)}),gr=wn();let mr=0;let _r=null;const br=t=>{_r=t};let wr=!1;function Er(t,e,n){T(e)?t.render=e:N(e)&&(t.setupState=te(e)),Ir(t)}function Ir(t,e){const n=t.type;t.render||(t.render=n.render||f,t.render._rc&&(t.withProxy=new Proxy(t.ctx,yr))),_r=t,nt(),or(t,n),rt(),_r=null}function Tr(t,e=_r){e&&(e.effects||(e.effects=[])).push(t)}function Sr(t){return T(t)&&t.displayName||t.name}function Cr(t){const e=function(t){let e,n;return T(t)?(e=t,n=f):(e=t.get,n=t.set),new ne(e,n,T(t)||!t.set)}(t);return Tr(e.effect),e}function Nr(t,e,n){const r=arguments.length;return 2===r?N(e)&&!w(e)?Hn(e)?Yn(t,null,[e]):Yn(t,e):Yn(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):3===r&&Hn(n)&&(n=[n]),Yn(t,e,n))}function Ar(t,e){let n;if(w(t)||S(t)){n=new Array(t.length);for(let r=0,i=t.length;r<i;r++)n[r]=e(t[r],r)}else if("number"==typeof t){n=new Array(t);for(let r=0;r<t;r++)n[r]=e(r+1,r)}else if(N(t))if(t[Symbol.iterator])n=Array.from(t,e);else{const r=Object.keys(t);n=new Array(r.length);for(let i=0,o=r.length;i<o;i++){const o=r[i];n[i]=e(t[o],o,i)}}else n=[];return n}const kr="3.0.5",Pr="http://www.w3.org/2000/svg",Or="undefined"!=typeof document?document:null;let xr,Rr;const Dr={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n)=>e?Or.createElementNS(Pr,t):Or.createElement(t,n?{is:n}:void 0),createText:t=>Or.createTextNode(t),createComment:t=>Or.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Or.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},cloneNode:t=>t.cloneNode(!0),insertStaticContent(t,e,n,r){const i=r?Rr||(Rr=Or.createElementNS(Pr,"svg")):xr||(xr=Or.createElement("div"));i.innerHTML=t;const o=i.firstChild;let s=o,a=s;for(;s;)a=s,Dr.insert(s,e,n),s=i.firstChild;return[o,a]}};const Lr=/\s*!important$/;function Mr(t,e,n){if(w(n))n.forEach((n=>Mr(t,e,n)));else if(e.startsWith("--"))t.setProperty(e,n);else{const r=function(t,e){const n=Vr[e];if(n)return n;let r=M(e);if("filter"!==r&&r in t)return Vr[e]=r;r=U(r);for(let i=0;i<Fr.length;i++){const n=Fr[i]+r;if(n in t)return Vr[e]=n}return e}(t,e);Lr.test(n)?t.setProperty(V(r),n.replace(Lr,""),"important"):t[r]=n}}const Fr=["Webkit","Moz","ms"],Vr={};const Ur="http://www.w3.org/1999/xlink";let jr=Date.now;"undefined"!=typeof document&&jr()>document.createEvent("Event").timeStamp&&(jr=()=>performance.now());let qr=0;const Br=Promise.resolve(),Wr=()=>{qr=0};function Hr(t,e,n,r){t.addEventListener(e,n,r)}function Gr(t,e,n,r,i=null){const o=t._vei||(t._vei={}),s=o[e];if(r&&s)s.value=r;else{const[n,a]=function(t){let e;if(zr.test(t)){let n;for(e={};n=t.match(zr);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t.slice(2).toLowerCase(),e]}(e);if(r){Hr(t,n,o[e]=function(t,e){const n=t=>{(t.timeStamp||jr())>=n.attached-1&&ie(function(t,e){if(w(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map((t=>e=>!e._stopped&&t(e)))}return e}(t,n.value),e,5,[t])};return n.value=t,n.attached=(()=>qr||(Br.then(Wr),qr=jr()))(),n}(r,i),a)}else s&&(!function(t,e,n,r){t.removeEventListener(e,n,r)}(t,n,s,a),o[e]=void 0)}}const zr=/(?:Once|Passive|Capture)$/;const Qr=/^on[a-z]/;const Kr=t=>{const e=t.props["onUpdate:modelValue"];return w(e)?t=>B(e,t):e};function Yr(t){t.target.composing=!0}function Xr(t){const e=t.target;e.composing&&(e.composing=!1,function(t,e){const n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)}(e,"input"))}const $r={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t._assign=Kr(i);const o=r||"number"===t.type;Hr(t,e?"change":"input",(e=>{if(e.target.composing)return;let r=t.value;n?r=r.trim():o&&(r=H(r)),t._assign(r)})),n&&Hr(t,"change",(()=>{t.value=t.value.trim()})),e||(Hr(t,"compositionstart",Yr),Hr(t,"compositionend",Xr),Hr(t,"change",Xr))},mounted(t,{value:e}){t.value=null==e?"":e},beforeUpdate(t,{value:e,modifiers:{trim:n,number:r}},i){if(t._assign=Kr(i),t.composing)return;if(document.activeElement===t){if(n&&t.value.trim()===e)return;if((r||"number"===t.type)&&H(t.value)===e)return}const o=null==e?"":e;t.value!==o&&(t.value=o)}},Jr={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Zr=(t,e)=>n=>{if(!("key"in n))return;const r=V(n.key);return e.some((t=>t===r||Jr[t]===r))?t(n):void 0},ti=g({patchProp:(t,e,r,i,o=!1,s,a,u,c)=>{switch(e){case"class":!function(t,e,n){if(null==e&&(e=""),n)t.setAttribute("class",e);else{const n=t._vtc;n&&(e=(e?[e,...n]:[...n]).join(" ")),t.className=e}}(t,i,o);break;case"style":!function(t,e,n){const r=t.style;if(n)if(S(n))e!==n&&(r.cssText=n);else{for(const t in n)Mr(r,t,n[t]);if(e&&!S(e))for(const t in e)null==n[t]&&Mr(r,t,"")}else t.removeAttribute("style")}(t,r,i);break;default:v(e)?y(e)||Gr(t,e,0,i,a):function(t,e,n,r){if(r)return"innerHTML"===e||!!(e in t&&Qr.test(e)&&T(n));if("spellcheck"===e||"draggable"===e)return!1;if("form"===e&&"string"==typeof n)return!1;if("list"===e&&"INPUT"===t.tagName)return!1;if(Qr.test(e)&&S(n))return!1;return e in t}(t,e,i,o)?function(t,e,n,r,i,o,s){if("innerHTML"===e||"textContent"===e)return r&&s(r,i,o),void(t[e]=null==n?"":n);if("value"!==e||"PROGRESS"===t.tagName){if(""===n||null==n){const r=typeof t[e];if(""===n&&"boolean"===r)return void(t[e]=!0);if(null==n&&"string"===r)return t[e]="",void t.removeAttribute(e);if("number"===r)return t[e]=0,void t.removeAttribute(e)}try{t[e]=n}catch(uI){}}else{t._value=n;const e=null==n?"":n;t.value!==e&&(t.value=e)}}(t,e,i,s,a,u,c):("true-value"===e?t._trueValue=i:"false-value"===e&&(t._falseValue=i),function(t,e,r,i){if(i&&e.startsWith("xlink:"))null==r?t.removeAttributeNS(Ur,e.slice(6,e.length)):t.setAttributeNS(Ur,e,r);else{const i=n(e);null==r||i&&!1===r?t.removeAttribute(e):t.setAttribute(e,i?"":r)}}(t,e,i,o))}},forcePatchProp:(t,e)=>"value"===e},Dr);let ei;const ni=(...t)=>{const e=(ei||(ei=An(ti))).createApp(...t),{mount:n}=e;return e.mount=t=>{const r=function(t){if(S(t)){return document.querySelector(t)}return t}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(t);if(!r)return;const i=e._component;T(i)||i.render||i.template||(i.template=r.innerHTML),r.innerHTML="";const o=n(r);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};var ri=function(t,e){return(ri=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function ii(t,e){function n(){this.constructor=t}ri(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var oi=function(){return(oi=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function si(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(uI){o(uI)}}function a(t){try{u(r.throw(t))}catch(uI){o(uI)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function ai(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(uI){o=[6,uI],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function ui(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ci(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function hi(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(ci(arguments[e]));return t}function li(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fi=!1,pi="${JSCORE_VERSION}",di=function(t,e){if(!t)throw vi(e)},vi=function(t){return new Error("Firebase Database ("+pi+") INTERNAL ASSERT FAILED: "+t)},yi=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},gi={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,l=(3&o)<<4|a>>4,f=(15&a)<<2|c>>6,p=63&c;u||(p=64,s||(f=64)),r.push(n[h],n[l],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(yi(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();var c=o<<2|s>>4;if(r.push(c),64!==a){var h=s<<4&240|a>>2;if(r.push(h),64!==u){var l=a<<6&192|u;r.push(l)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},mi=function(t){try{return gi.decodeString(t,!0)}catch(uI){console.error("base64Decode failed: ",uI)}return null};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function _i(t){return bi(void 0,t)}function bi(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=bi(t[n],e[n]));return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var wi=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ei(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ii(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ei())}function Ti(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(uI){return!1}}function Si(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ci(){return!0===fi}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ni=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,Ai.prototype.create),o}return ii(e,t),e}(Error),Ai=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?ki(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new Ni(i,a,r);return u},t}();function ki(t,e){return t.replace(Pi,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var Pi=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oi(t){return JSON.parse(t)}function xi(t){return JSON.stringify(t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ri=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=Oi(mi(o[0])||""),n=Oi(mi(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(uI){}return{header:e,claims:n,data:r,signature:i}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Di(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Li(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function Mi(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Fi(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Vi=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=h^u&(c^h),s=1518500249):(o=u^c^h,s=1859775393):r<60?(o=u&c|h&(u|c),s=2400959708):(o=u^c^h,s=3395469782);i=(a<<5|a>>>27)+o+l+s+n[r]&4294967295;l=h,h=c,c=4294967295&(u<<30|u>>>2),u=a,a=i}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function Ui(t,e){var n=new ji(t,e);return n.subscribe.bind(n)}var ji=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=qi),void 0===r.error&&(r.error=qi),void 0===r.complete&&(r.complete=qi);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(uI){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(uI){"undefined"!=typeof console&&console.error&&console.error(uI)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function qi(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bi=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function Wi(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=t+" failed: ";return i+=r+" argument "}function Hi(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(Wi(t,e,r)+"must be a valid function.")}function Gi(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(Wi(t,e,r)+"must be a valid context object.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zi=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},Qi=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),Ki=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new wi;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(uI){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=oi({identifier:"[DEFAULT]",optional:!1},t),n=e.identifier,r=e.optional,i=this.normalizeInstanceIdentifier(n);try{var o=this.getOrInitializeService(i);if(!o){if(r)return null;throw Error("Service "+this.name+" is not available")}return o}catch(uI){if(r)return null;throw uI}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t))try{this.getOrInitializeService("[DEFAULT]")}catch(uI){}try{for(var r=ui(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=ci(i.value,2),s=o[0],a=o[1],u=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService(u);a.resolve(c)}catch(uI){}}}catch(h){e={error:h}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return si(this,void 0,void 0,(function(){var t;return ai(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(hi(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})),t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()}))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return"[DEFAULT]"===t?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t}();var Yi,Xi=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new Ki(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function $i(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ji,Zi,to=[];(Zi=Ji||(Ji={}))[Zi.DEBUG=0]="DEBUG",Zi[Zi.VERBOSE=1]="VERBOSE",Zi[Zi.INFO=2]="INFO",Zi[Zi.WARN=3]="WARN",Zi[Zi.ERROR=4]="ERROR",Zi[Zi.SILENT=5]="SILENT";var eo,no={debug:Ji.DEBUG,verbose:Ji.VERBOSE,info:Ji.INFO,warn:Ji.WARN,error:Ji.ERROR,silent:Ji.SILENT},ro=Ji.INFO,io=((Yi={})[Ji.DEBUG]="log",Yi[Ji.VERBOSE]="log",Yi[Ji.INFO]="info",Yi[Ji.WARN]="warn",Yi[Ji.ERROR]="error",Yi),oo=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=io[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,$i(["["+i+"]  "+t.name+":"],n))}},so=function(){function t(t){this.name=t,this._logLevel=ro,this._logHandler=oo,this._userLogHandler=null,to.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in Ji))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?no[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,$i([this,Ji.DEBUG],t)),this._logHandler.apply(this,$i([this,Ji.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,$i([this,Ji.VERBOSE],t)),this._logHandler.apply(this,$i([this,Ji.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,$i([this,Ji.INFO],t)),this._logHandler.apply(this,$i([this,Ji.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,$i([this,Ji.WARN],t)),this._logHandler.apply(this,$i([this,Ji.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,$i([this,Ji.ERROR],t)),this._logHandler.apply(this,$i([this,Ji.ERROR],t))},t}();function ao(t){to.forEach((function(e){e.setLogLevel(t)}))}var uo,co=((eo={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",eo["bad-app-name"]="Illegal App name: '{$appName}",eo["duplicate-app"]="Firebase App named '{$appName}' already exists",eo["app-deleted"]="Firebase App named '{$appName}' already deleted",eo["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",eo["invalid-log-argument"]="First argument to `onLog` must be null or a function.",eo),ho=new Ai("app","Firebase",co),lo=((uo={})["@firebase/app"]="fire-core",uo["@firebase/analytics"]="fire-analytics",uo["@firebase/auth"]="fire-auth",uo["@firebase/database"]="fire-rtdb",uo["@firebase/functions"]="fire-fn",uo["@firebase/installations"]="fire-iid",uo["@firebase/messaging"]="fire-fcm",uo["@firebase/performance"]="fire-perf",uo["@firebase/remote-config"]="fire-rc",uo["@firebase/storage"]="fire-gcs",uo["@firebase/firestore"]="fire-fst",uo["fire-js"]="fire-js",uo["firebase-wrapper"]="fire-js-all",uo),fo=new so("@firebase/app"),po=function(){function t(t,e,n){var r,i,o=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=_i(t),this.container=new Xi(e.name),this._addComponent(new Qi("app",(function(){return o}),"PUBLIC"));try{for(var s=ui(this.firebase_.INTERNAL.components.values()),a=s.next();!a.done;a=s.next()){var u=a.value;this._addComponent(u)}}catch(c){r={error:c}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(uI){fo.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,uI)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw ho.create("app-deleted",{appName:this.name_})},t}();po.prototype.name&&po.prototype.options||po.prototype.delete||console.log("dc");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function vo(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name="[DEFAULT]");var s=o.name;if("string"!=typeof s||!s)throw ho.create("bad-app-name",{appName:String(s)});if(Di(e,s))throw ho.create("duplicate-app",{appName:s});var a=new t(n,o,r);return e[s]=a,a},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=lo[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&a&&u.push("and"),a&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void fo.warn(u.join(" "))}o(new Qi(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:ao,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw ho.create("invalid-log-argument",{appName:name});!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=no[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:Ji[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=to;r<i.length;r++)n(i[r])}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e)},apps:null,SDK_VERSION:"8.2.5",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(!Di(e,t=t||"[DEFAULT]"))throw ho.create("no-app",{appName:t});return e[t]}function o(o){var s,a,u=o.name;if(n.has(u))return fo.debug("There were multiple attempts to register component "+u+"."),"PUBLIC"===o.type?r[u]:null;if(n.set(u,o),"PUBLIC"===o.type){var c=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[u])throw ho.create("invalid-app-argument",{appName:u});return t[u]()};void 0!==o.serviceProps&&bi(c,o.serviceProps),r[u]=c,t.prototype[u]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,u);return n.apply(this,o.multipleInstances?t:[])}}try{for(var h=ui(Object.keys(e)),l=h.next();!l.done;l=h.next()){var f=l.value;e[f]._addComponent(o)}}catch(p){s={error:p}}finally{try{l&&!l.done&&(a=h.return)&&a.call(h)}finally{if(s)throw s.error}}return"PUBLIC"===o.type?r[u]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yo=function t(){var e=vo(po);return e.INTERNAL=oi(oi({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){bi(e,t)},createSubscribe:Ui,ErrorFactory:Ai,deepExtend:bi}),e}(),go=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
if("object"==typeof self&&self.self===self&&void 0!==self.firebase){fo.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var mo=self.firebase.SDK_VERSION;mo&&mo.indexOf("LITE")>=0&&fo.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var _o=yo.initializeApp;yo.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Ti()&&fo.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),_o.apply(void 0,t)};var bo,wo,Eo=yo;(bo=Eo).INTERNAL.registerComponent(new Qi("platform-logger",(function(t){return new go(t)}),"PRIVATE")),bo.registerVersion("@firebase/app","0.6.14",wo),bo.registerVersion("fire-js","");
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Eo.registerVersion("firebase","8.2.7","app"),function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};var n=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function r(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function i(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:r(t)}}!function(t,r){if(r){var i=n;t=t.split(".");for(var o=0;o<t.length-1;o++){var s=t[o];s in i||(i[s]={}),i=i[s]}(r=r(o=i[t=t[t.length-1]]))!=o&&null!=r&&e(i,t,{configurable:!0,writable:!0,value:r})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(n){e.reject(n)}}function r(){this.a=null}function o(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;r.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var s=n.setTimeout;r.prototype.c=function(t){s(t,0)},r.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(r){this.f(r)}}}this.a=null},r.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(n){return void this.g(n)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)a.b(this.a[t]);this.a=null}};var a=new r;return e.prototype.s=function(t){var e=this.f();t.Qa(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(r){n.reject(r)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(n){o(n)}}:e}var i,o,s=new e((function(t,e){i=t,o=e}));return this.Qa(r(t,i),r(n,o)),s},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Qa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},e.resolve=o,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var r=i(t),s=r.next();!s.done;s=r.next())o(s.value).Qa(e,n)}))},e.all=function(t){var n=i(t),r=n.next();return r.done?o([]):new e((function(t,e){function i(e){return function(n){s[e]=n,0==--a&&t(s)}}var s=[],a=0;do{s.push(void 0),a++,o(r.value).Qa(i(s.length-1),e),r=n.next()}while(!r.done)}))},e}));var o=o||{},s=this||self,a=/^[\w+/_-]+[=]{0,2}$/,u=null;function c(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&a.test(t)?t:""}function h(){}function l(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function f(t){var e=l(t);return"array"==e||"object"==e&&"number"==typeof t.length}function p(t){return"function"==l(t)}function d(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var v="closure_uid_"+(1e9*Math.random()>>>0),y=0;function g(t,e,n){return t.call.apply(t.bind,arguments)}function m(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function _(t,e,n){return(_=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?g:m).apply(null,arguments)}function b(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var w=Date.now;function E(t,e){function n(){}n.prototype=e.prototype,t.ab=e.prototype,t.prototype=new n,t.prototype.constructor=t}function I(t){return t}function T(t,e,n){this.code=N+t,this.message=e||A[t]||"",this.a=n||null}function S(t){var e=t&&t.code;return e?new T(e.substring(N.length),t.message,t.serverResponse):null}E(T,Error),T.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},T.prototype.toJSON=function(){return this.w()};var C,N="auth/",A={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},k={ld:{Ta:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ta:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://securetoken.googleapis.com/v1/token",Wa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ta:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ta:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Za:"https://test-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function P(t){for(var e in k)if(k[e].id===t)return{firebaseEndpoint:(t=k[e]).Ta,secureTokenEndpoint:t.Za,identityPlatformEndpoint:t.Wa};return null}function O(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(e){return!1}}function x(t){if(Error.captureStackTrace)Error.captureStackTrace(this,x);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function R(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");x.call(this,n+t[r])}function D(t,e){throw new R("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function L(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function M(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function F(){this.b=this.a=null}C=P("__EID__")?"__EID__":void 0,E(x,Error),x.prototype.name="CustomError",E(R,x),R.prototype.name="AssertionError",L.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var V=new L((function(){return new j}),(function(t){t.reset()}));function U(){var t=me,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function j(){this.next=this.b=this.a=null}F.prototype.add=function(t,e){var n=V.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},j.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},j.prototype.reset=function(){this.next=this.b=this.a=null};var q=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},B=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var W=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,s=0;s<n;s++)if(s in o){var a=o[s];e.call(void 0,a,s,t)&&(r[i++]=a)}return r},H=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},G=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function z(t,e){return 0<=q(t,e)}function Q(t,e){var n;return(n=0<=(e=q(t,e)))&&Array.prototype.splice.call(t,e,1),n}function K(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&1==Array.prototype.splice.call(t,r,1).length&&0}))}function Y(t){return Array.prototype.concat.apply([],arguments)}function X(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var $,J=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},Z=/&/g,tt=/</g,et=/>/g,nt=/"/g,rt=/'/g,it=/\x00/g,ot=/[\x00&<>"']/;function st(t,e){return-1!=t.indexOf(e)}function at(t,e){return t<e?-1:t>e?1:0}t:{var ut=s.navigator;if(ut){var ct=ut.userAgent;if(ct){$=ct;break t}}$=""}function ht(t){return st($,t)}function lt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function ft(t){for(var e in t)return!1;return!0}function pt(t){var e,n={};for(e in t)n[e]=t[e];return n}var dt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function vt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<dt.length;o++)n=dt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function yt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||s).Element&&r.Location){var i=r;break t}}catch(a){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(d(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(a){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;D("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function gt(t,e){this.a=t===wt&&e||"",this.b=bt}function mt(t){return t instanceof gt&&t.constructor===gt&&t.b===bt?t.a:(D("expected object of type Const, got '"+t+"'"),"type_error:Const")}gt.prototype.sa=!0,gt.prototype.ra=function(){return this.a},gt.prototype.toString=function(){return"Const{"+this.a+"}"};var _t,bt={},wt={};function Et(){if(void 0===_t){var t=null,e=s.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:I,createScript:I,createScriptURL:I})}catch(n){s.console&&s.console.error(n.message)}_t=t}else _t=t}return _t}function It(t,e){this.a=e===At?t:""}function Tt(t){return t instanceof It&&t.constructor===It?t.a:(D("expected object of type TrustedResourceUrl, got '"+t+"' of type "+l(t)),"type_error:TrustedResourceUrl")}function St(t,e){var n=mt(t);if(!Nt.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=Et();return new It(t=e?e.createScriptURL(t):t,At)}(t=n.replace(Ct,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof gt?mt(t):encodeURIComponent(String(t))})))}It.prototype.sa=!0,It.prototype.ra=function(){return this.a.toString()},It.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Ct=/%{(\w+)}/g,Nt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,At={};function kt(t,e){this.a=e===Mt?t:""}function Pt(t){return t instanceof kt&&t.constructor===kt?t.a:(D("expected object of type SafeUrl, got '"+t+"' of type "+l(t)),"type_error:SafeUrl")}kt.prototype.sa=!0,kt.prototype.ra=function(){return this.a.toString()},kt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Ot=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,xt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Rt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Dt(t){if(t instanceof kt)return t;if(t="object"==typeof t&&t.sa?t.ra():String(t),Rt.test(t))t=new kt(t,Mt);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(xt);t=e&&Ot.test(e[1])?new kt(t,Mt):null}return t}function Lt(t){return t instanceof kt?t:(t="object"==typeof t&&t.sa?t.ra():String(t),Rt.test(t)||(t="about:invalid#zClosurez"),new kt(t,Mt))}var Mt={},Ft=new kt("about:invalid#zClosurez",Mt);function Vt(t,e,n){this.a=n===Ut?t:""}Vt.prototype.sa=!0,Vt.prototype.ra=function(){return this.a.toString()},Vt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Ut={};function jt(t,e,n,r){return t=t instanceof kt?t:Lt(t),e=e||s,n=n instanceof gt?mt(n):n||"",e.open(Pt(t),n,r,void 0)}function qt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Bt(t){return ot.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(Z,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(tt,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(et,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(nt,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(rt,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(it,"&#0;"))),t}function Wt(t){return Wt[" "](t),t}Wt[" "]=h;var Ht,Gt,zt=ht("Opera"),Qt=ht("Trident")||ht("MSIE"),Kt=ht("Edge"),Yt=Kt||Qt,Xt=ht("Gecko")&&!(st($.toLowerCase(),"webkit")&&!ht("Edge"))&&!(ht("Trident")||ht("MSIE"))&&!ht("Edge"),$t=st($.toLowerCase(),"webkit")&&!ht("Edge");function Jt(){var t=s.document;return t?t.documentMode:void 0}t:{var Zt="",te=(Gt=$,Xt?/rv:([^\);]+)(\)|;)/.exec(Gt):Kt?/Edge\/([\d\.]+)/.exec(Gt):Qt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Gt):$t?/WebKit\/(\S+)/.exec(Gt):zt?/(?:Version)[ \/]?(\S+)/.exec(Gt):void 0);if(te&&(Zt=te?te[1]:""),Qt){var ee=Jt();if(null!=ee&&ee>parseFloat(Zt)){Ht=String(ee);break t}}Ht=Zt}var ne,re={};function ie(t){return function(t,e){var n=re;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=J(String(Ht)).split("."),r=J(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=at(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||at(0==s[2].length,0==a[2].length)||at(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}if(s.document&&Qt){var oe=Jt();ne=oe||(parseInt(Ht,10)||void 0)}else ne=void 0;var se=ne;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Gt){}var ae=!Qt||9<=Number(se);function ue(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ce(t,e){lt(e,(function(e,n){e&&"object"==typeof e&&e.sa&&(e=e.ra()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:fe.hasOwnProperty(n)?t.setAttribute(fe[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var he,le,fe={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function pe(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!f(o)||d(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(d(o)){var s="function"==typeof o.item||"string"==typeof o.item;break t}if(p(o)){s="function"==typeof o.item;break t}}s=!1}B(s?X(o):o,r)}}}function de(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ve(t){s.setTimeout((function(){throw t}),0)}function ye(t,e){le||function(){if(s.Promise&&s.Promise.resolve){var t=s.Promise.resolve(void 0);le=function(){t.then(_e)}}else le=function(){var t=_e;!p(s.setImmediate)||s.Window&&s.Window.prototype&&!ht("Edge")&&s.Window.prototype.setImmediate==s.setImmediate?(he||(he=function(){var t=s.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!ht("Presto")&&(t=function(){var t=de(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=_((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!ht("Trident")&&!ht("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Gb;n.Gb=null,t()}},function(t){r.next={Gb:t},r=r.next,e.port2.postMessage(0)}}return function(t){s.setTimeout(t,0)}}()),he(t)):s.setImmediate(t)}}(),ge||(le(),ge=!0),me.add(t,e)}var ge=!1,me=new F;function _e(){for(var t;t=U();){try{t.a.call(t.b)}catch(e){ve(e)}M(V,t)}ge=!1}function be(t,e){if(this.a=we,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=h)try{var n=this;t.call(e,(function(t){De(n,Ee,t)}),(function(t){if(!(t instanceof qe))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(uI){}De(n,Ie,t)}))}catch(r){De(this,Ie,r)}}var we=0,Ee=2,Ie=3;function Te(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Te.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Se=new L((function(){return new Te}),(function(t){t.reset()}));function Ce(t,e,n){var r=Se.get();return r.g=t,r.b=e,r.f=n,r}function Ne(t){if(t instanceof be)return t;var e=new be(h);return De(e,Ee,t),e}function Ae(t){return new be((function(e,n){n(t)}))}function ke(t,e,n){Le(t,e,n,null)||ye(b(e,t))}function Pe(t){return new be((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Pb:!0,value:o}:{Pb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)ke(t[o],b(i,o,!0),b(i,o,!1));else e(r)}))}function Oe(t,e){if(t.a==we)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,s=n.b;s&&(s.c||(r++,s.a==t&&(i=s),!(i&&1<r)));s=s.next)i||(o=s);i&&(n.a==we&&1==r?Oe(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Fe(n),Ve(n,i,Ie,e)))}t.c=null}else De(t,Ie,e)}function xe(t,e){t.b||t.a!=Ee&&t.a!=Ie||Me(t),t.f?t.f.next=e:t.b=e,t.f=e}function Re(t,e,n,r){var i=Ce(null,null,null);return i.a=new be((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(s){o(s)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof qe?o(e):t(i)}catch(s){o(s)}}:o})),i.a.c=t,xe(t,i),i.a}function De(t,e,n){t.a==we&&(t===n&&(e=Ie,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Le(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,Me(t),e!=Ie||n instanceof qe||function(t,e){t.g=!0,ye((function(){t.g&&je.call(null,e)}))}(t,n)))}function Le(t,e,n,r){if(t instanceof be)return xe(t,Ce(e||h,n||null,r)),!0;if(O(t))return t.then(e,n,r),!0;if(d(t))try{var i=t.then;if(p(i))return function(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}function s(t){a||(a=!0,n.call(i,t))}var a=!1;try{e.call(t,s,o)}catch(u){o(u)}}(t,i,e,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function Me(t){t.h||(t.h=!0,ye(t.gc,t))}function Fe(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Ve(t,e,n,r){if(n==Ie&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Ue(e,n,r);else try{e.c?e.g.call(e.f):Ue(e,n,r)}catch(uI){je.call(null,uI)}M(Se,e)}function Ue(t,e,n){e==Ee?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}be.prototype.then=function(t,e,n){return Re(this,p(t)?t:null,p(e)?e:null,n)},be.prototype.$goog_Thenable=!0,(t=be.prototype).oa=function(t,e){return(t=Ce(t,t,e)).c=!0,xe(this,t),this},t.o=function(t,e){return Re(this,null,t,e)},t.cancel=function(t){if(this.a==we){var e=new qe(t);ye((function(){Oe(this,e)}),this)}},t.$c=function(t){this.a=we,De(this,Ee,t)},t.ad=function(t){this.a=we,De(this,Ie,t)},t.gc=function(){for(var t;t=Fe(this);)Ve(this,t,this.a,this.i);this.h=!1};var je=ve;function qe(t){x.call(this,t)}function Be(){this.xa=this.xa,this.pa=this.pa}E(qe,x),qe.prototype.name="cancel";function We(t){!t.xa&&(t.xa=!0,t.Da(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,v)&&t[v]||(t[v]=++y)}(t)}Be.prototype.xa=!1,Be.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var He=Object.freeze||function(t){return t},Ge=!Qt||9<=Number(se),ze=Qt&&!ie("9"),Qe=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{s.addEventListener("test",h,e),s.removeEventListener("test",h,e)}catch(n){}return t}();function Ke(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Ye(t,e){if(Ke.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Xt){t:{try{Wt(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Xe[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Ke.prototype.preventDefault=function(){this.defaultPrevented=!0},E(Ye,Ke);var Xe=He({2:"touch",3:"pen",4:"mouse"});Ye.prototype.preventDefault=function(){Ye.ab.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,ze)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}},Ye.prototype.g=function(){return this.a};var $e="closure_listenable_"+(1e6*Math.random()|0),Je=0;function Ze(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Va=i,this.key=++Je,this.va=this.Pa=!1}function tn(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Va=null}function en(t){this.src=t,this.a={},this.b=0}function nn(t,e){var n=e.type;n in t.a&&Q(t.a[n],e)&&(tn(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function rn(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Va==r)return i}return-1}en.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=rn(t,e,r,i);return-1<s?(e=t[s],n||(e.Pa=!1)):((e=new Ze(e,this.src,o,!!r,i)).Pa=n,t.push(e)),e};var on="closure_lm_"+(1e6*Math.random()|0),sn={};function an(t,e,n,r,i){if(r&&r.once)cn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)an(t,e[o],n,r,i);else n=mn(n),t&&t[$e]?bn(t,e,n,d(r)?!!r.capture:!!r,i):un(t,e,n,!1,r,i)}function un(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=d(i)?!!i.capture:!!i,a=yn(t);if(a||(t[on]=a=new en(t)),!(n=a.add(e,n,r,s,o)).proxy)if(r=function(){var t=vn,e=Ge?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Qe||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(fn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function cn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)cn(t,e[o],n,r,i);else n=mn(n),t&&t[$e]?wn(t,e,n,d(r)?!!r.capture:!!r,i):un(t,e,n,!0,r,i)}function hn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)hn(t,e[o],n,r,i);else r=d(r)?!!r.capture:!!r,n=mn(n),t&&t[$e]?(t=t.v,(e=String(e).toString())in t.a&&(-1<(n=rn(o=t.a[e],n,r,i))&&(tn(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=yn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=rn(e,n,r,i)),(n=-1<t?e[t]:null)&&ln(n))}function ln(t){if("number"!=typeof t&&t&&!t.va){var e=t.src;if(e&&e[$e])nn(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(fn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=yn(e))?(nn(n,t),0==n.b&&(n.src=null,e[on]=null)):tn(t)}}}function fn(t){return t in sn?sn[t]:sn[t]="on"+t}function pn(t,e,n,r){var i=!0;if((t=yn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=dn(o,r),i=i&&!1!==o)}return i}function dn(t,e){var n=t.listener,r=t.Va||t.src;return t.Pa&&ln(t),n.call(r,e)}function vn(t,e){if(t.va)return!0;if(!Ge){if(!e)t:{e=["window","event"];for(var n=s,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Ye(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(a){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=pn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=pn(r[i],t,!1,e),n=n&&o}return n}return dn(t,new Ye(e,this))}function yn(t){return(t=t[on])instanceof en?t:null}var gn="__closure_events_fn_"+(1e9*Math.random()>>>0);function mn(t){return p(t)?t:(t[gn]||(t[gn]=function(e){return t.handleEvent(e)}),t[gn])}function _n(){Be.call(this),this.v=new en(this),this.ac=this,this.gb=null}function bn(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function wn(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function En(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.va&&s.capture==n){var a=s.listener,u=s.Va||s.src;s.Pa&&nn(t.v,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}function In(t,e,n){if(p(t))n&&(t=_(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=_(t.handleEvent,t)}return 2147483647<Number(e)?-1:s.setTimeout(t,e||0)}function Tn(t){var e=null;return new be((function(n,r){-1==(e=In((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).o((function(t){throw s.clearTimeout(e),t}))}function Sn(t){if(t.W&&"function"==typeof t.W)return t.W();if("string"==typeof t)return t.split("");if(f(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Cn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.W||"function"!=typeof t.W){if(f(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function Nn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Nn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function An(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];kn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)kn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function kn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}E(_n,Be),_n.prototype[$e]=!0,_n.prototype.addEventListener=function(t,e,n,r){an(this,t,e,n,r)},_n.prototype.removeEventListener=function(t,e,n,r){hn(this,t,e,n,r)},_n.prototype.dispatchEvent=function(t){var e,n=this.gb;if(n)for(e=[];n;n=n.gb)e.push(n);n=this.ac;var r=t.type||t;if("string"==typeof t)t=new Ke(t,n);else if(t instanceof Ke)t.target=t.target||n;else{var i=t;vt(t=new Ke(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.b=e[o];i=En(s,r,!0,t)&&i}if(i=En(s=t.b=n,r,!0,t)&&i,i=En(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=En(s=t.b=e[o],r,!1,t)&&i;return i},_n.prototype.Da=function(){if(_n.ab.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)tn(n[r]);delete e.a[t],e.b--}}this.gb=null},(t=Nn.prototype).W=function(){An(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return An(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return kn(this.b,t)?this.b[t]:e},t.set=function(t,e){kn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Pn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function On(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof On?(this.i=void 0!==e?e:t.i,xn(this,t.c),this.l=t.l,this.a=t.a,Rn(this,t.g),this.f=t.f,Dn(this,Zn(t.b)),this.h=t.h):t&&(n=String(t).match(Pn))?(this.i=!!e,xn(this,n[1]||"",!0),this.l=Un(n[2]||""),this.a=Un(n[3]||"",!0),Rn(this,n[4]),this.f=Un(n[5]||"",!0),Dn(this,n[6]||"",!0),this.h=Un(n[7]||"")):(this.i=!!e,this.b=new Qn(null,this.i))}function xn(t,e,n){t.c=n?Un(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function Rn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Dn(t,e,n){e instanceof Qn?(t.b=e,function(t,e){e&&!t.f&&(Kn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Xn(this,e),Jn(this,n,t))}),t)),t.f=e}(t.b,t.i)):(n||(e=jn(e,Gn)),t.b=new Qn(e,t.i))}function Ln(t,e,n){t.b.set(e,n)}function Mn(t,e){return t.b.get(e)}function Fn(t){return t instanceof On?new On(t):new On(t,void 0)}function Vn(t,e,n,r){var i=new On(null,void 0);return t&&xn(i,t),e&&(i.a=e),n&&Rn(i,n),r&&(i.f=r),i}function Un(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function jn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,qn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function qn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}On.prototype.toString=function(){var t=[],e=this.c;e&&t.push(jn(e,Bn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(jn(e,Bn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(jn(n,"/"==n.charAt(0)?Hn:Wn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",jn(n,zn)),t.join("")},On.prototype.resolve=function(t){var e=new On(this),n=!!t.c;n?xn(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)Rn(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(st(i,"./")||st(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?Dn(e,Zn(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Bn=/[#\/\?@]/g,Wn=/[#\?:]/g,Hn=/[#\?]/g,Gn=/[#\?@]/g,zn=/#/g;function Qn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Kn(t){t.a||(t.a=new Nn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Yn(t){var e=Cn(t);if(void 0===e)throw Error("Keys are undefined");var n=new Qn(null,void 0);t=Sn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Jn(n,i,o):n.add(i,o)}return n}function Xn(t,e){Kn(t),e=tr(t,e),kn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,kn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&An(t)))}function $n(t,e){return Kn(t),e=tr(t,e),kn(t.a.b,e)}function Jn(t,e,n){Xn(t,e),0<n.length&&(t.c=null,t.a.set(tr(t,e),X(n)),t.b+=n.length)}function Zn(t){var e=new Qn;return e.c=t.c,t.a&&(e.a=new Nn(t.a),e.b=t.b),e}function tr(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function er(t){var e=[];return rr(new nr,t,e),e.join("")}function nr(){}function rr(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),rr(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&("function"!=typeof(o=e[r])&&(n.push(i),sr(r,n),n.push(":"),rr(t,o,n),i=","));return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":sr(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(t=Qn.prototype).add=function(t,e){Kn(this),this.c=null,t=tr(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){Kn(this),this.a.forEach((function(n,r){B(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.Y=function(){Kn(this);for(var t=this.a.W(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.W=function(t){Kn(this);var e=[];if("string"==typeof t)$n(this,t)&&(e=Y(e,this.a.get(tr(this,t))));else{t=this.a.W();for(var n=0;n<t.length;n++)e=Y(e,t[n])}return e},t.set=function(t,e){return Kn(this),this.c=null,$n(this,t=tr(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.W(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.W(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var ir={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},or=/\uffff/.test("")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function sr(t,e){e.push('"',t.replace(or,(function(t){var e=ir[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),ir[t]=e),e})),'"')}function ar(){var t=Nr();return Qt&&!!se&&11==se||/Edge\/\d+/.test(t)}function ur(){return s.window&&s.window.location.href||self&&self.location&&self.location.href||""}function cr(t,e){e=e||s.window;var n="about:blank";t&&(n=Pt(Dt(t)||Ft)),e.location.href=n}function hr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<hr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function lr(t){return!!((t=(t||Nr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function fr(t){t=t||s.window;try{t.close()}catch(e){}}function pr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Nr().toLowerCase(),r&&(e.target=r,st(n,"crios/")&&(e.target="_blank")),Tr(Nr())==Er&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof kt?n:Dt(void 0!==n.href?n.href:String(n))||Ft,n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((ht("iPhone")&&!ht("iPod")&&!ht("iPad")||ht("iPad")||ht("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(yt(s=de(document,"A"),"HTMLAnchorElement"),e=e instanceof kt?e:Lt(e),s.href=Pt(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=jt("",r,n,s),t=Pt(e),s&&(Yt&&st(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Bt(t)+'">',t=new Vt(t=(r=Et())?r.createHTML(t):t,null,Ut),r=s.document)&&(r.write(function(t){return t instanceof Vt&&t.constructor===Vt?t.a:(D("expected object of type SafeHtml, got '"+t+"' of type "+l(t)),"type_error:SafeHtml")}(t)),r.close())):(s=jt(e,r,n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(a){}return s}var dr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vr=/^[^@]+@[^@]+$/;function yr(){var t=null;return new be((function(e){"complete"==s.document.readyState?e():(t=function(){e()},cn(window,"load",t))})).o((function(e){throw hn(window,"load",t),e}))}function gr(t){return t=t||Nr(),!("file:"!==xr()&&"ionic:"!==xr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function mr(){var t=s.window;try{return!(!t||t==t.top)}catch(e){return!1}}function _r(){return void 0!==s.WorkerGlobalScope&&"function"==typeof s.importScripts}function br(){return Eo.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Eo.INTERNAL.hasOwnProperty("node")?"Node":_r()?"Worker":"Browser"}function wr(){var t=br();return"ReactNative"===t||"Node"===t}var Er="Firefox",Ir="Chrome";function Tr(t){var e=t.toLowerCase();return st(e,"opera/")||st(e,"opr/")||st(e,"opios/")?"Opera":st(e,"iemobile")?"IEMobile":st(e,"msie")||st(e,"trident/")?"IE":st(e,"edge/")?"Edge":st(e,"firefox/")?Er:st(e,"silk/")?"Silk":st(e,"blackberry")?"Blackberry":st(e,"webos")?"Webos":!st(e,"safari/")||st(e,"chrome/")||st(e,"crios/")||st(e,"android")?!st(e,"chrome/")&&!st(e,"crios/")||st(e,"edge/")?st(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Ir:"Safari"}var Sr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Cr(t,e){e=e||[];var n,r=[],i={};for(n in Sr)i[Sr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=br())?r=Tr(i=Nr()):"Worker"===r&&(r=Tr(i=Nr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function Nr(){return s.navigator&&s.navigator.userAgent||""}function Ar(t,e){t=t.split("."),e=e||s;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function kr(){try{var t=s.localStorage,e=Fr();if(t)return t.setItem(e,"1"),t.removeItem(e),!ar()||!!s.indexedDB}catch(n){return _r()&&!!s.indexedDB}return!1}function Pr(){return(Or()||"chrome-extension:"===xr()||gr())&&!wr()&&kr()&&!_r()}function Or(){return"http:"===xr()||"https:"===xr()}function xr(){return s.location&&s.location.protocol||null}function Rr(t){return!lr(t=t||Nr())&&Tr(t)!=Er}function Dr(t){return void 0===t?null:er(t)}function Lr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Mr(t){if(null!==t)return JSON.parse(t)}function Fr(t){return t||Math.floor(1e9*Math.random()).toString()}function Vr(t){return"Safari"!=Tr(t=t||Nr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Ur(){var t=s.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function jr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=Nr(),e=br(),this.b=lr(t)||"ReactNative"===e}function qr(){var t=s.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Br(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(n){}return null}function Wr(){return!(!Ar("fireauth.oauthhelper",s)&&!Ar("fireauth.iframe",s))}jr.prototype.get=function(){var t=s.navigator;return!t||"boolean"!=typeof t.onLine||!Or()&&"chrome-extension:"!==xr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Hr,Gr={};function zr(t){Gr[t]||(Gr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Qr={};Object.defineProperty(Qr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Qr,"abcd",{configurable:!0,enumerable:!0,value:2}),Hr=2==Qr.abcd}catch(Gt){Hr=!1}function Kr(t,e,n){Hr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Yr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Kr(t,n,e[n])}function Xr(t){var e={};return Yr(e,t),e}function $r(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Kr(e,n,$r(t[n]));return e}function Jr(t){var e=t&&(t[ri]?"phone":null);if(!(e&&t&&t[ni]))throw new T("internal-error","Internal assert: invalid MultiFactorInfo object");Kr(this,"uid",t[ni]),Kr(this,"displayName",t[ti]||null);var n=null;t[ei]&&(n=new Date(t[ei]).toUTCString()),Kr(this,"enrollmentTime",n),Kr(this,"factorId",e)}function Zr(t){try{var e=new ii(t)}catch(n){e=null}return e}Jr.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ti="displayName",ei="enrolledAt",ni="mfaEnrollmentId",ri="phoneInfo";function ii(t){Jr.call(this,t),Kr(this,"phoneNumber",t[ri])}function oi(t){var e={},n=t[ci],r=t[li],i=t[fi];if(t=Zr(t[hi]),!i||i!=ai&&i!=ui&&!n||i==ui&&!r||i==si&&!t)throw Error("Invalid checkActionCode response!");i==ui?(e[di]=n||null,e[yi]=n||null,e[pi]=r):(e[di]=r||null,e[yi]=r||null,e[pi]=n||null),e[vi]=t||null,Kr(this,mi,i),Kr(this,gi,$r(e))}E(ii,Jr),ii.prototype.w=function(){var t=ii.ab.w.call(this);return t.phoneNumber=this.phoneNumber,t};var si="REVERT_SECOND_FACTOR_ADDITION",ai="EMAIL_SIGNIN",ui="VERIFY_AND_CHANGE_EMAIL",ci="email",hi="mfaInfo",li="newEmail",fi="requestType",pi="email",di="fromEmail",vi="multiFactorInfo",yi="previousEmail",gi="data",mi="operation";function _i(t){var e=Mn(t=Fn(t),bi)||null,n=Mn(t,wi)||null,r=Mn(t,Ti)||null;if(r=r&&Ci[r]||null,!e||!n||!r)throw new T("argument-error",bi+", "+wi+"and "+Ti+" are required in a valid action code URL.");Yr(this,{apiKey:e,operation:r,code:n,continueUrl:Mn(t,Ei)||null,languageCode:Mn(t,Ii)||null,tenantId:Mn(t,Si)||null})}var bi="apiKey",wi="oobCode",Ei="continueUrl",Ii="languageCode",Ti="mode",Si="tenantId",Ci={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:si,signIn:ai,verifyAndChangeEmail:ui,verifyEmail:"VERIFY_EMAIL"};function Ni(t){try{return new _i(t)}catch(e){return null}}function Ai(t){var e=t[Ri];if(void 0===e)throw new T("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new T("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[ki];if(n&&"object"==typeof n){e=n[Mi];var r=n[Di];if(n=n[Li],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new T("argument-error",Di+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new T("argument-error",Li+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new T("argument-error",Mi+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new T("missing-android-pkg-name")}}else if(void 0!==n)throw new T("argument-error",ki+" property must be a non null object when specified.");if(this.f=null,(e=t[xi])&&"object"==typeof e){if("string"==typeof(e=e[Fi])&&e.length)this.f=e;else if(void 0!==e)throw new T("argument-error",Fi+" property must be a non empty string when specified.")}else if(void 0!==e)throw new T("argument-error",xi+" property must be a non null object when specified.");if(void 0!==(e=t[Oi])&&"boolean"!=typeof e)throw new T("argument-error",Oi+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Pi])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new T("argument-error",Pi+" property must be a non empty string when specified.");this.i=t||null}var ki="android",Pi="dynamicLinkDomain",Oi="handleCodeInApp",xi="iOS",Ri="url",Di="installApp",Li="minimumVersion",Mi="packageName",Fi="bundleId";function Vi(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Ui=null;function ji(t){var e=[];return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Ui[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Ui){Ui={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Ui[o]&&(Ui[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}(t,(function(t){e.push(t)})),e}function qi(t){var e=Wi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function Bi(t){try{return new qi(t)}catch(e){return null}}function Wi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=ji(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var s=r[e++],a=((7&i)<<18|(63&o)<<12|(63&s)<<6|63&r[e++])-65536;t[n++]=String.fromCharCode(55296+(a>>10)),t[n++]=String.fromCharCode(56320+(1023&a))}else o=r[e++],s=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}return JSON.parse(t.join(""))}catch(u){}return null}qi.prototype.T=function(){return this.f},qi.prototype.l=function(){return this.c},qi.prototype.toString=function(){return this.h};var Hi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Gi=["client_id","response_type","scope","redirect_uri","state"],zi={nd:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Xa:Gi},pd:{Ja:null,ua:500,ta:750,fa:"github.com",Xa:Gi},qd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Xa:Gi},wd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Xa:Hi},kd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Xa:[]}};function Qi(t){for(var e in zi)if(zi[e].fa==t)return zi[e];return null}function Ki(t){var e={};e["facebook.com"]=Zi,e["google.com"]=eo,e["github.com"]=to,e["twitter.com"]=no;var n=t&&t[Xi];try{if(n)return e[n]?new e[n](t):new Ji(t);if(void 0!==t[Yi])return new $i(t)}catch(r){}return null}var Yi="idToken",Xi="providerId";function $i(t){var e=t[Xi];if(!e&&t[Yi]){var n=Bi(t[Yi]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Kr(this,"providerId",e),Kr(this,"isNewUser",n)}function Ji(t){$i.call(this,t),Kr(this,"profile",$r((t=Mr(t.rawUserInfo||"{}"))||{}))}function Zi(t){if(Ji.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function to(t){if(Ji.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Kr(this,"username",this.profile&&this.profile.login||null)}function eo(t){if(Ji.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function no(t){if(Ji.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Kr(this,"username",t.screenName||null)}function ro(t){var e=Fn(t),n=Mn(e,"link"),r=Mn(Fn(n),"link");return e=Mn(e,"deep_link_id"),Mn(Fn(e),"link")||e||r||n||t}function io(t,e){if(!t&&!e)throw new T("internal-error","Internal assert: no raw session string available");if(t&&e)throw new T("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?oo:so}E(Ji,$i),E(Zi,Ji),E(to,Ji),E(eo,Ji),E(no,Ji);var oo="enroll",so="signin";function ao(){}function uo(t,e){return t.then((function(t){if(t[Js]){var n=Bi(t[Js]);if(!n||e!=n.i)throw new T("user-mismatch");return t}throw new T("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==N+"user-not-found"?new T("user-mismatch"):t}))}function co(t,e){if(!e)throw new T("internal-error","failed to construct a credential");this.a=e,Kr(this,"providerId",t),Kr(this,"signInMethod",t)}function ho(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function lo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new co(t.providerId,t.pendingToken)}catch(e){}return null}function fo(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Kr(this,"idToken",e.idToken),e.accessToken&&Kr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Kr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new T("internal-error","failed to construct a credential");Kr(this,"accessToken",e.oauthToken),Kr(this,"secret",e.oauthTokenSecret)}Kr(this,"providerId",t),Kr(this,"signInMethod",n)}function po(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Yn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function vo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new fo(t.providerId,e,t.signInMethod)}catch(n){}}return null}function yo(t,e){this.Qc=e||[],Yr(this,{providerId:t,isOAuthProvider:!0}),this.Ib={},this.pb=(Qi(t)||{}).Ja||null,this.ob=null}function go(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new T("argument-error",'SAML provider IDs must be prefixed with "saml."');yo.call(this,t,[])}function mo(t){yo.call(this,t,Gi),this.a=[]}function _o(){mo.call(this,"facebook.com")}function bo(t){if(!t)throw new T("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return d(t)&&(e=t.accessToken),(new _o).credential({accessToken:e})}function wo(){mo.call(this,"github.com")}function Io(t){if(!t)throw new T("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return d(t)&&(e=t.accessToken),(new wo).credential({accessToken:e})}function To(){mo.call(this,"google.com"),this.Ca("profile")}function So(t,e){var n=t;return d(t)&&(n=t.idToken,e=t.accessToken),(new To).credential({idToken:n,accessToken:e})}function Co(){yo.call(this,"twitter.com",Hi)}function No(t,e){var n=t;if(d(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new T("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new fo("twitter.com",n,"twitter.com")}function Ao(t,e,n){this.a=t,this.f=e,Kr(this,"providerId","password"),Kr(this,"signInMethod",n===Po.EMAIL_LINK_SIGN_IN_METHOD?Po.EMAIL_LINK_SIGN_IN_METHOD:Po.EMAIL_PASSWORD_SIGN_IN_METHOD)}function ko(t){return t&&t.email&&t.password?new Ao(t.email,t.password,t.signInMethod):null}function Po(){Yr(this,{providerId:"password",isOAuthProvider:!1})}function Oo(t,e){if(!(e=xo(e)))throw new T("argument-error","Invalid email link!");return new Ao(t,e.code,Po.EMAIL_LINK_SIGN_IN_METHOD)}function xo(t){return(t=Ni(t=ro(t)))&&t.operation===ai?t:null}function Ro(t){if(!(t.eb&&t.cb||t.La&&t.ea))throw new T("internal-error");this.a=t,Kr(this,"providerId","phone"),this.fa="phone",Kr(this,"signInMethod","phone")}function Do(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return B(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new Ro(e)}return null}function Lo(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.eb,code:t.a.cb}}function Mo(t){try{this.a=t||Eo.auth()}catch(e){throw new T("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Yr(this,{providerId:"phone",isOAuthProvider:!1})}function Fo(t,e){if(!t)throw new T("missing-verification-id");if(!e)throw new T("missing-verification-code");return new Ro({eb:t,cb:e})}function Vo(t){if(t.temporaryProof&&t.phoneNumber)return new Ro({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return So(o,n);case"facebook.com":return bo(n);case"github.com":return Io(n);case"twitter.com":return No(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new co(e,s):new fo(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new mo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(a){return null}}function Uo(t){if(!t.isOAuthProvider)throw new T("invalid-oauth-provider")}function jo(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new T("invalid-auth-event");if(this.g&&this.a)throw new T("invalid-auth-event");if(this.g&&!this.f)throw new T("invalid-auth-event")}function qo(t){return(t=t||{}).type?new jo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&S(t.error),t.postBody,t.tenantId):null}function Bo(){this.b=null,this.a=[]}io.prototype.Ha=function(){return this.a?Ne(this.a):Ne(this.b)},io.prototype.w=function(){return this.type==oo?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},ao.prototype.ka=function(){},ao.prototype.b=function(){},ao.prototype.c=function(){},ao.prototype.w=function(){},co.prototype.ka=function(t){return ba(t,ho(this))},co.prototype.b=function(t,e){var n=ho(this);return n.idToken=e,wa(t,n)},co.prototype.c=function(t,e){return uo(Ea(t,ho(this)),e)},co.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},fo.prototype.ka=function(t){return ba(t,po(this))},fo.prototype.b=function(t,e){var n=po(this);return n.idToken=e,wa(t,n)},fo.prototype.c=function(t,e){return uo(Ea(t,po(this)),e)},fo.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},yo.prototype.Ka=function(t){return this.Ib=pt(t),this},E(go,yo),E(mo,yo),mo.prototype.Ca=function(t){return z(this.a,t)||this.a.push(t),this},mo.prototype.Qb=function(){return X(this.a)},mo.prototype.credential=function(t,e){var n;if(!(n=d(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new T("argument-error","credential failed: must provide the ID token and/or the access token.");return new fo(this.providerId,n,this.providerId)},E(_o,mo),Kr(_o,"PROVIDER_ID","facebook.com"),Kr(_o,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),E(wo,mo),Kr(wo,"PROVIDER_ID","github.com"),Kr(wo,"GITHUB_SIGN_IN_METHOD","github.com"),E(To,mo),Kr(To,"PROVIDER_ID","google.com"),Kr(To,"GOOGLE_SIGN_IN_METHOD","google.com"),E(Co,yo),Kr(Co,"PROVIDER_ID","twitter.com"),Kr(Co,"TWITTER_SIGN_IN_METHOD","twitter.com"),Ao.prototype.ka=function(t){return this.signInMethod==Po.EMAIL_LINK_SIGN_IN_METHOD?ru(t,Pa,{email:this.a,oobCode:this.f}):ru(t,Ja,{email:this.a,password:this.f})},Ao.prototype.b=function(t,e){return this.signInMethod==Po.EMAIL_LINK_SIGN_IN_METHOD?ru(t,Oa,{idToken:e,email:this.a,oobCode:this.f}):ru(t,Ha,{idToken:e,email:this.a,password:this.f})},Ao.prototype.c=function(t,e){return uo(this.ka(t),e)},Ao.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Yr(Po,{PROVIDER_ID:"password"}),Yr(Po,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Yr(Po,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Ro.prototype.ka=function(t){return t.fb(Lo(this))},Ro.prototype.b=function(t,e){var n=Lo(this);return n.idToken=e,ru(t,tu,n)},Ro.prototype.c=function(t,e){var n=Lo(this);return n.operation="REAUTH",uo(t=ru(t,eu,n),e)},Ro.prototype.w=function(){var t={providerId:"phone"};return this.a.eb&&(t.verificationId=this.a.eb),this.a.cb&&(t.verificationCode=this.a.cb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Mo.prototype.fb=function(t,e){var n=this.a.a;return Ne(e.verify()).then((function(r){if("string"!=typeof r)throw new T("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=d(t)?t.session:null,o=d(t)?t.phoneNumber:t;return(i&&i.type==oo?i.Ha().then((function(t){return function(t,e){return ru(t,za,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})})):i&&i.type==so?i.Ha().then((function(e){return function(t,e){return ru(t,Qa,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(t,e){return ru(t,Ba,e)}(n,{phoneNumber:o,recaptchaToken:r})).then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}));default:throw new T("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Yr(Mo,{PROVIDER_ID:"phone"}),Yr(Mo,{PHONE_SIGN_IN_METHOD:"phone"}),jo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},jo.prototype.T=function(){return this.h},jo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Wo,Ho=null;function Go(t){var e="unauthorized-domain",n=void 0,r=Fn(t);t=r.a,"chrome-extension"==(r=r.c)?n=qt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=qt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",T.call(this,e,n)}function zo(t,e,n){T.call(this,t,n),(t=e||{}).Jb&&Kr(this,"email",t.Jb),t.ea&&Kr(this,"phoneNumber",t.ea),t.credential&&Kr(this,"credential",t.credential),t.Zb&&Kr(this,"tenantId",t.Zb)}function Qo(t){if(t.code){var e=t.code||"";0==e.indexOf(N)&&(e=e.substring(N.length));var n={credential:Vo(t),Zb:t.tenantId};if(t.email)n.Jb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new T(e,t.message||void 0);return new zo(e,n,t.message)}return null}function Ko(){}function Yo(t){return t.c||(t.c=t.b())}function Xo(){}function $o(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(uI){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Jo(){}function Zo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=_(this.qc,this),this.a.onerror=_(this.Sb,this),this.a.onprogress=_(this.rc,this),this.a.ontimeout=_(this.vc,this)}function ts(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function es(t,e,n){this.reset(t,e,n,void 0,void 0)}function ns(t){this.f=t,this.b=this.c=this.a=null}function rs(t,e){this.name=t,this.value=e}E(Go,T),E(zo,T),zo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&vt(t,e),t},zo.prototype.toJSON=function(){return this.w()},Ko.prototype.c=null,E(Xo,Ko),Xo.prototype.a=function(){var t=$o(this);return t?new ActiveXObject(t):new XMLHttpRequest},Xo.prototype.b=function(){var t={};return $o(this)&&(t[0]=!0,t[1]=!0),t},Wo=new Xo,E(Jo,Ko),Jo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Zo;throw Error("Unsupported browser")},Jo.prototype.b=function(){return{}},(t=Zo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,ts(this,4)},t.Sb=function(){this.status=500,this.response=this.responseText="",ts(this,4)},t.vc=function(){this.Sb()},t.rc=function(){this.status=200,ts(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},es.prototype.a=null,es.prototype.reset=function(t,e,n,r,i){delete this.a},rs.prototype.toString=function(){return this.name};var is=new rs("SEVERE",1e3),os=new rs("WARNING",900),ss=new rs("CONFIG",700),as=new rs("FINE",500);function us(t){return t.c?t.c:t.a?us(t.a):(D("Root logger has no level set."),null)}ns.prototype.log=function(t,e,n){if(t.value>=us(this).value)for(p(e)&&(e=e()),t=new es(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var cs={},hs=null;function ls(t){var e;if(hs||(hs=new ns(""),cs[""]=hs,hs.c=ss),!(e=cs[t])){e=new ns(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=ls(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,cs[t]=e}return e}function fs(t,e){t&&t.log(as,e,void 0)}function ps(t){this.f=t}function ds(t){_n.call(this),this.u=t,this.h=void 0,this.readyState=vs,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=ls("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}E(ps,Ko),ps.prototype.a=function(){return new ds(this.f)},ps.prototype.b=function(t){return function(){return t}}({}),E(ds,_n);var vs=0;function ys(t){t.c.read().then(t.pc.bind(t)).catch(t.Ua.bind(t))}function gs(t){t.readyState=4,t.g=null,t.c=null,t.m=null,ms(t)}function ms(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function _s(t){_n.call(this),this.headers=new Nn,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.R=this.l="",this.f=this.O=this.i=this.J=!1,this.g=0,this.s=null,this.m=bs,this.u=this.S=!1}(t=ds.prototype).open=function(t,e){if(this.readyState!=vs)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,ms(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Ua.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,gs(this)),this.readyState=vs},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,ms(this)),this.a&&(this.readyState=3,ms(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Ua.bind(this)):void 0!==s.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,ys(this)):t.text().then(this.tc.bind(this),this.Ua.bind(this)))))},t.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?gs(this):ms(this),3==this.readyState&&ys(this)}},t.tc=function(t){this.a&&(this.response=this.responseText=t,gs(this))},t.sc=function(t){this.a&&(this.response=t,gs(this))},t.Ua=function(t){var e=this.i;e&&e.log(os,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&gs(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(os,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(os,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(ds.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),E(_s,_n);var bs="";_s.prototype.b=ls("goog.net.XhrIo");var ws=/^https?$/i,Es=["POST","PUT"];function Is(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.R=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():Wo.a(),t.C=t.D?Yo(t.D):Yo(Wo),t.a.onreadystatechange=_(t.Vb,t);try{fs(t.b,xs(t,"Opening Xhr")),t.O=!0,t.a.open(n,String(e),!0),t.O=!1}catch(a){return fs(t.b,xs(t,"Error opening Xhr: "+a.message)),void Ss(t,a)}e=r||"";var o=new Nn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(f(t)||"string"==typeof t)B(t,e,void 0);else for(var n=Cn(t),r=Sn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=Ts,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),r=s.FormData&&e instanceof s.FormData,!z(Es,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{ks(t),0<t.g&&(t.u=function(t){return Qt&&ie(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),fs(t.b,xs(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=_(t.Ma,t)):t.s=In(t.Ma,t.g,t)),fs(t.b,xs(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(a){fs(t.b,xs(t,"Send error: "+a.message)),Ss(t,a)}}function Ts(t){return"content-type"==t.toLowerCase()}function Ss(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Cs(t),As(t)}function Cs(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Ns(t){if(t.c&&void 0!==o)if(t.C[1]&&4==Ps(t)&&2==Os(t))fs(t.b,xs(t,"Local request error detected and ignored"));else if(t.i&&4==Ps(t))In(t.Vb,0,t);else if(t.dispatchEvent("readystatechange"),4==Ps(t)){fs(t.b,xs(t,"Request complete")),t.c=!1;try{var e,n=Os(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var a=String(t.l).match(Pn)[1]||null;if(!a&&s.self&&s.self.location){var u=s.self.location.protocol;a=u.substr(0,u.length-1)}i=!ws.test(a?a.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<Ps(t)?t.a.statusText:""}catch(h){fs(t.b,"Can not get status: "+h.message),c=""}t.h=c+" ["+Os(t)+"]",Cs(t)}}finally{As(t)}}}function As(t,e){if(t.a){ks(t);var n=t.a,r=t.C[0]?h:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(uI){(t=t.b)&&t.log(is,"Problem encountered resetting onreadystatechange: "+uI.message,void 0)}}}function ks(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(s.clearTimeout(t.s),t.s=null)}function Ps(t){return t.a?t.a.readyState:0}function Os(t){try{return 2<Ps(t)?t.a.status:-1}catch(e){return-1}}function xs(t,e){return e+" ["+t.R+" "+t.l+" "+Os(t)+"]"}function Rs(t){var e=Hs;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function Ds(t,e,n){t.a=!0,t.c=n,t.f=!e,Vs(t)}function Ls(t){if(t.a){if(!t.v)throw new Us(t);t.v=!1}}function Ms(t,e,n,r){t.g.push([e,n,r]),t.a&&Vs(t)}function Fs(t){return G(t.g,(function(t){return p(t[1])}))}function Vs(t){if(t.h&&t.a&&Fs(t)){var e=t.h,n=Bs[e];n&&(s.clearTimeout(n.a),delete Bs[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],a=i[1];if(i=i[2],o=t.f?a:o)try{var u=o.call(i||t.s,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(O(e)||"function"==typeof s.Promise&&e instanceof s.Promise)&&(r=!0,t.i=!0)}catch(c){e=c,t.f=!0,Fs(t)||(n=!0)}}t.c=e,r&&(u=_(t.m,t,!0),r=_(t.m,t,!1),e instanceof Rs?(Ms(e,u,r),e.C=!0):e.then(u,r)),n&&(e=new qs(e),Bs[e.a]=e,t.h=e.a)}function Us(){x.call(this)}function js(){x.call(this)}function qs(t){this.a=s.setTimeout(_(this.c,this),0),this.b=t}(t=_s.prototype).Ma=function(){void 0!==o&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",fs(this.b,xs(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(fs(this.b,xs(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),As(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),As(this,!0)),_s.ab.Da.call(this)},t.Vb=function(){this.xa||(this.O||this.i||this.f?Ns(this):this.Jc())},t.Jc=function(){Ns(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case bs:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(is,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return fs(this.b,"Can not get response: "+e.message),null}},Rs.prototype.cancel=function(t){if(this.a)this.c instanceof Rs&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new js(this),Ls(this),Ds(this,!1,t))}},Rs.prototype.m=function(t,e){this.i=!1,Ds(this,t,e)},Rs.prototype.then=function(t,e,n){var r,i,o=new be((function(t,e){r=t,i=e}));return Ms(this,r,(function(t){t instanceof js?o.cancel():i(t)})),o.then(t,e,n)},Rs.prototype.$goog_Thenable=!0,E(Us,x),Us.prototype.message="Deferred has already fired",Us.prototype.name="AlreadyCalledError",E(js,x),js.prototype.message="Deferred was canceled",js.prototype.name="CanceledError",qs.prototype.c=function(){throw delete Bs[this.a],this.b};var Bs={};function Ws(t){var e,n=document,r=Tt(t).toString(),i=de(document,"SCRIPT"),o={Wb:i,Ma:void 0},a=new Rs(o);return e=window.setTimeout((function(){Gs(i,!0);var t=new Ks(Qs,"Timeout reached for loading script "+r);Ls(a),Ds(a,!1,t)}),5e3),o.Ma=e,i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Gs(i,!1,e),Ls(a),Ds(a,!0,null))},i.onerror=function(){Gs(i,!0,e);var t=new Ks(zs,"Error while loading script "+r);Ls(a),Ds(a,!1,t)},vt(o={},{type:"text/javascript",charset:"UTF-8"}),ce(i,o),function(t,e){yt(t,"HTMLScriptElement"),t.src=Tt(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=s?e=c(e.document):(null===u&&(u=c(s.document)),e=u),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),a}function Hs(){if(this&&this.Wb){var t=this.Wb;t&&"SCRIPT"==t.tagName&&Gs(t,!0,this.Ma)}}function Gs(t,e,n){null!=n&&s.clearTimeout(n),t.onload=h,t.onerror=h,t.onreadystatechange=h,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var zs=0,Qs=1;function Ks(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),x.call(this,n),this.code=t}function Ys(t){this.f=t}function Xs(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||Zs,this.g=pt(t.secureTokenHeaders||ta),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||ea,this.a=pt(t.firebaseHeaders||na),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==br(),!(n=s.XMLHttpRequest||n&&Eo.INTERNAL.node&&Eo.INTERNAL.node.XMLHttpRequest)&&!_r())throw new T("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,_r()?this.f=new ps(self):wr()?this.f=new Ys(n):this.f=new Jo,this.b=null}E(Ks,x),E(Ys,Ko),Ys.prototype.a=function(){return new this.f},Ys.prototype.b=function(){return{}};var $s,Js="idToken",Zs=new jr(3e4,6e4),ta={"Content-Type":"application/x-www-form-urlencoded"},ea=new jr(3e4,6e4),na={"Content-Type":"application/json"};function ra(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function ia(t,e){e&&(t.l=oa("https://securetoken.googleapis.com/v1/token",e),t.h=oa("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=oa("https://identitytoolkit.googleapis.com/v2/",e))}function oa(t,e){return t=Fn(t),e=Fn(e.url),t.f=t.a+t.f,xn(t,e.c),t.a=e.a,Rn(t,e.g),t.toString()}function sa(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function aa(t,e,n,r,i,o,a){(function(){var t=Nr();return!((t=Tr(t)!=Ir?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||Qt&&se&&!(9<se))})()||_r()?t=_(t.u,t):($s||($s=new be((function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{s[ca]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Ms(t,null,e,void 0)}(Ws(St(ua,{onload:ca})),(function(){e(Error("CORS_UNSUPPORTED"))}))}}(t,e)}))),t=_(t.s,t)),t(e,n,r,i,o,a)}Xs.prototype.T=function(){return this.b},Xs.prototype.u=function(t,e,n,r,i,o){if(_r()&&(void 0===s.fetch||void 0===s.Headers||void 0===s.Request))throw new T("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new _s(this.f);if(o){a.g=Math.max(0,o);var u=setTimeout((function(){a.dispatchEvent("timeout")}),o)}bn(a,"complete",(function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return fs(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(n){t=null}e&&e(t)})),wn(a,"ready",(function(){u&&clearTimeout(u),We(this)})),wn(a,"timeout",(function(){u&&clearTimeout(u),We(this),e&&e(null)})),Is(a,t,n,r,i)};var ua=new gt(wt,"https://apis.google.com/js/client.js?onload=%{onload}"),ca="__fcb"+Math.floor(1e6*Math.random()).toString();function ha(t,e,n,r,i,o,s){var a=Fn(e+n);Ln(a,"key",t.c),s&&Ln(a,"cb",w().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Ln(a,c,i[c]);return new be((function(e,n){aa(t,a.toString(),(function(t){t?t.error?n(ou(t,o||{})):e(t):n(new T("network-request-failed"))}),r,u?void 0:er(Lr(i)),t.a,t.v.get())}))}function la(t){if("string"!=typeof(t=t.email)||!vr.test(t))throw new T("invalid-email")}function fa(t){"email"in t&&la(t)}function pa(t){if(!t[Js]){if(t.mfaPendingCredential)throw new T("multi-factor-auth-required",null,pt(t));throw new T("internal-error")}}function da(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new T("internal-error")}else{if(!t.sessionInfo)throw new T("missing-verification-id");if(!t.code)throw new T("missing-verification-code")}}Xs.prototype.s=function(t,e,n,r,i){var o=this;$s.then((function(){window.gapi.client.setApiKey(o.c);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(s),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},Xs.prototype.zb=function(){return ru(this,Ga,{})},Xs.prototype.Bb=function(t,e){return ru(this,Wa,{idToken:t,email:e})},Xs.prototype.Cb=function(t,e){return ru(this,Ha,{idToken:t,password:e})};var va={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ya(t){if(!t.phoneVerificationInfo)throw new T("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new T("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new T("missing-verification-code")}function ga(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new T("internal-error")}function ma(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&($n(t=new Qn(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function _a(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Qo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Qo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Qo(t)):t.errorMessage&&(e=iu(t.errorMessage)),e)throw e;pa(t)}function ba(t,e){return e.returnIdpCredential=!0,ru(t,Ka,e)}function wa(t,e){return e.returnIdpCredential=!0,ru(t,Xa,e)}function Ea(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,ru(t,Ya,e)}function Ia(t){if(!t.oobCode)throw new T("invalid-action-code")}(t=Xs.prototype).Db=function(t,e){var n={idToken:t},r=[];return lt(va,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),ru(this,Wa,n)},t.vb=function(t,e){return vt(t={requestType:"PASSWORD_RESET",email:t},e),ru(this,Va,t)},t.wb=function(t,e){return vt(t={requestType:"EMAIL_SIGNIN",email:t},e),ru(this,La,t)},t.ub=function(t,e){return vt(t={requestType:"VERIFY_EMAIL",idToken:t},e),ru(this,Ma,t)},t.Eb=function(t,e,n){return vt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),ru(this,Fa,t)},t.fb=function(t){return ru(this,Za,t)},t.nb=function(t,e){return ru(this,qa,{oobCode:t,newPassword:e})},t.Ra=function(t){return ru(this,Sa,{oobCode:t})},t.jb=function(t){return ru(this,Ta,{oobCode:t})};var Ta={endpoint:"setAccountInfo",A:Ia,Z:"email",B:!0},Sa={endpoint:"resetPassword",A:Ia,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new T("internal-error")},B:!0},Ca={endpoint:"signupNewUser",A:function(t){if(la(t),!t.password)throw new T("weak-password")},G:pa,V:!0,B:!0},Na={endpoint:"createAuthUri",B:!0},Aa={endpoint:"deleteAccount",N:["idToken"]},ka={endpoint:"setAccountInfo",N:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new T("internal-error")}},Pa={endpoint:"emailLinkSignin",N:["email","oobCode"],A:la,G:pa,V:!0,B:!0},Oa={endpoint:"emailLinkSignin",N:["idToken","email","oobCode"],A:la,G:pa,V:!0},xa={endpoint:"accounts/mfaEnrollment:finalize",N:["idToken","phoneVerificationInfo"],A:ya,G:pa,B:!0,Na:!0},Ra={endpoint:"accounts/mfaSignIn:finalize",N:["mfaPendingCredential","phoneVerificationInfo"],A:ya,G:pa,B:!0,Na:!0},Da={endpoint:"getAccountInfo"},La={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new T("internal-error");la(t)},Z:"email",B:!0},Ma={endpoint:"getOobConfirmationCode",N:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new T("internal-error")},Z:"email",B:!0},Fa={endpoint:"getOobConfirmationCode",N:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new T("internal-error")},Z:"email",B:!0},Va={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new T("internal-error");la(t)},Z:"email",B:!0},Ua={lb:!0,endpoint:"getProjectConfig",Ub:"GET"},ja={lb:!0,endpoint:"getRecaptchaParam",Ub:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new T("internal-error")}},qa={endpoint:"resetPassword",A:Ia,Z:"email",B:!0},Ba={endpoint:"sendVerificationCode",N:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Wa={endpoint:"setAccountInfo",N:["idToken"],A:fa,V:!0},Ha={endpoint:"setAccountInfo",N:["idToken"],A:function(t){if(fa(t),!t.password)throw new T("weak-password")},G:pa,V:!0},Ga={endpoint:"signupNewUser",G:pa,V:!0,B:!0},za={endpoint:"accounts/mfaEnrollment:start",N:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new T("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new T("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new T("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new T("internal-error")},B:!0,Na:!0},Qa={endpoint:"accounts/mfaSignIn:start",N:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new T("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new T("internal-error")},B:!0,Na:!0},Ka={endpoint:"verifyAssertion",A:ga,Ya:ma,G:_a,V:!0,B:!0},Ya={endpoint:"verifyAssertion",A:ga,Ya:ma,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new T("user-not-found");if(t.errorMessage)throw iu(t.errorMessage);pa(t)},V:!0,B:!0},Xa={endpoint:"verifyAssertion",A:function(t){if(ga(t),!t.idToken)throw new T("internal-error")},Ya:ma,G:_a,V:!0},$a={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new T("invalid-custom-token")},G:pa,V:!0,B:!0},Ja={endpoint:"verifyPassword",A:function(t){if(la(t),!t.password)throw new T("wrong-password")},G:pa,V:!0,B:!0},Za={endpoint:"verifyPhoneNumber",A:da,G:pa,B:!0},tu={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new T("internal-error");da(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Qo(t);pa(t)}},eu={Hb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:da,G:pa,B:!0},nu={endpoint:"accounts/mfaEnrollment:withdraw",N:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Js]^!!t.refreshToken)throw new T("internal-error")},B:!0,Na:!0};function ru(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.N))return Ae(new T("internal-error"));var r,i=!!e.Na,o=e.Ub||"POST";return Ne(n).then(e.A).then((function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),ha(t,i?t.i:t.h,e.endpoint,o,n,e.Hb,e.lb||!1)})).then((function(t){return r=t,e.Ya?e.Ya(n,r):r})).then(e.G).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new T("internal-error");return r[e.Z]}))}function iu(t){return ou({error:{errors:[{message:t}],code:400,message:t}})}function ou(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new T(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",vt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new T(r[i],e);return!e&&t&&(e=Dr(t)),new T("internal-error",e)}function su(t){this.b=t,this.a=null,this.rb=function(t){return(hu||(hu=new be((function(t,e){function n(){Ur(),Ar("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Ur(),e(Error("Network Error"))},timeout:uu.get()})}if(Ar("gapi.iframes.Iframe"))t();else if(Ar("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();s[r]=function(){Ar("gapi.load")?n():e(Error("Network Error"))},Ne(Ws(r=St(au,{onload:r}))).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw hu=null,t})))).then((function(){return new be((function(e,n){Ar("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Ar("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),cu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var au=new gt(wt,"https://apis.google.com/js/api.js?onload=%{onload}"),uu=new jr(3e4,6e4),cu=new jr(5e3,15e3),hu=null;function lu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,this.g?t=Vn((t=Fn(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):t=Vn("https",this.l,null,"/__/auth/iframe"),this.a=t,Ln(this.a,"apiKey",this.h),Ln(this.a,"appName",this.i),this.b=null,this.c=[]}function fu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function pu(t){try{return Eo.app(t).auth().Ga()}catch(e){return[]}}function du(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function vu(t){var e=ur();return function(t){return ru(t,Ua,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=Fn(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],s=n,a=r;if(0==o.indexOf("chrome-extension://")?s=Fn(o).a==s&&"chrome-extension"==a:"http"!=a&&"https"!=a?s=!1:dr.test(o)?s=s==o:(o=o.split(".").join("\\."),s=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)),s){t=!0;break t}}t=!1}if(!t)throw new Go(ur())}))}function yu(t){return t.m||(t.m=yr().then((function(){if(!t.u){var e=t.c,n=t.i,r=pu(t.b),i=new lu(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=X(r||[]),t.u=i.toString()}t.v=new su(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.rb.then((function(){t.a.register("authEvent",e,Ar("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.v,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=qo(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Ne(n)}return n.status="ERROR",Ne(n)}))}(t)}))),t.m}function gu(t){return t.l||(t.C=t.c?Cr(t.c,pu(t.b)):null,t.l=new Xs(t.g,P(t.i),t.C),t.f&&ia(t.l,t.f)),t.l}function mu(t,e,n,r,i,o,s,a,u,c,h,l){return(t=new fu(t,e,n,r,i,l)).l=o,t.g=s,t.i=a,t.b=pt(u||null),t.f=c,t.yb(h).toString()}function _u(t){if(this.a=t||Eo.INTERNAL.reactNative&&Eo.INTERNAL.reactNative.AsyncStorage,!this.a)throw new T("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function bu(t){this.b=t,this.a={},this.f=_(this.c,this)}lu.prototype.toString=function(){return this.f?Ln(this.a,"v",this.f):Xn(this.a.b,"v"),this.b?Ln(this.a,"eid",this.b):Xn(this.a.b,"eid"),this.c.length?Ln(this.a,"fw",this.c.join(",")):Xn(this.a.b,"fw"),this.a.toString()},fu.prototype.yb=function(t){return this.h=t,this},fu.prototype.toString=function(){if(this.v){var t=Fn(this.v.url);t=Vn(t.c,t.a,t.g,"/emulator/auth/handler")}else t=Vn("https",this.u,null,"/__/auth/handler");if(Ln(t,"apiKey",this.s),Ln(t,"appName",this.c),Ln(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=Eo.app(this.c).auth().la()}catch(a){n=null}for(var r in e.ob=n,Ln(t,"providerId",this.a.providerId),e=Lr((n=this.a).Ib))e[r]=e[r].toString();r=n.Qc,e=pt(e);for(var i=0;i<r.length;i++){var o=r[i];o in e&&delete e[o]}n.pb&&n.ob&&!e[n.pb]&&(e[n.pb]=n.ob),ft(e)||Ln(t,"customParameters",Dr(e))}if("function"==typeof this.a.Qb&&((n=this.a.Qb()).length&&Ln(t,"scopes",n.join(","))),this.l?Ln(t,"redirectUrl",this.l):Xn(t.b,"redirectUrl"),this.g?Ln(t,"eventId",this.g):Xn(t.b,"eventId"),this.i?Ln(t,"v",this.i):Xn(t.b,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!Mn(t,s)&&Ln(t,s,this.b[s]);return this.h?Ln(t,"tid",this.h):Xn(t.b,"tid"),this.f?Ln(t,"eid",this.f):Xn(t.b,"eid"),(s=pu(this.c)).length&&Ln(t,"fw",s.join(",")),t.toString()},(t=du.prototype).Ob=function(t,e,n){var r=new T("popup-closed-by-user"),i=new T("web-storage-unsupported"),o=this,s=!1;return this.ma().then((function(){(function(t){var e={type:"webStorageSupport"};return yu(t).then((function(){return function(t,e){return t.rb.then((function(){return new be((function(n){t.a.send(e.type,e,n,Ar("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.v,e)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&fr(t),e(i),s=!0)}))})).o((function(){})).then((function(){if(!s)return function(t){return new be((function(e){return function n(){Tn(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!s)return Tn(n).then((function(){e(r)}))}))},t.Xb=function(){var t=Nr();return!Rr(t)&&!Vr(t)},t.Tb=function(){return!1},t.Mb=function(t,e,n,r,i,o,s,a){if(!t)return Ae(new T("popup-blocked"));if(s&&!Rr())return this.ma().o((function(e){fr(t),i(e)})),r(),Ne();this.a||(this.a=vu(gu(this)));var u=this;return this.a.then((function(){var e=u.ma().o((function(e){throw fr(t),i(e),e}));return r(),e})).then((function(){(Uo(n),s)||cr(mu(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,a,u.f),t)})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Nb=function(t,e,n,r){this.a||(this.a=vu(gu(this)));var i=this;return this.a.then((function(){Uo(e),cr(mu(i.s,i.g,i.b,t,e,ur(),n,i.c,void 0,i.i,r,i.f))})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.ma=function(){var t=this;return yu(this).then((function(){return t.v.rb})).o((function(){throw t.a=null,new T("network-request-failed")}))},t.$b=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Sa=function(t){K(this.h,(function(e){return e==t}))},(t=_u.prototype).get=function(t){return Ne(this.a.getItem(t)).then((function(t){return t&&Mr(t)}))},t.set=function(t,e){return Ne(this.a.setItem(t,Dr(e)))},t.U=function(t){return Ne(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var wu,Eu=[];function Iu(t,e,n){ft(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function Tu(t){this.a=t}function Su(t){this.c=t,this.b=!1,this.a=[]}function Cu(t,e,n,r){var i,o,s,a,u=n||{},c=null;if(t.b)return Ae(Error("connection_unavailable"));var h=r?800:50,l="undefined"!=typeof MessageChannel?new MessageChannel:null;return new be((function(n,r){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),s=setTimeout((function(){r(Error("unsupported_event"))}),h),c={messageChannel:l,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),r(Error("invalid_response"))))}},t.a.push(c),l.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[l.port2])):r(Error("connection_unavailable"))})).then((function(e){return Nu(t,c),e})).o((function(e){throw Nu(t,c),e}))}function Nu(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),K(t.a,(function(t){return t==e}))}}function Au(){if(!xu())throw new T("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=s.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;_r()&&self?(this.v=function(){var t=_r()?self:null;if(B(Eu,(function(n){n.b==t&&(e=n)})),!e){var e=new bu(t);Eu.push(e)}return e}(),Iu(this.v,"keyChanged",(function(e,n){return Fu(t).then((function(e){return 0<e.length&&B(t.a,(function(t){t(e)})),{keyProcessed:z(e,n.key)}}))})),Iu(this.v,"ping",(function(){return Ne(["keyChanged"])}))):function(){var t=s.navigator;return t&&t.serviceWorker?Ne().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):Ne(null)}().then((function(e){(t.h=e)&&(t.g=new Su(new Tu(e)),Cu(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&z(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function ku(t){return new be((function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(e){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){n(e)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new be((function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(t).then((function(){return ku(t)})).then((function(t){e(t)})).o((function(t){n(t)}))}}))}function Pu(t){return t.i||(t.i=ku(t)),t.i}function Ou(t,e){var n=0;return new be((function r(i,o){Pu(t).then(e).then(i).o((function(e){if(!(3<++n))return Pu(t).then((function(e){return e.close(),t.i=void 0,r(i,o)})).o((function(t){o(t)}));o(e)}))}))}function xu(){try{return!!s.indexedDB}catch(Gt){return!1}}function Ru(t){return t.objectStore("firebaseLocalStorage")}function Du(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Lu(t){return new be((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Mu(t,e){return t.g&&t.h&&function(){var t=s.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Cu(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):Ne()}function Fu(t){return Pu(t).then((function(t){var e=Ru(Du(t,!1));return e.getAll?Lu(e.getAll()):new be((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=hr(t.c,n),t.c=n}return r}))}function Vu(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Uu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Ne().then((function(){if(xu()){var t=Fr(),r="__sak"+t;return wu||(wu=new Au),(n=wu).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){B(e.a,(function(e){e(t)}))})),t}))}function ju(){this.a={},this.type="inMemory"}function qu(){if(!function(){var t="Node"==br();if(!(t=Bu()||t&&Eo.INTERNAL.node&&Eo.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==br())throw new T("internal-error","The LocalStorage compatibility library was not found.");throw new T("web-storage-unsupported")}this.a=Bu()||Eo.INTERNAL.node.localStorage,this.type="localStorage"}function Bu(){try{var t=s.localStorage,e=Fr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Wu(){this.type="nullStorage"}function Hu(){if(!function(){var t="Node"==br();if(!(t=Gu()||t&&Eo.INTERNAL.node&&Eo.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==br())throw new T("internal-error","The SessionStorage compatibility library was not found.");throw new T("web-storage-unsupported")}this.a=Gu()||Eo.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Gu(){try{var t=s.sessionStorage,e=Fr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function zu(){var t={};t.Browser=Yu,t.Node=Xu,t.ReactNative=$u,t.Worker=Ju,this.a=t[br()]}bu.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];B(r,(function(e){i.push(Ne().then((function(){return e(t.origin,t.data.data)})))})),Pe(i).then((function(r){var i=[];B(r,(function(t){i.push({fulfilled:t.Pb,value:t.value,reason:t.reason?t.reason.message:void 0})})),B(i,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},Tu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Su.prototype.close=function(){for(;0<this.a.length;)Nu(this,this.a[0]);this.b=!0},(t=Au.prototype).set=function(t,e){var n=this,r=!1;return Ou(this,(function(e){return Lu((e=Ru(Du(e,!0))).get(t))})).then((function(i){return Ou(n,(function(o){if(o=Ru(Du(o,!0)),i)return i.value=e,Lu(o.put(i));n.b++,r=!0;var s={};return s.fbase_key=t,s.value=e,Lu(o.add(s))}))})).then((function(){return n.c[t]=e,Mu(n,t)})).oa((function(){r&&n.b--}))},t.get=function(t){return Ou(this,(function(e){return Lu(Ru(Du(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.U=function(t){var e=this,n=!1;return Ou(this,(function(r){return n=!0,e.b++,Lu(Ru(Du(r,!0)).delete(t))})).then((function(){return delete e.c[t],Mu(e,t)})).oa((function(){n&&e.b--}))},t.ca=function(t){0==this.a.length&&function(t){function e(){t.f=setTimeout((function(){t.l=Fu(t).then((function(e){0<e.length&&B(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}Vu(t),e()}(this),this.a.push(t)},t.ia=function(t){K(this.a,(function(e){return e==t})),0==this.a.length&&Vu(this)},(t=Uu.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.U=function(t){return this.b.then((function(e){return e.U(t)}))},t.ca=function(t){this.a.push(t)},t.ia=function(t){K(this.a,(function(e){return e==t}))},(t=ju.prototype).get=function(t){return Ne(this.a[t])},t.set=function(t,e){return this.a[t]=e,Ne()},t.U=function(t){return delete this.a[t],Ne()},t.ca=function(){},t.ia=function(){},(t=qu.prototype).get=function(t){var e=this;return Ne().then((function(){return Mr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Ne().then((function(){var r=Dr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return Ne().then((function(){e.a.removeItem(t)}))},t.ca=function(t){s.window&&an(s.window,"storage",t)},t.ia=function(t){s.window&&hn(s.window,"storage",t)},(t=Wu.prototype).get=function(){return Ne(null)},t.set=function(){return Ne()},t.U=function(){return Ne()},t.ca=function(){},t.ia=function(){},(t=Hu.prototype).get=function(t){var e=this;return Ne().then((function(){return Mr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Ne().then((function(){var r=Dr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return Ne().then((function(){e.a.removeItem(t)}))},t.ca=function(){},t.ia=function(){};var Qu,Ku,Yu={F:qu,bb:Hu},Xu={F:qu,bb:Hu},$u={F:_u,bb:Wu},Ju={F:qu,bb:Wu},Zu={rd:"local",NONE:"none",td:"session"};function tc(){var t=!(Vr(Nr())||!mr()),e=Rr(),n=kr();this.m=t,this.h=e,this.l=n,this.a={},Qu||(Qu=new zu),t=Qu;try{this.g=!ar()&&Wr()||!s.indexedDB?new t.a.F:new Uu(_r()?new ju:new t.a.F)}catch(r){this.g=new ju,this.h=!0}try{this.i=new t.a.bb}catch(r){this.i=new ju}this.v=new ju,this.f=_(this.Yb,this),this.b={}}function ec(){return Ku||(Ku=new tc),Ku}function nc(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function rc(t,e){return"firebase:"+t.name+(e?":"+e:"")}function ic(t,e,n){return n=rc(e,n),"local"==e.F&&(t.b[n]=null),nc(t,e.F).U(n)}function oc(t){t.c&&(clearInterval(t.c),t.c=null)}function sc(t){this.a=t,this.b=ec()}(t=tc.prototype).get=function(t,e){return nc(this,t.F).get(rc(t,e))},t.set=function(t,e,n){var r=rc(t,n),i=this,o=nc(this,t.F);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.F&&(i.b[r]=e)}))},t.addListener=function(t,e,n){t=rc(t,e),this.l&&(this.b[t]=s.localStorage.getItem(t)),ft(this.a)&&(nc(this,"local").ca(this.f),this.h||(ar()||!Wr())&&s.indexedDB||!this.l||function(t){oc(t),t.c=setInterval((function(){for(var e in t.a){var n=s.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Ye({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Yb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=rc(t,e),this.a[t]&&(K(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),ft(this.a)&&(nc(this,"local").ia(this.f),oc(this))},t.Yb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=s.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.mb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?nc(this,"local").ia(this.f):oc(this),this.m)if(n=s.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?s.localStorage.setItem(e,r):s.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===s.localStorage.getItem(e)||(o.b[e]=s.localStorage.getItem(e),o.mb(e))},Qt&&se&&10==se&&s.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else B(t,_(this.mb,this))},t.mb=function(t){this.a[t]&&B(this.a[t],(function(t){t()}))};var ac,uc={name:"authEvent",F:"local"};function cc(){this.a=ec()}function hc(t,e){this.b=lc,this.f=s.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=s.Int32Array?new Int32Array(64):Array(64),void 0===ac&&(ac=s.Int32Array?new Int32Array(mc):mc),this.reset()}E(hc,(function(){this.b=-1}));for(var lc=64,fc=lc-1,pc=[],dc=0;dc<fc;dc++)pc[dc]=0;var vc=Y(128,pc);function yc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&h^~c&l)+(0|ac[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function gc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(yc(t),i=0);else{if(!f(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(yc(t),i=0)}}t.c=i,t.g+=n}hc.prototype.reset=function(){this.g=this.c=0,this.a=s.Int32Array?new Int32Array(this.h):X(this.h)};var mc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function _c(){hc.call(this,8,bc)}E(_c,hc);var bc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function wc(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new cc,this.g=new sc(this.h),this.f=null,this.b=[],this.a=this.c=null}function Ec(t){return new T("invalid-cordova-configuration",t)}function Ic(t){var e=new _c;gc(e,t),t=[];var n=8*e.g;56>e.c?gc(e,vc,56-e.c):gc(e,vc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(yc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return H(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}function Tc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(r){}}function Sc(t){return t.f||(t.f=t.ma().then((function(){return new be((function(e){t.Ea((function n(r){return e(r),t.Sa(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),Cc(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=ro(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Mr(Mn(o=Fn(i),"firebaseError")||null))?S(o):null)?new jo(r.c,r.b,null,null,o,null,r.T()):new jo(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}Tc(t,i)}))}var n=new jo("unknown",null,null,null,new T("no-auth-event")),r=!1,i=Tn(500).then((function(){return Cc(t).then((function(){r||Tc(t,n)}))})),o=s.handleOpenURL;s.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Ar("BuildInfo.packageName",s).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(n){console.error(n)}},Ho||(Ho=new Bo),function(t){var e=Ho;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=Ar("universalLinks.subscribe",s))&&t(null,e.b))}(e)}(t)}))}))),t.f}function Cc(t){var e=null;return function(t){return t.b.get(uc,t.a).then((function(t){return qo(t)}))}(t.g).then((function(n){return e=n,ic((n=t.g).b,uc,n.a)})).then((function(){return e}))}function Nc(t){this.a=t,this.b=ec()}(t=wc.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(gr(void 0)?yr().then((function(){return new be((function(t,e){var n=s.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):Ae(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof Ar("universalLinks.subscribe",s))throw Ec("cordova-universal-links-plugin-fix is not installed");if(void 0===Ar("BuildInfo.packageName",s))throw Ec("cordova-plugin-buildinfo is not installed");if("function"!=typeof Ar("cordova.plugins.browsertab.openUrl",s))throw Ec("cordova-plugin-browsertab is not installed");if("function"!=typeof Ar("cordova.InAppBrowser.open",s))throw Ec("cordova-plugin-inappbrowser is not installed")}),(function(){throw new T("cordova-not-ready")}))},t.Ob=function(t,e){return e(new T("operation-not-supported-in-this-environment")),Ne()},t.Mb=function(){return Ae(new T("operation-not-supported-in-this-environment"))},t.$b=function(){return!1},t.Xb=function(){return!0},t.Tb=function(){return!0},t.Nb=function(t,e,n,r){if(this.c)return Ae(new T("redirect-operation-pending"));var i=this,o=s.document,a=null,u=null,c=null,h=null;return this.c=Ne().then((function(){return Uo(e),Sc(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new jo(e,r,null,o,new T("no-auth-event"),null,i),u=Ar("BuildInfo.packageName",s);if("string"!=typeof u)throw new T("invalid-cordova-configuration");var c=Ar("BuildInfo.displayName",s),h={};if(Nr().toLowerCase().match(/iphone|ipad|ipod/))h.ibi=u;else{if(!Nr().toLowerCase().match(/android/))return Ae(new T("operation-not-supported-in-this-environment"));h.apn=u}c&&(h.appDisplayName=c),o=Ic(o),h.sessionId=o;var l=mu(t.v,t.i,t.l,e,n,null,r,t.m,h,t.u,i,t.s);return t.ma().then((function(){var e=t.h;return t.C.a.set(uc,a.w(),e)})).then((function(){var e=Ar("cordova.plugins.browsertab.isAvailable",s);if("function"!=typeof e)throw new T("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=Ar("cordova.plugins.browsertab.openUrl",s)))throw new T("invalid-cordova-configuration");n(l)}else{if("function"!=typeof(n=Ar("cordova.InAppBrowser.open",s)))throw new T("invalid-cordova-configuration");e=Nr(),t.a=n(l,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new be((function(t,e){u=function(){var e=Ar("cordova.plugins.browsertab.close",s);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),c=function(){a||(a=Tn(2e3).then((function(){e(new T("redirect-cancelled-by-user"))})))},h=function(){qr()&&c()},o.addEventListener("resume",c,!1),Nr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",h,!1)})).o((function(t){return Cc(i).then((function(){throw t}))}))})).oa((function(){c&&o.removeEventListener("resume",c,!1),h&&o.removeEventListener("visibilitychange",h,!1),a&&a.cancel(),u&&i.Sa(u),i.c=null}))},t.Ea=function(t){this.b.push(t),Sc(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new jo("unknown",null,null,null,new T("no-auth-event")),t(e))}))},t.Sa=function(t){K(this.b,(function(e){return e==t}))};var Ac={name:"pendingRedirect",F:"session"};function kc(t){return ic(t.b,Ac,t.a)}function Pc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=_(this.s,this),this.b=new Gc,this.C=new Xc,this.g=new Nc(Wc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Oc(this.D,this.v,this.m,C,this.J)}function Oc(t,e,n,r,i){var o=Eo.SDK_VERSION||null;return gr()?new wc(t,e,n,o,r,i):new du(t,e,n,o,r,i)}function xc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o((function(n){throw t.a==e&&t.reset(),n}))}function Rc(t){t.a.Xb()&&xc(t).o((function(e){var n=new jo("unknown",null,null,null,new T("operation-not-supported-in-this-environment"));Uc(e)&&t.s(n)})),t.a.Tb()||zc(t.b)}function Dc(t,e){z(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(Ac,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?kc(t.g).then((function(){xc(t).o((function(e){var n=new jo("unknown",null,null,null,new T("operation-not-supported-in-this-environment"));Uc(e)&&t.s(n)}))})):Rc(t)})).o((function(){Rc(t)}))}function Lc(t,e){K(t.h,(function(t){return t==e}))}Pc.prototype.reset=function(){this.f=!1,this.a.Sa(this.l),this.a=Oc(this.D,this.v,this.m,null,this.J),this.i={}},Pc.prototype.s=function(t){if(!t)throw new T("invalid-auth-event");if(6e5<=w()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Fb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=w())),e=!0;break}}return zc(this.b),e};var Mc=new jr(2e3,1e4),Fc=new jr(3e4,6e4);function Vc(t,e,n,r,i,o,s){return t.a.Mb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,s)}function Uc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function jc(t,e,n,r,i){var o;return function(t){return t.b.set(Ac,"pending",t.a)}(t.g).then((function(){return t.a.Nb(e,n,r,i).o((function(e){if(Uc(e))throw new T("operation-not-supported-in-this-environment");return o=e,kc(t.g).then((function(){throw o}))})).then((function(){return t.a.$b()?new be((function(){})):kc(t.g).then((function(){return t.qa()})).then((function(){})).o((function(){}))}))}))}function qc(t,e,n,r,i){return t.a.Ob(r,(function(t){e.na(n,null,t,i)}),Mc.get())}Pc.prototype.qa=function(){return this.b.qa()};var Bc={};function Wc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Hc(t,e,n,r){var i=Wc(e,n,r);return Bc[i]||(Bc[i]=new Pc(t,e,n,r)),Bc[i]}function Gc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function zc(t){t.g||(t.g=!0,Yc(t,!1,null,null))}function Qc(t){t.g&&!t.i&&Yc(t,!1,null,null)}function Kc(t,e){if(t.b=function(){return Ne(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Yc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Ae(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Kc(t,n):Kc(t,{user:null}),t.f=[],t.c=[]}function Xc(){}function $c(){this.ib=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.ib},set:function(t){this.ib=t},enumerable:!1})}function Jc(t,e){this.a=e,Kr(this,"verificationId",t)}function Zc(t,e,n,r){return new Mo(t).fb(e,n).then((function(t){return new Jc(t,r)}))}function th(t){var e=Wi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new T("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Yr(this,{token:t,expirationTime:Br(1e3*e.exp),authTime:Br(1e3*e.auth_time),issuedAtTime:Br(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function eh(t,e,n){var r=e&&e[rh];if(!r)throw new T("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=pt(e),this.g=n,this.c=new io(null,r),this.b=[];var i=this;B(e[nh]||[],(function(t){(t=Zr(t))&&i.b.push(t)})),Kr(this,"auth",this.a),Kr(this,"session",this.c),Kr(this,"hints",this.b)}Gc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Gc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Yc(this,!0,null,t.a),Ne()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,s=e.T(),a=!!e.c.match(/Redirect$/);n(r,i,s,o).then((function(e){Yc(t,a,e,null)})).o((function(e){Yc(t,a,null,e)}))}(this,t,e):Ae(new T("invalid-auth-event")):(Yc(this,!1,null,null),Ne())}else Ae(new T("invalid-auth-event"))},Gc.prototype.qa=function(){var t=this;return new be((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new T("timeout");t.a&&t.a.cancel(),t.a=Tn(Fc.get()).then((function(){t.b||(t.g=!0,Yc(t,!0,null,e))}))}(t))}))},Xc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),Ne()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then((function(t){e.na(r,t,null,n)})).o((function(t){e.na(r,null,t,n)}))}(t,e):Ae(new T("invalid-auth-event"))}else Ae(new T("invalid-auth-event"))},Jc.prototype.confirm=function(t){return t=Fo(this.verificationId,t),this.a(t)};var nh="mfaInfo",rh="mfaPendingCredential";function ih(t,e,n,r){T.call(this,"multi-factor-auth-required",r,e),this.b=new eh(t,e,n),Kr(this,"resolver",this.b)}function oh(t,e,n){if(t&&d(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new ih(e,t.serverResponse,n,t.message)}catch(r){}return null}function sh(){}function ah(t){Kr(this,"factorId",t.fa),this.a=t}function uh(t){if(ah.call(this,t),this.a.fa!=Mo.PROVIDER_ID)throw new T("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function ch(t,e){for(var n in Ke.call(this,t),e)this[n]=e[n]}function hh(t,e){this.a=t,this.b=[],this.c=_(this.yc,this),an(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&B(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[ni]=t.uid),t.displayName&&(r[ti]=t.displayName),t.enrollmentTime&&(r[ei]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[ri]=t.phoneNumber);try{e=new ii(r)}catch(i){}t=e}else t=null;t&&n.push(t)})),lh(this,n)}function lh(t,e){t.b=e,Kr(t,"enrolledFactors",e)}function fh(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function ph(t,e){t.stop(),t.b=Tn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then((function(){return function(){var t=s.document,e=null;return qr()||!t?Ne():new be((function(n){e=function(){qr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return t.h()})).then((function(){ph(t,!0)})).o((function(e){t.i(e)&&ph(t,!1)}))}function dh(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function vh(t,e){void 0===e&&(t.b?e=(e=t.b).a-e.g:e=0),t.c=Date.now()+1e3*e}function yh(t,e){t.b=Bi(e[Js]||""),t.a=e.refreshToken,vh(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function gh(t,e){return function(t,e){return new be((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?aa(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(ou(t)):t.access_token&&t.refresh_token?n(t):r(new T("internal-error")):r(new T("network-request-failed"))}),"POST",Yn(e).toString(),t.g,t.m.get()):r(new T("internal-error"))}))}(t.f,e).then((function(e){return t.b=Bi(e.access_token),t.a=e.refresh_token,vh(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}function mh(t,e){this.a=t||null,this.b=e||null,Yr(this,{lastSignInTime:Br(e||null),creationTime:Br(t||null)})}function _h(t,e,n,r,i,o){Yr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function bh(t,e,n){this.J=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var r=Eo.SDK_VERSION?Cr(Eo.SDK_VERSION):null;this.a=new Xs(this.l,P(C),r),t.emulatorConfig&&ia(this.a,t.emulatorConfig),this.b=new dh(this.a),Ah(this,e[Js]),yh(this.b,e),Kr(this,"refreshToken",this.b.a),Oh(this,n||{}),_n.call(this),this.R=!1,this.s&&Pr()&&(this.i=Hc(this.s,this.l,this.m)),this.S=[],this.h=null,this.u=function(t){return new fh((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=t.b.c-Date.now()-3e5;return 0<e?e:0}))}(this),this.aa=_(this.hb,this);var i=this;this.ya=null,this.Oa=function(t){i.wa(t.h)},this.ja=null,this.Aa=function(t){ia(i.a,t.c)},this.X=null,this.$=[],this.Ba=function(t){Ih(i,t.f)},this.ba=null,this.O=new hh(this,n),Kr(this,"multiFactor",this.O)}function wh(t,e){t.ja&&hn(t.ja,"languageCodeChanged",t.Oa),(t.ja=e)&&an(e,"languageCodeChanged",t.Oa)}function Eh(t,e){t.X&&hn(t.X,"emulatorConfigChanged",t.Aa),(t.X=e)&&an(e,"emulatorConfigChanged",t.Aa)}function Ih(t,e){t.$=e,sa(t.a,Eo.SDK_VERSION?Cr(Eo.SDK_VERSION,t.$):null)}function Th(t,e){t.ba&&hn(t.ba,"frameworkChanged",t.Ba),(t.ba=e)&&an(e,"frameworkChanged",t.Ba)}function Sh(t){try{return Eo.app(t.m).auth()}catch(e){throw new T("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function Ch(t){t.D||t.u.b||(t.u.start(),hn(t,"tokenChanged",t.aa),an(t,"tokenChanged",t.aa))}function Nh(t){hn(t,"tokenChanged",t.aa),t.u.stop()}function Ah(t,e){t.za=e,Kr(t,"_lat",e)}function kh(t){for(var e=[],n=0;n<t.S.length;n++)e.push(t.S[n](t));return Pe(e).then((function(){return t}))}function Ph(t){t.i&&!t.R&&(t.R=!0,Dc(t.i,t))}function Oh(t,e){Yr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new mh(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function xh(){}function Rh(t){return Ne().then((function(){if(t.D)throw new T("app-deleted")}))}function Dh(t){return H(t.providerData,(function(t){return t.providerId}))}function Lh(t,e){e&&(Mh(t,e.providerId),t.providerData.push(e))}function Mh(t,e){K(t.providerData,(function(t){return t.providerId==e}))}function Fh(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Kr(t,e,n)}function Vh(t,e){t!=e&&(Yr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?Kr(t,"metadata",function(t){return new mh(t.a,t.b)}(e.metadata)):Kr(t,"metadata",new mh),B(e.providerData,(function(e){Lh(t,e)})),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.b,e.b),Kr(t,"refreshToken",t.b.a),lh(t.O,e.O.b))}function Uh(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return ru(t.a,Da,{idToken:e}).then(_(t.Kc,t))}(t,e).then((function(){return n||Fh(t,"isAnonymous",!1),e}))}))}function jh(t,e){e[Js]&&t.za!=e[Js]&&(yh(t.b,e),t.dispatchEvent(new ch("tokenChanged")),Ah(t,e[Js]),Fh(t,"refreshToken",t.b.a))}function qh(t,e){return Uh(t).then((function(){if(z(Dh(t),e))return kh(t).then((function(){throw new T("provider-already-linked")}))}))}function Bh(t,e,n){return Xr({user:t,credential:Vo(e),additionalUserInfo:e=Ki(e),operationType:n})}function Wh(t,e){return jh(t,e),t.reload().then((function(){return t}))}function Hh(t,e,n,r,i){if(!Pr())return Ae(new T("operation-not-supported-in-this-environment"));if(t.h&&!i)return Ae(t.h);var o=Qi(n.providerId),s=Fr(t.uid+":::"),a=null;(!Rr()||mr())&&t.s&&n.isOAuthProvider&&(a=mu(t.s,t.l,t.m,e,n,null,s,Eo.SDK_VERSION||null,null,null,t.tenantId));var u=pr(a,o&&o.ua,o&&o.ta);return r=r().then((function(){if(zh(t),!i)return t.I().then((function(){}))})).then((function(){return Vc(t.i,u,e,n,s,!!a,t.tenantId)})).then((function(){return new be((function(n,r){t.na(e,null,new T("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=s,t.c=qc(t.i,t,e,u,s)}))})).then((function(t){return u&&fr(u),t?Xr(t):null})).o((function(t){throw u&&fr(u),t})),Qh(t,r,i)}function Gh(t,e,n,r,i){if(!Pr())return Ae(new T("operation-not-supported-in-this-environment"));if(t.h&&!i)return Ae(t.h);var o=null,s=Fr(t.uid+":::");return r=r().then((function(){if(zh(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=s,kh(t)})).then((function(e){return t.ha&&(e=(e=t.ha).b.set(Xh,t.w(),e.a)),e})).then((function(){return jc(t.i,e,n,s,t.tenantId)})).o((function(e){if(o=e,t.ha)return $h(t.ha);throw o})).then((function(){if(o)throw o})),Qh(t,r,i)}function zh(t){if(!t.i||!t.R){if(t.i&&!t.R)throw new T("internal-error");throw new T("auth-domain-config-required")}}function Qh(t,e,n){var r=function(t,e,n){return t.h&&!n?(e.cancel(),Ae(t.h)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.h||t.dispatchEvent(new ch("userInvalidated")),t.h=e),e}))}(t,e,n);return t.J.push(r),r.oa((function(){Q(t.J,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=oh(e.w(),Sh(t),_(t.jc,t))),n||e}))}function Kh(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Js]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new bh(e,n,t);return t.providerData&&B(t.providerData,(function(t){t&&Lh(i,Xr(t))})),t.redirectEventId&&(i.ga=t.redirectEventId),i}function Yh(t){this.a=t,this.b=ec()}eh.prototype.Rc=function(t){var e=this;return t.sb(this.a.a,this.c).then((function(t){var n=pt(e.f);return delete n[nh],delete n[rh],vt(n,t),e.g(n)}))},E(ih,T),sh.prototype.sb=function(t,e,n){return e.type==oo?function(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),vt(n,{phoneVerificationInfo:Lo(t.a)}),ru(e,xa,n)}))}(this,t,e,n):function(t,e,n){return n.Ha().then((function(n){return vt(n={mfaPendingCredential:n},{phoneVerificationInfo:Lo(t.a)}),ru(e,Ra,n)}))}(this,t,e)},E(ah,sh),E(uh,ah),E(ch,Ke),(t=hh.prototype).yc=function(t){lh(this,function(t){var e=[];return B(t.mfaInfo||[],(function(t){(t=Zr(t))&&e.push(t)})),e}(t.hd))},t.Rb=function(){return this.a.I().then((function(t){return new io(t,null)}))},t.fc=function(t,e){var n=this,r=this.a.a;return this.Rb().then((function(n){return t.sb(r,n,e)})).then((function(t){return jh(n.a,t),n.a.reload()}))},t.bd=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return ru(r,nu,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=W(e.b,(function(t){return t.uid!=n}));return lh(e,r),jh(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},t.w=function(){return{multiFactor:{enrolledFactors:H(this.b,(function(t){return t.w()}))}}},fh.prototype.start=function(){this.a=this.c,ph(this,!0)},fh.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},dh.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},dh.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Ae(new T("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?gh(this,{grant_type:"refresh_token",refresh_token:this.a}):Ne(null):Ne({accessToken:this.b.toString(),refreshToken:this.a})},mh.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},E(bh,_n),bh.prototype.wa=function(t){this.ya=t,ra(this.a,t)},bh.prototype.la=function(){return this.ya},bh.prototype.Ga=function(){return X(this.$)},bh.prototype.hb=function(){this.u.b&&(this.u.stop(),this.u.start())},Kr(bh.prototype,"providerId","firebase"),(t=bh.prototype).reload=function(){var t=this;return Qh(this,Rh(this).then((function(){return Uh(t).then((function(){return kh(t)})).then(xh)})))},t.oc=function(t){return this.I(t).then((function(t){return new th(t)}))},t.I=function(t){var e=this;return Qh(this,Rh(this).then((function(){return e.b.getToken(t)})).then((function(t){if(!t)throw new T("internal-error");return t.accessToken!=e.za&&(Ah(e,t.accessToken),e.dispatchEvent(new ch("tokenChanged"))),Fh(e,"refreshToken",t.refreshToken),t.accessToken})))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new T("internal-error");Oh(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?H(t,(function(t){return new _h(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)Lh(this,e[n]);Fh(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new ch("userReloaded",{hd:t}))},t.Lc=function(t){return zr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.tb(t)},t.tb=function(t){var e=this,n=null;return Qh(this,t.c(this.a,this.uid).then((function(t){return jh(e,t),n=Bh(e,t,"reauthenticate"),e.h=null,e.reload()})).then((function(){return n})),!0)},t.Cc=function(t){return zr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.qb(t)},t.qb=function(t){var e=this,n=null;return Qh(this,qh(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=Bh(e,t,"link"),Wh(e,t)})).then((function(){return n})))},t.Dc=function(t,e){var n=this;return Qh(this,qh(this,"phone").then((function(){return Zc(Sh(n),t,e,_(n.qb,n))})))},t.Mc=function(t,e){var n=this;return Qh(this,Ne().then((function(){return Zc(Sh(n),t,e,_(n.tb,n))})),!0)},t.Bb=function(t){var e=this;return Qh(this,this.I().then((function(n){return e.a.Bb(n,t)})).then((function(t){return jh(e,t),e.reload()})))},t.ed=function(t){var e=this;return Qh(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return jh(e,t),e.reload()})))},t.Cb=function(t){var e=this;return Qh(this,this.I().then((function(n){return e.a.Cb(n,t)})).then((function(t){return jh(e,t),e.reload()})))},t.Db=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Rh(this);var e=this;return Qh(this,this.I().then((function(n){return e.a.Db(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return jh(e,t),Fh(e,"displayName",t.displayName||null),Fh(e,"photoURL",t.photoUrl||null),B(e.providerData,(function(t){"password"===t.providerId&&(Kr(t,"displayName",e.displayName),Kr(t,"photoURL",e.photoURL))})),kh(e)})).then(xh))},t.cd=function(t){var e=this;return Qh(this,Uh(this).then((function(n){return z(Dh(e),t)?function(t,e,n){return ru(t,ka,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return B(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),B(Dh(e),(function(t){n[t]||Mh(e,t)})),n[Mo.PROVIDER_ID]||Kr(e,"phoneNumber",null),kh(e)})):kh(e).then((function(){throw new T("no-such-provider")}))})))},t.delete=function(){var t=this;return Qh(this,this.I().then((function(e){return ru(t.a,Aa,{idToken:e})})).then((function(){t.dispatchEvent(new ch("userDeleted"))}))).then((function(){for(var e=0;e<t.J.length;e++)t.J[e].cancel("app-deleted");wh(t,null),Eh(t,null),Th(t,null),t.J=[],t.D=!0,Nh(t),Kr(t,"refreshToken",null),t.i&&Lc(t.i,t)}))},t.Fb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?_(this.Kb,this):"reauthViaPopup"==t&&e==(this.g||null)?_(this.Lb,this):"linkViaRedirect"==t&&(this.ga||null)==e?_(this.Kb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?_(this.Lb,this):null},t.Ec=function(t){var e=this;return Hh(this,"linkViaPopup",t,(function(){return qh(e,t.providerId).then((function(){return kh(e)}))}),!1)},t.Nc=function(t){return Hh(this,"reauthViaPopup",t,(function(){return Ne()}),!0)},t.Fc=function(t){var e=this;return Gh(this,"linkViaRedirect",t,(function(){return qh(e,t.providerId)}),!1)},t.Oc=function(t){return Gh(this,"reauthViaRedirect",t,(function(){return Ne()}),!0)},t.Kb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Qh(this,this.I().then((function(n){return wa(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=Bh(i,t,"link"),Wh(i,t)})).then((function(){return o})))},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Qh(this,Ne().then((function(){return uo(Ea(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=Bh(i,t,"reauthenticate"),jh(i,t),i.h=null,i.reload()})).then((function(){return o})),!0)},t.ub=function(t){var e=this,n=null;return Qh(this,this.I().then((function(e){return n=e,void 0===t||ft(t)?{}:Vi(new Ai(t))})).then((function(t){return e.a.ub(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.Eb=function(t,e){var n=this,r=null;return Qh(this,this.I().then((function(t){return r=t,void 0===e||ft(e)?{}:Vi(new Ai(e))})).then((function(e){return n.a.Eb(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},t.jc=function(t){var e=null,n=this;return Qh(this,t=uo(Ne(t),n.uid).then((function(t){return e=Bh(n,t,"reauthenticate"),jh(n,t),n.h=null,n.reload()})).then((function(){return e})),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&vt(t,this.metadata.w()),B(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),vt(t,this.O.w()),t};var Xh={name:"redirectUser",F:"session"};function $h(t){return ic(t.b,Xh,t.a)}function Jh(t){this.a=t,this.b=ec(),this.c=null,this.f=function(t){var e=el("local"),n=el("session"),r=el("none");return function(t,e,n){var r=rc(e,n),i=nc(t,e.F);return t.get(e,n).then((function(o){var a=null;try{a=Mr(s.localStorage.getItem(r))}catch(u){}if(a&&!o)return s.localStorage.removeItem(r),t.set(e,a,n);a&&o&&"localStorage"!=i.type&&s.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(tl,t.a).then((function(t){return t?el(t):e}))}))}))})).then((function(e){return t.c=e,Zh(t,e.F)})).o((function(){t.c||(t.c=e)}))}(this),this.b.addListener(el("local"),this.a,_(this.g,this))}function Zh(t,e){var n,r=[];for(n in Zu)Zu[n]!==e&&r.push(ic(t.b,el(Zu[n]),t.a));return r.push(ic(t.b,tl,t.a)),function(t){return new be((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},s=function(t){n(t)},a=0;a<t.length;a++)ke(t[a],b(o,a),s);else e(i)}))}(r)}Jh.prototype.g=function(){var t=this,e=el("local");ol(this,(function(){return Ne().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return Zh(t,"local").then((function(){t.c=e}))}))}))};var tl={name:"persistence",F:"session"};function el(t){return{name:"authUser",F:t}}function nl(t,e){return ol(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function rl(t){return ol(t,(function(){return ic(t.b,t.c,t.a)}))}function il(t,e,n){return ol(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Kh(t||{})}))}))}function ol(t,e){return t.f=t.f.then(e,e),t.f}function sl(t){if(this.l=!1,Kr(this,"settings",new $c),Kr(this,"app",t),!vl(this).options||!vl(this).options.apiKey)throw new T("invalid-api-key");t=Eo.SDK_VERSION?Cr(Eo.SDK_VERSION):null,this.a=new Xs(vl(this).options&&vl(this).options.apiKey,P(C),t),this.R=[],this.s=[],this.O=[],this.hb=Eo.INTERNAL.createSubscribe(_(this.zc,this)),this.X=void 0,this.bc=Eo.INTERNAL.createSubscribe(_(this.Ac,this)),pl(this,null),this.i=new Jh(vl(this).options.apiKey+":"+vl(this).name),this.D=new Yh(vl(this).options.apiKey+":"+vl(this).name),this.$=_l(this,function(t){var e=vl(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Xh,t.a).then((function(t){return t&&e&&(t.authDomain=e),Kh(t||{})}))}(t.D,vl(t).options.authDomain).then((function(e){return(t.m=e)&&(e.ha=t.D),$h(t.D)}));return _l(t,e)}(t).then((function(){return il(t.i,e,t.P)})).then((function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then((function(){return nl(t.i,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:rl(t.i)}))):null})).then((function(e){pl(t,e||null)}));return _l(t,n)}(this)),this.h=_l(this,function(t){return t.$.then((function(){return ll(t)})).o((function(){})).then((function(){if(!t.l)return t.ja()})).o((function(){})).then((function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(el("local"),e.a,t.ja)}}))}(this)),this.ba=!1,this.ja=_(this.Zc,this),this.Ba=_(this.da,this),this.ya=_(this.mc,this),this.za=_(this.wc,this),this.Aa=_(this.xc,this),this.b=null,function(t){var e=vl(t).options.authDomain,n=vl(t).options.apiKey;e&&Pr()&&(t.Oa=t.$.then((function(){if(!t.l){if(t.b=Hc(e,n,vl(t).name,t.P),Dc(t.b,t),yl(t)&&Ph(yl(t)),t.m){Ph(t.m);var r=t.m;r.wa(t.la()),wh(r,t),Ih(r=t.m,t.J),Th(r,t),ia((r=t.m).a,t.P),Eh(r,t),t.m=null}return t.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=_(this.delete,this),this.INTERNAL.logFramework=_(this.Gc,this),this.u=0,_n.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.yb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.P){var t=Fn(this.P.url);t=Xr({protocol:t.c,host:t.a,port:t.g,options:Xr({disableWarnings:this.P.ec})})}else t=null;return t},enumerable:!1})}(this),this.J=[],this.P=null}function al(t){Ke.call(this,"languageCodeChanged"),this.h=t}function ul(t){Ke.call(this,"emulatorConfigChanged"),this.c=t}function cl(t){Ke.call(this,"frameworkChanged"),this.f=t}function hl(t){return t.Oa||Ae(new T("auth-domain-config-required"))}function ll(t){if(!Pr())return Ae(new T("operation-not-supported-in-this-environment"));var e=hl(t).then((function(){return t.b.qa()})).then((function(t){return t?Xr(t):null}));return _l(t,e)}function fl(t,e){var n={};return n.apiKey=vl(t).options.apiKey,n.authDomain=vl(t).options.authDomain,n.appName=vl(t).name,t.P&&(n.emulatorConfig=t.P),t.$.then((function(){return function(t,e,n,r){var i=new bh(t,e);return n&&(i.ha=n),r&&Ih(i,r),i.reload().then((function(){return i}))}(n,e,t.D,t.Ga())})).then((function(e){return yl(t)&&e.uid==yl(t).uid?(Vh(yl(t),e),t.da(e)):(pl(t,e),Ph(e),t.da(e))})).then((function(){ml(t)}))}function pl(t,e){yl(t)&&(function(t,e){K(t.S,(function(t){return t==e}))}(yl(t),t.Ba),hn(yl(t),"tokenChanged",t.ya),hn(yl(t),"userDeleted",t.za),hn(yl(t),"userInvalidated",t.Aa),Nh(yl(t))),e&&(e.S.push(t.Ba),an(e,"tokenChanged",t.ya),an(e,"userDeleted",t.za),an(e,"userInvalidated",t.Aa),0<t.u&&Ch(e)),Kr(t,"currentUser",e),e&&(e.wa(t.la()),wh(e,t),Ih(e,t.J),Th(e,t),ia(e.a,t.P),Eh(e,t))}function dl(t,e){var n=null,r=null;return _l(t,e.then((function(e){return n=Vo(e),r=Ki(e),fl(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=oh(e.w(),t,_(t.kc,t))),n||e})).then((function(){return Xr({user:yl(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function vl(t){return t.app}function yl(t){return t.currentUser}function gl(t){return yl(t)&&yl(t)._lat||null}function ml(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](gl(t));if(t.X!==t.getUid()&&t.O.length)for(t.X=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e](gl(t))}}function _l(t,e){return t.R.push(e),e.oa((function(){Q(t.R,e)})),e}function bl(){}function wl(){this.a={},this.b=1e12}Jh.prototype.xb=function(t){var e=null,n=this;return function(t){var e=new T("invalid-persistence-type"),n=new T("unsupported-persistence-type");t:{for(r in Zu)if(Zu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(br()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!xu()&&"none"!==t)throw n;break;default:if(!kr()&&"none"!==t)throw n}}(t),ol(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(r){return e=r,Zh(n,t)})).then((function(){if(n.c=el(t),e)return n.b.set(n.c,e,n.a)})):Ne()}))},E(sl,_n),E(al,Ke),E(ul,Ke),E(cl,Ke),(t=sl.prototype).xb=function(t){return _l(this,t=this.i.xb(t))},t.wa=function(t){this.aa===t||this.l||(this.aa=t,ra(this.a,this.aa),this.dispatchEvent(new al(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=s.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.P){if(!/^https?:\/\//.test(t))throw new T("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(t){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),s.document&&!t&&yr().then((function(){var t=s.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#ff0000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),s.document.body.appendChild(t)}))})(e=!!e&&!!e.disableWarnings),this.P={url:t,ec:e},this.settings.ib=!0,ia(this.a,this.P),this.dispatchEvent(new ul(this.P))}},t.Gc=function(t){this.J.push(t),sa(this.a,Eo.SDK_VERSION?Cr(Eo.SDK_VERSION,this.J):null),this.dispatchEvent(new cl(this.J))},t.Ga=function(){return X(this.J)},t.yb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:vl(this).options.apiKey,authDomain:vl(this).options.authDomain,appName:vl(this).name,currentUser:yl(this)&&yl(this).w()}},t.Fb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?_(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return dl(i,ba(i.a,o))}))},t.Xc=function(t){if(!Pr())return Ae(new T("operation-not-supported-in-this-environment"));var e=this,n=Qi(t.providerId),r=Fr(),i=null;(!Rr()||mr())&&vl(this).options.authDomain&&t.isOAuthProvider&&(i=mu(vl(this).options.authDomain,vl(this).options.apiKey,vl(this).name,"signInViaPopup",t,null,r,Eo.SDK_VERSION||null,null,null,this.T(),this.P));var o=pr(i,n&&n.ua,n&&n.ta);return _l(this,n=hl(this).then((function(n){return Vc(n,o,"signInViaPopup",t,r,!!i,e.T())})).then((function(){return new be((function(t,n){e.na("signInViaPopup",null,new T("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=r,e.c=qc(e.b,e,"signInViaPopup",o,r)}))})).then((function(t){return o&&fr(o),t?Xr(t):null})).o((function(t){throw o&&fr(o),t})))},t.Yc=function(t){if(!Pr())return Ae(new T("operation-not-supported-in-this-environment"));var e=this;return _l(this,hl(this).then((function(){return function(t){return ol(t,(function(){return t.b.set(tl,t.c.F,t.a)}))}(e.i)})).then((function(){return jc(e.b,"signInViaRedirect",t,void 0,e.T())})))},t.qa=function(){var t=this;return ll(this).then((function(e){return t.b&&Qc(t.b.b),e})).o((function(e){throw t.b&&Qc(t.b.b),e}))},t.dd=function(t){if(!t)return Ae(new T("null-user"));if(this.S!=t.tenantId)return Ae(new T("tenant-id-mismatch"));var e=this,n={};n.apiKey=vl(this).options.apiKey,n.authDomain=vl(this).options.authDomain,n.appName=vl(this).name;var r=function(t,e,n,r){var i=t.b,o={};return o[Js]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new bh(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&Ih(e,r),Vh(e,t),e}(t,n,e.D,e.Ga());return _l(this,this.h.then((function(){if(vl(e).options.apiKey!=t.l)return r.reload()})).then((function(){return yl(e)&&t.uid==yl(e).uid?(Vh(yl(e),t),e.da(t)):(pl(e,r),Ph(r),e.da(r))})).then((function(){ml(e)})))},t.Ab=function(){var t=this;return _l(this,this.h.then((function(){return t.b&&Qc(t.b.b),yl(t)?(pl(t,null),rl(t.i).then((function(){ml(t)}))):Ne()})))},t.Zc=function(){var t=this;return il(this.i,vl(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=yl(t)&&e){n=yl(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Vh(yl(t),e),yl(t).I();(yl(t)||e)&&(pl(t,e),e&&(Ph(e),e.ha=t.D),t.b&&Dc(t.b,t),ml(t))}}))},t.da=function(t){return nl(this.i,t)},t.mc=function(){ml(this),this.da(yl(this))},t.wc=function(){this.Ab()},t.xc=function(){this.Ab()},t.kc=function(t){var e=this;return this.h.then((function(){return dl(e,Ne(t))}))},t.zc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(yl(e))}))},t.Ac=function(t){var e=this;!function(t,e){t.O.push(e),_l(t,t.h.then((function(){!t.l&&z(t.O,e)&&t.X!==t.getUid()&&(t.X=t.getUid(),e(gl(t)))})))}(this,(function(){t.next(yl(e))}))},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"==typeof t?t(yl(r)):"function"==typeof t.next&&t.next(yl(r))})),this.hb(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.X=r.getUid(),"function"==typeof t?t(yl(r)):"function"==typeof t.next&&t.next(yl(r))})),this.bc(t,e,n)},t.nc=function(t){var e=this;return _l(this,this.h.then((function(){return yl(e)?yl(e).I(t).then((function(t){return{accessToken:t}})):null})))},t.Tc=function(t){var e=this;return this.h.then((function(){return dl(e,ru(e.a,$a,{token:t}))})).then((function(t){var n=t.user;return Fh(n,"isAnonymous",!1),e.da(n),t}))},t.Uc=function(t,e){var n=this;return this.h.then((function(){return dl(n,ru(n.a,Ja,{email:t,password:e}))}))},t.dc=function(t,e){var n=this;return this.h.then((function(){return dl(n,ru(n.a,Ca,{email:t,password:e}))}))},t.$a=function(t){var e=this;return this.h.then((function(){return dl(e,t.ka(e.a))}))},t.Sc=function(t){return zr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.$a(t)},t.zb=function(){var t=this;return this.h.then((function(){var e=yl(t);if(e&&e.isAnonymous){var n=Xr({providerId:null,isNewUser:!1});return Xr({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return dl(t,t.a.zb()).then((function(e){var n=e.user;return Fh(n,"isAnonymous",!0),t.da(n),e}))}))},t.getUid=function(){return yl(this)&&yl(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&yl(this)&&Ch(yl(this))},t.Pc=function(t){var e=this;B(this.s,(function(n){n==t&&e.u--})),0>this.u&&(this.u=0),0==this.u&&yl(this)&&Nh(yl(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),_l(this,this.h.then((function(){e.l||z(e.s,t)&&t(gl(e))})))},t.removeAuthTokenListener=function(t){K(this.s,(function(e){return e==t}))},t.delete=function(){this.l=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.i&&(t=this.i).b.removeListener(el("local"),t.a,this.ja),this.b&&(Lc(this.b,this),Qc(this.b.b)),Promise.resolve()},t.hc=function(t){return _l(this,function(t,e){return ru(t,Na,{identifier:e,continueUri:Or()?ur():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.a,t))},t.Bc=function(t){return!!xo(t)},t.wb=function(t,e){var n=this;return _l(this,Ne().then((function(){var t=new Ai(e);if(!t.c)throw new T("argument-error",Oi+" must be true when sending sign in link to email");return Vi(t)})).then((function(e){return n.a.wb(t,e)})).then((function(){})))},t.jd=function(t){return this.Ra(t).then((function(t){return t.data.email}))},t.nb=function(t,e){return _l(this,this.a.nb(t,e).then((function(){})))},t.Ra=function(t){return _l(this,this.a.Ra(t).then((function(t){return new oi(t)})))},t.jb=function(t){return _l(this,this.a.jb(t).then((function(){})))},t.vb=function(t,e){var n=this;return _l(this,Ne().then((function(){return void 0===e||ft(e)?{}:Vi(new Ai(e))})).then((function(e){return n.a.vb(t,e)})).then((function(){})))},t.Wc=function(t,e){return _l(this,Zc(this,t,e,_(this.$a,this)))},t.Vc=function(t,e){var n=this;return _l(this,Ne().then((function(){var r=e||ur(),i=Oo(t,r);if(!(r=xo(r)))throw new T("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new T("tenant-id-mismatch");return n.$a(i)})))},bl.prototype.render=function(){},bl.prototype.reset=function(){},bl.prototype.getResponse=function(){},bl.prototype.execute=function(){};var El=null;function Il(t,e){return(e=Tl(e))&&t.a[e]||null}function Tl(t){return(t=void 0===t?1e12:t)?t.toString():null}function Sl(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ue(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():an(this.f,"click",this.i)}function Cl(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function Nl(){}function Al(){}wl.prototype.render=function(t,e){return this.a[this.b.toString()]=new Sl(t,e),this.b++},wl.prototype.reset=function(t){var e=Il(this,t);t=Tl(t),e&&t&&(e.delete(),delete this.a[t])},wl.prototype.getResponse=function(t){return(t=Il(this,t))?t.getResponse():null},wl.prototype.execute=function(t){(t=Il(this,t))&&t.execute()},Sl.prototype.getResponse=function(){return Cl(this),this.b},Sl.prototype.execute=function(){Cl(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(r){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(r){}t.h&&t.execute()}),6e4)}),500))},Sl.prototype.delete=function(){Cl(this),this.g=!0,clearTimeout(this.a),this.a=null,hn(this.f,"click",this.i)},Kr(Nl,"FACTOR_ID","phone"),Al.prototype.g=function(){return El||(El=new wl),Ne(El)},Al.prototype.c=function(){};var kl=null;function Pl(){this.b=s.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Ol=new gt(wt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),xl=new jr(3e4,6e4);Pl.prototype.g=function(t){var e=this;return new be((function(n,r){var i=setTimeout((function(){r(new T("network-request-failed"))}),xl.get());!s.grecaptcha||t!==e.f&&!e.b?(s[e.a]=function(){if(s.grecaptcha){e.f=t;var o=s.grecaptcha.render;s.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(s.grecaptcha)}else clearTimeout(i),r(new T("internal-error"));delete s[e.a]},Ne(Ws(St(Ol,{onload:e.a,hl:t||""}))).o((function(){clearTimeout(i),r(new T("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(s.grecaptcha))}))},Pl.prototype.c=function(){this.b--};var Rl=null;function Dl(t,e,n,r,i,o,a){if(Kr(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.v=e,this.g=null,a?(kl||(kl=new Al),a=kl):(Rl||(Rl=new Pl),a=Rl),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Fl])throw new T("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Vl],!s.document)throw new T("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ue(e)||!this.i&&ue(e).hasChildNodes())throw new T("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Xs(t,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var c=this.a[Ll];this.a[Ll]=function(t){if(Ul(u,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=Ar(c,s);"function"==typeof e&&e(t)}};var h=this.a[Ml];this.a[Ml]=function(){if(Ul(u,null),"function"==typeof h)h();else if("string"==typeof h){var t=Ar(h,s);"function"==typeof t&&t()}}}var Ll="callback",Ml="expired-callback",Fl="sitekey",Vl="size";function Ul(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(r){}}function jl(t,e){return t.h.push(e),e.oa((function(){Q(t.h,e)})),e}function ql(t){if(t.D)throw new T("internal-error","RecaptchaVerifier instance has been destroyed.")}function Bl(t,e,n){var r=!1;try{this.b=n||Eo.app()}catch(s){throw new T("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new T("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(s){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(s){}o=Eo.SDK_VERSION?Cr(Eo.SDK_VERSION,o):null,Dl.call(this,n,t,e,(function(){try{var t=i.b.auth().la()}catch(e){t=null}return t}),o,P(C),r)}function Wl(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new T("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=Hl.length)throw new T("internal-error","Argument validator received an unsupported number of arguments.");n=Hl[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new T("argument-error",t+" failed: "+r)}(t=Dl.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=jl(this,Ne().then((function(){if(Or()&&!_r())return yr();throw new T("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.u())})).then((function(e){return t.g=e,ru(t.s,ja,{})})).then((function(e){t.a[Fl]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},t.render=function(){ql(this);var t=this;return jl(this,this.Ia().then((function(){if(null===t.c){var e=t.v;if(!t.i){var n=ue(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!ae&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',Bt(s.name),'"'),s.type){o.push(' type="',Bt(s.type),'"');var a={};vt(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=de(i,o),s&&("string"==typeof s?o.className=s:Array.isArray(s)?o.className=s.join(" "):ce(o,s)),2<r.length&&pe(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){ql(this);var t=this;return jl(this,this.render().then((function(e){return new be((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){K(t.l,(function(t){return t==e}))}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},t.reset=function(){ql(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){ql(this),this.D=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=ue(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},E(Bl,Dl);var Hl="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Gl(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"==typeof t}}}function zl(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"==typeof t}}}function Ql(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:d}}function Kl(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"==typeof t}}}function Yl(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function Xl(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ka||!n)}}}function $l(t,e){return d(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Jl(t){return d(t)&&"string"==typeof t.uid}function Zl(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function tf(t,e){for(var n in e){var r=e[n].name;t[r]=rf(r,t[n],e[n].j)}}function ef(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:b((function(t){return this[t]}),n),set:b((function(t,e,n,r){Wl(t,[n],[r],!0),this[e]=r}),r,n,e[n].kb),enumerable:!0})}}function nf(t,e,n,r){t[e]=rf(e,n,r)}function rf(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Wl(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}tf(sl.prototype,{jb:{name:"applyActionCode",j:[Gl("code")]},Ra:{name:"checkActionCode",j:[Gl("code")]},nb:{name:"confirmPasswordReset",j:[Gl("code"),Gl("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Gl("email"),Gl("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Gl("email")]},qa:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Gl("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Zl(Ql(),Kl(),"nextOrObserver"),Kl("opt_error",!0),Kl("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Zl(Ql(),Kl(),"nextOrObserver"),Kl("opt_error",!0),Kl("opt_completed",!0)]},vb:{name:"sendPasswordResetEmail",j:[Gl("email"),Zl(Ql("opt_actionCodeSettings",!0),Yl(null,!0),"opt_actionCodeSettings",!0)]},wb:{name:"sendSignInLinkToEmail",j:[Gl("email"),Ql("actionCodeSettings")]},xb:{name:"setPersistence",j:[Gl("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[Xl()]},zb:{name:"signInAnonymously",j:[]},$a:{name:"signInWithCredential",j:[Xl()]},Tc:{name:"signInWithCustomToken",j:[Gl("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Gl("email"),Gl("password")]},Vc:{name:"signInWithEmailLink",j:[Gl("email"),Gl("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Gl("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[Zl({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof bh)}},Yl(),"user")]},Ab:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Gl(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Gl("url"),Ql("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Gl("code")]}}),ef(sl.prototype,{lc:{name:"languageCode",kb:Zl(Gl(),Yl(),"languageCode")},ti:{name:"tenantId",kb:Zl(Gl(),Yl(),"tenantId")}}),sl.Persistence=Zu,sl.Persistence.LOCAL="local",sl.Persistence.SESSION="session",sl.Persistence.NONE="none",tf(bh.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[zl("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[zl("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[Xl()]},qb:{name:"linkWithCredential",j:[Xl()]},Dc:{name:"linkWithPhoneNumber",j:[Gl("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Xl()]},tb:{name:"reauthenticateWithCredential",j:[Xl()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Gl("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},ub:{name:"sendEmailVerification",j:[Zl(Ql("opt_actionCodeSettings",!0),Yl(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Gl(null,!0)]},cd:{name:"unlink",j:[Gl("provider")]},Bb:{name:"updateEmail",j:[Gl("email")]},Cb:{name:"updatePassword",j:[Gl("password")]},ed:{name:"updatePhoneNumber",j:[Xl("phone")]},Db:{name:"updateProfile",j:[Ql("profile")]},Eb:{name:"verifyBeforeUpdateEmail",j:[Gl("email"),Zl(Ql("opt_actionCodeSettings",!0),Yl(null,!0),"opt_actionCodeSettings",!0)]}}),tf(wl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),tf(bl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),tf(be.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),ef($c.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",kb:zl("appVerificationDisabledForTesting")}}),tf(Jc.prototype,{confirm:{name:"confirm",j:[Gl("verificationCode")]}}),nf(ao,"fromJSON",(function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[vo,ko,Do,lo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[Zl(Gl(),Ql(),"json")]),nf(Po,"credential",(function(t,e){return new Ao(t,e)}),[Gl("email"),Gl("password")]),tf(Ao.prototype,{w:{name:"toJSON",j:[Gl(null,!0)]}}),tf(_o.prototype,{Ca:{name:"addScope",j:[Gl("scope")]},Ka:{name:"setCustomParameters",j:[Ql("customOAuthParameters")]}}),nf(_o,"credential",bo,[Zl(Gl(),Ql(),"token")]),nf(Po,"credentialWithLink",Oo,[Gl("email"),Gl("emailLink")]),tf(wo.prototype,{Ca:{name:"addScope",j:[Gl("scope")]},Ka:{name:"setCustomParameters",j:[Ql("customOAuthParameters")]}}),nf(wo,"credential",Io,[Zl(Gl(),Ql(),"token")]),tf(To.prototype,{Ca:{name:"addScope",j:[Gl("scope")]},Ka:{name:"setCustomParameters",j:[Ql("customOAuthParameters")]}}),nf(To,"credential",So,[Zl(Gl(),Zl(Ql(),Yl()),"idToken"),Zl(Gl(),Yl(),"accessToken",!0)]),tf(Co.prototype,{Ka:{name:"setCustomParameters",j:[Ql("customOAuthParameters")]}}),nf(Co,"credential",No,[Zl(Gl(),Ql(),"token"),Gl("secret",!0)]),tf(mo.prototype,{Ca:{name:"addScope",j:[Gl("scope")]},credential:{name:"credential",j:[Zl(Gl(),Zl(Ql(),Yl()),"optionsOrIdToken"),Zl(Gl(),Yl(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Ql("customOAuthParameters")]}}),tf(fo.prototype,{w:{name:"toJSON",j:[Gl(null,!0)]}}),tf(co.prototype,{w:{name:"toJSON",j:[Gl(null,!0)]}}),nf(Mo,"credential",Fo,[Gl("verificationId"),Gl("verificationCode")]),tf(Mo.prototype,{fb:{name:"verifyPhoneNumber",j:[Zl(Gl(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?$l(t.session,oo)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?$l(t.session,so)&&Jl(t.multiFactorHint):t.session&&t.multiFactorUid?$l(t.session,so)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),tf(Ro.prototype,{w:{name:"toJSON",j:[Gl(null,!0)]}}),tf(T.prototype,{toJSON:{name:"toJSON",j:[Gl(null,!0)]}}),tf(zo.prototype,{toJSON:{name:"toJSON",j:[Gl(null,!0)]}}),tf(Go.prototype,{toJSON:{name:"toJSON",j:[Gl(null,!0)]}}),tf(ih.prototype,{toJSON:{name:"toJSON",j:[Gl(null,!0)]}}),tf(eh.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}}]}}),tf(hh.prototype,{Rb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}},Gl("displayName",!0)]},bd:{name:"unenroll",j:[Zl({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Jl},Gl(),"multiFactorInfoIdentifier")]}}),tf(Bl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),nf(_i,"parseLink",Ni,[Gl("link")]),nf(Nl,"assertion",(function(t){return new uh(t)}),[Xl("phone")]),function(){if(void 0===Eo||!Eo.INTERNAL||!Eo.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ai,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:si,VERIFY_AND_CHANGE_EMAIL:ui,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:sl,AuthCredential:ao,Error:T};nf(t,"EmailAuthProvider",Po,[]),nf(t,"FacebookAuthProvider",_o,[]),nf(t,"GithubAuthProvider",wo,[]),nf(t,"GoogleAuthProvider",To,[]),nf(t,"TwitterAuthProvider",Co,[]),nf(t,"OAuthProvider",mo,[Gl("providerId")]),nf(t,"SAMLAuthProvider",go,[Gl("providerId")]),nf(t,"PhoneAuthProvider",Mo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof sl)}}]),nf(t,"RecaptchaVerifier",Bl,[Zl(Gl(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Ql("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof Eo.app.App)}}]),nf(t,"ActionCodeURL",_i,[]),nf(t,"PhoneMultiFactorGenerator",Nl,[]),Eo.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new sl(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),Eo.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:_((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:_(t.nc,t),addAuthTokenListener:_(t.cc,t),removeAuthTokenListener:_(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),Eo.registerVersion("@firebase/auth","0.16.3"),Eo.INTERNAL.extendNamespace({User:bh})}()}.apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Io,To=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),xi(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Oi(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),So=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Di(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),Co=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new To(e)}}catch(uI){}return new So},No=Co("localStorage"),Ao=Co("sessionStorage"),ko=new so("@firebase/database"),Po=(Io=1,function(){return Io++}),Oo=function(t){var e=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var o=i-55296;r++,di(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),n=new Vi;n.update(e);var r=n.digest();return gi.encodeByteArray(r)},xo=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=xo.apply(null,i):n+="object"==typeof i?xi(i):i,n+=" "}return n},Ro=null,Do=!0,Lo=function(t,e){di(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(ko.logLevel=Ji.VERBOSE,Ro=ko.log.bind(ko),e&&Ao.set("logging_enabled",!0)):"function"==typeof t?Ro=t:(Ro=null,Ao.remove("logging_enabled"))},Mo=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===Do&&(Do=!1,null===Ro&&!0===Ao.get("logging_enabled")&&Lo(!0)),Ro){var n=xo.apply(null,t);Ro(n)}},Fo=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Mo.apply(void 0,hi([t],e))}},Vo=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+xo.apply(void 0,hi(t));ko.error(n)},Uo=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+xo.apply(void 0,hi(t));throw ko.error(n),new Error(n)},jo=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+xo.apply(void 0,hi(t));ko.warn(n)},qo=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Bo="[MIN_NAME]",Wo="[MAX_NAME]",Ho=function(t,e){if(t===e)return 0;if(t===Bo||e===Wo)return-1;if(e===Bo||t===Wo)return 1;var n=Jo(t),r=Jo(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},Go=function(t,e){return t===e?0:t<e?-1:1},zo=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+xi(e))},Qo=function(t){if("object"!=typeof t||null===t)return xi(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=xi(e[i]),r+=":",r+=Qo(t[e[i]]);return r+="}"},Ko=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yo(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var Xo=function(t){di(!qo(t),"Invalid JSON number");var e,n,r,i,o,s=1023;0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),s))+s,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(o=52;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(o=0;o<64;o+=8){var h=parseInt(u.substr(o,8),2).toString(16);1===h.length&&(h="0"+h),c+=h}return c.toLowerCase()},$o=new RegExp("^-?(0*)\\d{1,10}$"),Jo=function(t){if($o.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},Zo=function(t){try{t()}catch(uI){setTimeout((function(){var e=uI.stack||"";throw jo("Exception was thrown by user callback.",e),uI}),Math.floor(0))}},ts=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},es=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return Object.defineProperty(t,"Empty",{get:function(){return new t("")},enumerable:!1,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},t.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)e.push(this.pieces_[n]);return new t(e,0)},t.prototype.child=function(e){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(e instanceof t)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new t(n,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,n){var r=e.getFront(),i=n.getFront();if(null===r)return n;if(r===i)return t.relativePath(e.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")},t.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=Ho(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},t.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},t.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},t}(),ns=function(){function t(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=zi(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=zi(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=zi(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),rs=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,is=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=No.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&No.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(di("string"==typeof t,"typeof type must == string"),di("object"==typeof e,"typeof params must == object"),"websocket"===t)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if("long_polling"!==t)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return Yo(e,(function(t,e){r.push(t+"="+e)})),n+r.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){var t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return""+t+this.host+"/"+e},t}();var os,ss,as,us,cs=function(t,e){var n=hs(t),r=n.namespace;"firebase.com"===n.domain&&Uo(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Uo("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&jo("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new is(n.host,n.secure,r,e,i,"",r!==n.subdomain),path:new es(n.pathString)}},hs=function(t){var e="",n="",r="",i="",o="",s=!0,a="https",u=443;if("string"==typeof t){var c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));var h=t.indexOf("/");-1===h&&(h=t.length);var l=t.indexOf("?");-1===l&&(l=t.length),e=t.substring(0,Math.min(h,l)),h<l&&(i=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(uI){}e+="/"+i}return e}(t.substring(h,l)));var f=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=ui(t.split("&")),o=i.next();!o.done;o=i.next()){var s=o.value;if(0!==s.length){var a=s.split("=");2===a.length?r[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):jo("Invalid query segment '"+s+"' in query '"+t+"'")}}}catch(u){e={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,l)));(c=e.indexOf(":"))>=0?(s="https"===a||"wss"===a,u=parseInt(e.substring(c+1),10)):c=e.length;var p=e.slice(0,c);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var d=e.indexOf(".");r=e.substring(0,d).toLowerCase(),n=e.substring(d+1),o=r}"ns"in f&&(o=f.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}},ls=/[\[\].#$\/\u0000-\u001F\u007F]/,fs=/[\[\].#$\u0000-\u001F\u007F]/,ps=function(t){return"string"==typeof t&&0!==t.length&&!ls.test(t)},ds=function(t){return"string"==typeof t&&0!==t.length&&!fs.test(t)},vs=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!qo(t)||t&&"object"==typeof t&&Di(t,".sv")},ys=function(t,e,n,r,i){i&&void 0===n||gs(Wi(t,e,i),n,r)},gs=function(t,e,n){var r=n instanceof es?new ns(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+r.toErrorString());if("function"==typeof e)throw new Error(t+"contains a function "+r.toErrorString()+" with contents = "+e.toString());if(qo(e))throw new Error(t+"contains "+e.toString()+" "+r.toErrorString());if("string"==typeof e&&e.length>10485760/3&&zi(e)>10485760)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+r.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,o=!1;if(Yo(e,(function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(o=!0,!ps(e)))throw new Error(t+" contains an invalid key ("+e+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(e),gs(t,n,r),r.pop()})),i&&o)throw new Error(t+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},ms=function(t,e,n,r,i){if(!i||void 0!==n){var o=Wi(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var s=[];Yo(n,(function(t,e){var n=new es(t);if(gs(o,e,r.child(n)),".priority"===n.getBack()&&!vs(e))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(n)})),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=(r=e[n]).slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!ps(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(es.comparePaths);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&s.contains(r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(o,s)}},_s=function(t,e,n,r){if(!r||void 0!==n){if(qo(n))throw new Error(Wi(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!vs(n))throw new Error(Wi(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},bs=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Wi(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},ws=function(t,e,n,r){if(!(r&&void 0===n||ps(n)))throw new Error(Wi(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Es=function(t,e,n,r){if(!(r&&void 0===n||ds(n)))throw new Error(Wi(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Is=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Es(t,e,n,r)},Ts=function(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")},Ss=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!ps(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),ds(t)}(r))throw new Error(Wi(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Cs=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Wi(t,e,r)+"must be a boolean.")},Ns=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){Bi("OnDisconnect.cancel",0,1,arguments.length),Hi("OnDisconnect.cancel",1,t,!0);var e=new wi;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){Bi("OnDisconnect.remove",0,1,arguments.length),Ts("OnDisconnect.remove",this.path_),Hi("OnDisconnect.remove",1,t,!0);var e=new wi;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){Bi("OnDisconnect.set",1,2,arguments.length),Ts("OnDisconnect.set",this.path_),ys("OnDisconnect.set",1,t,this.path_,!1),Hi("OnDisconnect.set",2,e,!0);var n=new wi;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){Bi("OnDisconnect.setWithPriority",2,3,arguments.length),Ts("OnDisconnect.setWithPriority",this.path_),ys("OnDisconnect.setWithPriority",1,t,this.path_,!1),_s("OnDisconnect.setWithPriority",2,e,!1),Hi("OnDisconnect.setWithPriority",3,n,!0);var r=new wi;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(Bi("OnDisconnect.update",1,2,arguments.length),Ts("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,jo("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ms("OnDisconnect.update",1,t,this.path_,!1),Hi("OnDisconnect.update",2,e,!0);var i=new wi;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},t}(),As=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Bi("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),ks="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Ps=(os=0,ss=[],function(t){var e,n=t===os;os=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=ks.charAt(t%64),t=Math.floor(t/64);di(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===ss[e];e--)ss[e]=0;ss[e]++}else for(e=0;e<12;e++)ss[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=ks.charAt(ss[e]);return di(20===i.length,"nextPushId: Length should be 20."),i}),Os=function(t){if("2147483647"===t)return"-";var e=Jo(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return Wo;var o=n[i],s=ks.charAt(ks.indexOf(o)+1);return n[i]=s,n.slice(0,i+1).join("")},xs=function(t){if("-2147483648"===t)return Bo;var e=Jo(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=ks.charAt(ks.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))},Rs=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Ds=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Rs(Bo,t),r=new Rs(Bo,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Rs.MIN},t}(),Ls=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ii(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return as},set:function(t){as=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return Ho(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw vi("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Rs.MIN},e.prototype.maxPost=function(){return new Rs(Wo,as)},e.prototype.makePost=function(t,e){return di("string"==typeof t,"KeyIndex indexValue must always be a string."),new Rs(t,as)},e.prototype.toString=function(){return".key"},e}(Ds),Ms=new Ls;var Fs,Vs,Us,js=function(t){return"number"==typeof t?"number:"+Xo(t):"string:"+t},qs=function(t){if(t.isLeafNode()){var e=t.val();di("string"==typeof e||"number"==typeof e||"object"==typeof e&&Di(e,".sv"),"Priority must be a string or number.")}else di(t===us||t.isEmpty(),"priority of unexpected type.");di(t===us||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Bs=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,di(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),qs(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return Fs},set:function(t){Fs=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=e.getFront();return null===r?n:n.isEmpty()&&".priority"!==r?this:(di(".priority"!==r||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+js(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?Xo(this.value_):this.value_,this.lazyHash_=Oo(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(di(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),o=t.VALUE_TYPE_ORDER.indexOf(r);return di(i>=0,"Unknown leaf type: "+n),di(o>=0,"Unknown leaf type: "+r),i===o?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}();var Ws,Hs,Gs=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ii(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?Ho(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Rs.MIN},e.prototype.maxPost=function(){return new Rs(Wo,new Bs("[PRIORITY-POST]",Us))},e.prototype.makePost=function(t,e){var n=Vs(t);return new Rs(e,new Bs("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Ds)),zs=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Qs=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Ys.EMPTY_NODE,this.right=null!=o?o:Ys.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Ys.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Ys.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Ks=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Qs(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Ys=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Qs.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Qs.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new zs(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new zs(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new zs(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new zs(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Ks,t}(),Xs=Math.log(2),$s=function(){function t(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/Xs,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Js=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new Qs(s,o.node,Qs.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),h=i(u+1,r);return o=t[u],s=n?n(o):o,new Qs(s,o.node,Qs.BLACK,c,h)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),h=t[o],l=n?n(h):h;u(new Qs(l,h.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var h=e.nextBitIsOne(),l=Math.pow(2,e.count-(c+1));h?a(l,Qs.BLACK):(a(l,Qs.BLACK),a(l,Qs.RED))}return o}(new $s(t.length));return new Ys(r||e,o)},Zs={},ta=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return di(Zs&&Gs,"ChildrenNode.ts has not been loaded"),Ws=Ws||new t({".priority":Zs},{".priority":Gs})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Li(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Ys?e:null},t.prototype.hasIndex=function(t){return Di(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){di(e!==Ms,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],o=!1,s=n.getIterator(Rs.Wrap),a=s.getNext();a;)o=o||e.isDefinedOn(a.node),i.push(a),a=s.getNext();r=o?Js(i,e.getCompare()):Zs;var u=e.toString(),c=oi({},this.indexSet_);c[u]=e;var h=oi({},this.indexes_);return h[u]=r,new t(h,c)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Fi(this.indexes_,(function(t,i){var o=Li(r.indexSet_,i);if(di(o,"Missing index implementation for "+i),t===Zs){if(o.isDefinedOn(e.node)){for(var s=[],a=n.getIterator(Rs.Wrap),u=a.getNext();u;)u.name!==e.name&&s.push(u),u=a.getNext();return s.push(e),Js(s,o.getCompare())}return Zs}var c=n.get(e.name),h=t;return c&&(h=h.remove(new Rs(e.name,c))),h.insert(e,e.node)})),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Fi(this.indexes_,(function(t){if(t===Zs)return t;var r=n.get(e.name);return r?t.remove(new Rs(e.name,r)):t})),this.indexSet_)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ea(t,e){return Ho(t.name,e.name)}function na(t,e){return Ho(t,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ra=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&qs(this.priorityNode_),this.children_.isEmpty()&&di(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return Hs||(Hs=new t(new Ys(na),null,ta.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||Hs},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?Hs:e},t.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(di(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Rs(e,n),i=void 0,o=void 0;n.isEmpty()?(i=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),o=this.indexMap_.addToIndexes(r,this.children_));var s=i.isEmpty()?Hs:this.priorityNode_;return new t(i,s,o)},t.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;di(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Gs,(function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1})),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+js(this.getPriority().val())+":"),this.forEachChild(Gs,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":Oo(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Rs(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Rs(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Rs(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getIteratorFrom(t.name,Rs.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getReverseIteratorFrom(t.name,Rs.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===ia?-1:0},t.prototype.withIndex=function(e){if(e===Ms||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Ms||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Gs),r=e.getIterator(Gs),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Ms?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),ia=new(function(t){function e(){return t.call(this,new Ys(na),ra.EMPTY_NODE,ta.Default)||this}return ii(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return ra.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(ra));Object.defineProperties(Rs,{MIN:{value:new Rs(Bo,ra.EMPTY_NODE)},MAX:{value:new Rs(Wo,ia)}}),Ls.__EMPTY_NODE=ra.EMPTY_NODE,Bs.__childrenNodeConstructor=ra,us=ia,function(t){Us=t}(ia);function oa(t,e){if(void 0===e&&(e=null),null===t)return ra.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),di(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Bs(t,oa(e));if(t instanceof Array){var n=ra.EMPTY_NODE;return Yo(t,(function(e,r){if(Di(t,e)&&"."!==e.substring(0,1)){var i=oa(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}})),n.updatePriority(oa(e))}var r=[],i=!1;if(Yo(t,(function(t,e){if("."!==t.substring(0,1)){var n=oa(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Rs(t,n)))}})),0===r.length)return ra.EMPTY_NODE;var o=Js(r,ea,(function(t){return t.name}),na);if(i){var s=Js(r,Gs.getCompare());return new ra(o,oa(e),new ta({".priority":s},{".priority":Gs}))}return new ra(o,oa(e),ta.Default)}!function(t){Vs=t}(oa);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var sa,aa=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ii(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?Ho(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Rs.MIN},e.prototype.maxPost=function(){return Rs.MAX},e.prototype.makePost=function(t,e){var n=oa(t);return new Rs(e,n)},e.prototype.toString=function(){return".value"},e}(Ds)),ua=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,di(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return ii(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?Ho(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=oa(t),r=ra.EMPTY_NODE.updateChild(this.indexPath_,n);return new Rs(e,r)},e.prototype.maxPost=function(){var t=ra.EMPTY_NODE.updateChild(this.indexPath_,ia);return new Rs(Wo,t)},e.prototype.toString=function(){return this.indexPath_.slice().join("/")},e}(Ds),ca=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return Bi("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return Bi("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return Bi("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return Bi("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){Bi("DataSnapshot.child",0,1,arguments.length),e=String(e),Es("DataSnapshot.child",1,e,!1);var n=new es(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,Gs)},t.prototype.hasChild=function(t){Bi("DataSnapshot.hasChild",1,1,arguments.length),Es("DataSnapshot.hasChild",1,t,!1);var e=new es(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return Bi("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(Bi("DataSnapshot.forEach",1,1,arguments.length),Hi("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,(function(r,i){return e(new t(i,n.ref_.child(r),Gs))}))},t.prototype.hasChildren=function(){return Bi("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Bi("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return Bi("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),ha=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+xi(this.snapshot.exportVal())},t}(),la=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),fa=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new ha("value",this,new ca(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){di(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new la(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),pa=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,Di(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new la(this,t,e):null},t.prototype.createEvent=function(t,e){di(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new ha(t.type,this,new ca(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){di(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var s=r[0],a=i[0];return!(a!==s||e.callbacks_[s]&&this.callbacks_[a]&&e.callbacks_[s]!==this.callbacks_[a])}return i.every((function(t){return e.callbacks_[t]===n.callbacks_[t]}))}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),da=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return di(sa,"Reference.ts has not been loaded"),sa},set:function(t){sa=t},enumerable:!1,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Ms){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Bo)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==Wo)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Gs){if(null!=e&&!vs(e)||null!=n&&!vs(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(di(t.getIndex()instanceof ua||t.getIndex()===aa,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return Bi("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){Bi("Query.on",2,4,arguments.length),bs("Query.on",1,e,!1),Hi("Query.on",2,n,!1);var o=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,o.cancel,o.context);else{var s={};s[e]=n,this.onChildEvent(s,o.cancel,o.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new fa(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new pa(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){Bi("Query.off",0,3,arguments.length),bs("Query.off",1,t,!0),Hi("Query.off",2,e,!0),Gi("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var o=e||null;r=new fa(o,null,n||null)}else t&&(e&&((i={})[t]=e),r=new pa(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},t.prototype.get=function(){return this.repo.getValue(this)},t.prototype.once=function(e,n,r,i){var o=this;Bi("Query.once",1,4,arguments.length),bs("Query.once",1,e,!1),Hi("Query.once",2,n,!0);var s=t.getCancelAndContextArgs_("Query.once",r,i),a=!0,u=new wi;u.promise.catch((function(){}));var c=function(t){a&&(a=!1,o.off(e,c),n&&n.bind(s.context)(t),u.resolve(t))};return this.on(e,c,(function(t){o.off(e,c),s.cancel&&s.cancel.bind(s.context)(t),u.reject(t)})),u.promise},t.prototype.limitToFirst=function(e){if(Bi("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(Bi("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(Bi("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');Es("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new es(e);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new ua(n),i=this.queryParams_.orderBy(r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){Bi("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(Ms);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){Bi("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(Gs);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){Bi("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(aa);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),Bi("Query.startAt",0,2,arguments.length),ys("Query.startAt",1,e,this.path,!0),ws("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.startAfter=function(e,n){void 0===e&&(e=null),Bi("Query.startAfter",0,2,arguments.length),ys("Query.startAfter",1,e,this.path,!1),ws("Query.startAfter",2,n,!0);var r=this.queryParams_.startAfter(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAfter: Starting point was already set (by another call to startAt, startAfter or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),Bi("Query.endAt",0,2,arguments.length),ys("Query.endAt",1,e,this.path,!0),ws("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endBefore=function(e,n){void 0===e&&(e=null),Bi("Query.endBefore",0,2,arguments.length),ys("Query.endBefore",1,e,this.path,!1),ws("Query.endBefore",2,n,!0);var r=this.queryParams_.endBefore(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endBefore: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(Bi("Query.equalTo",1,2,arguments.length),ys("Query.equalTo",1,t,this.path,!1),ws("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return Bi("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},t.prototype.toJSON=function(){return Bi("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=Qo(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(Bi("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=this.path.equals(e.path),o=this.queryIdentifier()===e.queryIdentifier();return r&&i&&o},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,Hi(t,3,r.cancel,!0),r.context=n,Gi(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Wi(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),va=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),ya=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=this.path_.child(e);return new t(this.syncTree_,n)},t.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},t}(),ga=function(t,e,n){return t&&"object"==typeof t?(di(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?ma(t[".sv"],e,n):"object"==typeof t[".sv"]?_a(t[".sv"],e):void di(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},ma=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:di(!1,"Unexpected server value: "+t)}},_a=function(t,e,n){t.hasOwnProperty("increment")||di(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&di(!1,"Unexpected increment value: "+r);var i=e.node();if(di(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var o=i.getValue();return"number"!=typeof o?r:o+r},ba=function(t,e,n,r){return Ea(e,new ya(n,t),r)},wa=function(t,e,n){return Ea(t,new va(e),n)};function Ea(t,e,n){var r,i=t.getPriority().val(),o=ga(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=ga(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new Bs(a,oa(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Bs(o))),u.forEachChild(Gs,(function(t,i){var o=Ea(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))})),r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ia,Ta,Sa=function(){function t(){this.value=null,this.children=new Map}return t.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&this.children.size>0){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},t.prototype.remember=function(e,n){if(e.isEmpty())this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(e,n);else{var r=e.getFront();this.children.has(r)||this.children.set(r,new t);var i=this.children.get(r);e=e.popFront(),i.remember(e,n)}},t.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(Gs,(function(t,e){n.remember(new es(t),e)})),this.forget(t)}if(this.children.size>0){var r=t.getFront();if(t=t.popFront(),this.children.has(r))this.children.get(r).forget(t)&&this.children.delete(r);return 0===this.children.size}return!0},t.prototype.forEachTree=function(t,e){null!==this.value?e(t,this.value):this.forEachChild((function(n,r){var i=new es(t.toString()+"/"+n);r.forEachTree(i,e)}))},t.prototype.forEachChild=function(t){this.children.forEach((function(e,n){t(n,e)}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(Ta=Ia||(Ia={}))[Ta.OVERWRITE=0]="OVERWRITE",Ta[Ta.MERGE=1]="MERGE",Ta[Ta.ACK_USER_WRITE=2]="ACK_USER_WRITE",Ta[Ta.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";var Ca,Na=function(){function t(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,di(!r||e,"Tagged queries must be from server.")}return t.user=function(){return new t(!0,!1,null,!1)},t.server=function(){return new t(!1,!0,null,!1)},t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},t}(),Aa=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Ia.ACK_USER_WRITE,this.source=Na.user()}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return di(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new es(e));return new t(es.Empty,n,this.revert)}return di(this.path.getFront()===e,"operationForChild called for unrelated child."),new t(this.path.popFront(),this.affectedTree,this.revert)},t}(),ka=function(){function t(t,e){void 0===e&&(Ca||(Ca=new Ys(Go)),e=Ca),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return Yo(e,(function(t,e){n=n.set(new es(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:es.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null!=i?{path:new es(n).child(i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(e.isEmpty())return this;var n=e.getFront(),r=this.children.get(n);return null!==r?r.subtree(e.popFront()):new t(null)},t.prototype.set=function(e,n){if(e.isEmpty())return new t(n,this.children);var r=e.getFront(),i=(this.children.get(r)||new t(null)).set(e.popFront(),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?new t(null):new t(null,this.children);var n=e.getFront(),r=this.children.get(n);if(r){var i=r.remove(e.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},t.prototype.setTree=function(e,n){if(e.isEmpty())return n;var r=e.getFront(),i=(this.children.get(r)||new t(null)).setTree(e.popFront(),n),o=void 0;return o=i.isEmpty()?this.children.remove(r):this.children.insert(r,i),new t(this.value,o)},t.prototype.fold=function(t){return this.fold_(es.Empty,t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(t.child(r),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,es.Empty,e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,es.Empty,e)},t.prototype.foreachOnPath_=function(e,n,r){if(e.isEmpty())return this;this.value&&r(n,this.value);var i=e.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(e.popFront(),n.child(i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(es.Empty,t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(t.child(n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t}(),Pa=function(){function t(t,e){this.source=t,this.path=e,this.type=Ia.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,es.Empty):new t(this.source,this.path.popFront())},t}(),Oa=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Ia.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,es.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}(),xa=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Ia.MERGE}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){var n=this.children.subtree(new es(e));return n.isEmpty()?null:n.value?new Oa(this.source,es.Empty,n.value):new t(this.source,es.Empty,n)}return di(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,this.path.popFront(),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),Ra=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),Da=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new Ra(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new Ra(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function La(t){return{type:"value",snapshotNode:t}}function Ma(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Fa(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Va(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ua,ja=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,o){di(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=t.getImmediateChild(e);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(Fa(e,s)):di(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?o.trackChildChange(Ma(e,n)):o.trackChildChange(Va(e,n,s))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Gs,(function(t,r){e.hasChild(t)||n.trackChildChange(Fa(t,r))})),e.isLeafNode()||e.forEachChild(Gs,(function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(Va(e,r,i))}else n.trackChildChange(Ma(e,r))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?ra.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),qa=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;di("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),di(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,Va(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,Fa(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,Ma(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw vi("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,Va(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),Ba=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Wa=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new Ra(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),Ha=function(t,e){this.viewCache=t,this.changes=e},Ga=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){di(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),di(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,r,i){var o,s,a=new qa;if(n.type===Ia.OVERWRITE){var u=n;u.source.fromUser?o=this.applyUserOverwrite_(e,u.path,u.snap,r,i,a):(di(u.source.fromServer,"Unknown source."),s=u.source.tagged||e.getServerCache().isFiltered()&&!u.path.isEmpty(),o=this.applyServerOverwrite_(e,u.path,u.snap,r,i,s,a))}else if(n.type===Ia.MERGE){var c=n;c.source.fromUser?o=this.applyUserMerge_(e,c.path,c.children,r,i,a):(di(c.source.fromServer,"Unknown source."),s=c.source.tagged||e.getServerCache().isFiltered(),o=this.applyServerMerge_(e,c.path,c.children,r,i,s,a))}else if(n.type===Ia.ACK_USER_WRITE){var h=n;o=h.revert?this.revertUserWrite_(e,h.path,r,i,a):this.ackUserWrite_(e,h.path,h.affectedTree,r,i,a)}else{if(n.type!==Ia.LISTEN_COMPLETE)throw vi("Unknown operation type: "+n.type);o=this.listenComplete_(e,n.path,r,a)}var l=a.getChanges();return t.maybeAddValueEvent_(e,o,l),new Ha(o,l)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(La(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var s=void 0,a=void 0;if(e.isEmpty())if(di(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var u=t.getCompleteServerSnap(),c=u instanceof ra?u:ra.EMPTY_NODE,h=n.calcCompleteEventChildren(c);s=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var l=n.calcCompleteEventCache(t.getCompleteServerSnap());s=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var f=e.getFront();if(".priority"===f){di(1===e.getLength(),"Can't have a priority with additional path components");var p=o.getNode();a=t.getServerCache().getNode();var d=n.calcEventCacheAfterServerOverwrite(e,p,a);s=null!=d?this.filter_.updatePriority(p,d):o.getNode()}else{var v=e.popFront(),y=void 0;if(o.isCompleteForChild(f)){a=t.getServerCache().getNode();var g=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),a);y=null!=g?o.getNode().getImmediateChild(f).updateChild(v,g):o.getNode().getImmediateChild(f)}else y=n.calcCompleteChild(f,t.getServerCache());s=null!=y?this.filter_.updateChild(o.getNode(),f,y,v,r,i):o.getNode()}}return t.updateEventSnap(s,o.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())a=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var h=u.getNode().updateChild(e,n);a=c.updateFullNode(u.getNode(),h,null)}else{var l=e.getFront();if(!u.isCompleteForPath(e)&&e.getLength()>1)return t;var f=e.popFront(),p=u.getNode().getImmediateChild(l).updateChild(f,n);a=".priority"===l?c.updatePriority(u.getNode(),p):c.updateChild(u.getNode(),l,p,f,Ba,null)}var d=t.updateServerSnap(a,u.isFullyInitialized()||e.isEmpty(),c.filtersNodes()),v=new Wa(r,d,i);return this.generateEventCacheAfterServerEvent_(d,e,r,v,s)},t.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u=t.getEventCache(),c=new Wa(r,t,i);if(e.isEmpty())a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),s=t.updateEventSnap(a,!0,this.filter_.filtersNodes());else{var h=e.getFront();if(".priority"===h)a=this.filter_.updatePriority(t.getEventCache().getNode(),n),s=t.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered());else{var l=e.popFront(),f=u.getNode().getImmediateChild(h),p=void 0;if(l.isEmpty())p=n;else{var d=c.getCompleteChild(h);p=null!=d?".priority"===l.getBack()&&d.getChild(l.parent()).isEmpty()?d:d.updateChild(l,n):ra.EMPTY_NODE}if(f.equals(p))s=t;else{var v=this.filter_.updateChild(u.getNode(),h,p,l,c,o);s=t.updateEventSnap(v,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return s},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,r,i,o,s){var a=this,u=e;return r.foreach((function(r,c){var h=n.child(r);t.cacheHasChild_(e,h.getFront())&&(u=a.applyUserOverwrite_(u,h,c,i,o,s))})),r.foreach((function(r,c){var h=n.child(r);t.cacheHasChild_(e,h.getFront())||(u=a.applyUserOverwrite_(u,h,c,i,o,s))})),u},t.prototype.applyMerge_=function(t,e){return e.foreach((function(e,n){t=t.updateChild(e,n)})),t},t.prototype.applyServerMerge_=function(t,e,n,r,i,o,s){var a=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,c=t;u=e.isEmpty()?n:new ka(null).setTree(e,n);var h=t.getServerCache().getNode();return u.children.inorderTraversal((function(e,n){if(h.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),l=a.applyMerge_(u,n);c=a.applyServerOverwrite_(c,new es(e),l,r,i,o,s)}})),u.children.inorderTraversal((function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!h.hasChild(e)&&!u){var l=t.getServerCache().getNode().getImmediateChild(e),f=a.applyMerge_(l,n);c=a.applyServerOverwrite_(c,new es(e),f,r,i,o,s)}})),c},t.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,a.getNode().getChild(e),r,i,s,o);if(e.isEmpty()){var u=new ka(null);return a.getNode().forEachChild(Ms,(function(t,e){u=u.set(new es(t),e)})),this.applyServerMerge_(t,e,u,r,i,s,o)}return t}var c=new ka(null);return n.foreach((function(t,n){var r=e.child(t);a.isCompleteForPath(r)&&(c=c.set(t,a.getNode().getChild(r)))})),this.applyServerMerge_(t,e,c,r,i,s,o)},t.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,Ba,r)},t.prototype.revertUserWrite_=function(t,e,n,r,i){var o;if(null!=n.shadowingWrite(e))return t;var s=new Wa(n,t,r),a=t.getEventCache().getNode(),u=void 0;if(e.isEmpty()||".priority"===e.getFront()){var c=void 0;if(t.getServerCache().isFullyInitialized())c=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var h=t.getServerCache().getNode();di(h instanceof ra,"serverChildren would be complete if leaf node"),c=n.calcCompleteEventChildren(h)}c=c,u=this.filter_.updateFullNode(a,c,i)}else{var l=e.getFront(),f=n.calcCompleteChild(l,t.getServerCache());null==f&&t.getServerCache().isCompleteForChild(l)&&(f=a.getImmediateChild(l)),(u=null!=f?this.filter_.updateChild(a,l,f,e.popFront(),s,i):t.getEventCache().getNode().hasChild(l)?this.filter_.updateChild(a,l,ra.EMPTY_NODE,e.popFront(),s,i):a).isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(u=this.filter_.updateFullNode(u,o,i))}return o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(es.Empty),t.updateEventSnap(u,o,this.filter_.filtersNodes())},t}(),za=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach((function(t){var e;"child_changed"===t.type&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push((e=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:e}))})),this.generateEventsForType_(i,"child_removed",t,n,e),this.generateEventsForType_(i,"child_added",t,n,e),this.generateEventsForType_(i,"child_moved",o,n,e),this.generateEventsForType_(i,"child_changed",t,n,e),this.generateEventsForType_(i,"value",t,n,e),i},t.prototype.generateEventsForType_=function(t,e,n,r,i){var o=this,s=n.filter((function(t){return t.type===e}));s.sort(this.compareChanges_.bind(this)),s.forEach((function(e){var n=o.materializeSingleChange_(e,i);r.forEach((function(r){r.respondsTo(e.type)&&t.push(r.createEvent(n,o.query_))}))}))},t.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},t.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw vi("Should only compare child_ events.");var n=new Rs(t.childName,t.snapshotNode),r=new Rs(e.childName,e.snapshotNode);return this.index_.compare(n,r)},t}(),Qa=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new ja(n.getIndex()),i=n.getNodeFilter();this.processor_=new Ga(i);var o=e.getServerCache(),s=e.getEventCache(),a=r.updateFullNode(ra.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(ra.EMPTY_NODE,s.getNode(),null),c=new Ra(a,o.isFullyInitialized(),r.filtersNodes()),h=new Ra(u,s.isFullyInitialized(),i.filtersNodes());this.viewCache_=new Da(h,c),this.eventGenerator_=new za(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteNode=function(){return this.viewCache_.getCompleteEventSnap()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){di(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach((function(t){var i=t.createCancelEvent(e,r);i&&n.push(i)}))}if(t){for(var i=[],o=0;o<this.eventRegistrations_.length;++o){var s=this.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(o+1));break}}else i.push(s)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===Ia.MERGE&&null!==t.source.queryId&&(di(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),di(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),di(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];e.getNode().isLeafNode()||e.getNode().forEachChild(Gs,(function(t,e){n.push(Ma(t,e))}));return e.isFullyInitialized()&&n.push(La(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){var r=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(t,e,r)},t}(),Ka=function(){function t(){this.views=new Map}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return di(Ua,"Reference.ts has not been loaded"),Ua},set:function(t){di(!Ua,"__referenceConstructor has already been defined"),Ua=t},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.views.size},t.prototype.applyOperation=function(t,e,n){var r,i,o=t.source.queryId;if(null!==o){var s=this.views.get(o);return di(null!=s,"SyncTree gave us an op for an invalid query."),s.applyOperation(t,e,n)}var a=[];try{for(var u=ui(this.views.values()),c=u.next();!c.done;c=u.next()){s=c.value;a=a.concat(s.applyOperation(t,e,n))}}catch(h){r={error:h}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return a},t.prototype.getView=function(t,e,n,r){var i=t.queryIdentifier(),o=this.views.get(i);if(!o){var s=e.calcCompleteEventCache(r?n:null),a=!1;s?a=!0:n instanceof ra?(s=e.calcCompleteEventChildren(n),a=!1):(s=ra.EMPTY_NODE,a=!1);var u=new Da(new Ra(s,a,!1),new Ra(n,r,!1));return new Qa(t,u)}return o},t.prototype.addEventRegistration=function(t,e,n,r,i){var o=this.getView(t,n,r,i);return this.views.has(t.queryIdentifier())||this.views.set(t.queryIdentifier(),o),o.addEventRegistration(e),o.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var i,o,s=e.queryIdentifier(),a=[],u=[],c=this.hasCompleteView();if("default"===s)try{for(var h=ui(this.views.entries()),l=h.next();!l.done;l=h.next()){var f=ci(l.value,2),p=f[0],d=f[1];u=u.concat(d.removeEventRegistration(n,r)),d.isEmpty()&&(this.views.delete(p),d.getQuery().getQueryParams().loadsAllData()||a.push(d.getQuery()))}}catch(v){i={error:v}}finally{try{l&&!l.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}else(d=this.views.get(s))&&(u=u.concat(d.removeEventRegistration(n,r)),d.isEmpty()&&(this.views.delete(s),d.getQuery().getQueryParams().loadsAllData()||a.push(d.getQuery())));return c&&!this.hasCompleteView()&&a.push(new t.__referenceConstructor(e.repo,e.path)),{removed:a,events:u}},t.prototype.getQueryViews=function(){var t,e,n=[];try{for(var r=ui(this.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;o.getQuery().getQueryParams().loadsAllData()||n.push(o)}}catch(s){t={error:s}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},t.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var i=ui(this.views.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r||s.getCompleteServerCache(t)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){var t,e;try{for(var n=ui(this.views.values()),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.getQuery().getQueryParams().loadsAllData())return i}}catch(o){t={error:o}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},t}(),Ya=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new ka(null))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xa(t,e,n){if(e.isEmpty())return new Ya(new ka(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=es.relativePath(i,e);return o=o.updateChild(s,n),new Ya(t.writeTree_.set(i,o))}var a=new ka(n),u=t.writeTree_.setTree(e,a);return new Ya(u)}function $a(t,e,n){var r=t;return Yo(n,(function(t,n){r=Xa(r,e.child(t),n)})),r}function Ja(t,e){if(e.isEmpty())return Ya.empty();var n=t.writeTree_.setTree(e,new ka(null));return new Ya(n)}function Za(t,e){return null!=tu(t,e)}function tu(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(es.relativePath(n.path,e)):null}function eu(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Gs,(function(t,n){e.push(new Rs(t,n))})):t.writeTree_.children.inorderTraversal((function(t,n){null!=n.value&&e.push(new Rs(t,n.value))})),e}function nu(t,e){if(e.isEmpty())return t;var n=tu(t,e);return new Ya(null!=n?new ka(n):t.writeTree_.subtree(e))}function ru(t){return t.writeTree_.isEmpty()}function iu(t,e){return ou(es.Empty,t.writeTree_,e)}function ou(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal((function(e,i){".priority"===e?(di(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=ou(t.child(e),i,n)})),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(t.child(".priority"),r)),n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var su=function(){function t(){this.visibleWrites_=Ya.empty(),this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new au(t,this)},t.prototype.addOverwrite=function(t,e,n,r){di(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=Xa(this.visibleWrites_,t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){di(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=$a(this.visibleWrites_,t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex((function(e){return e.writeId===t}));di(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,o=!1,s=this.allWrites_.length-1;i&&s>=0;){var a=this.allWrites_[s];a.visible&&(s>=n&&this.recordContainsPath_(a,r.path)?i=!1:r.path.contains(a.path)&&(o=!0)),s--}if(i){if(o)return this.resetTree_(),!0;r.snap?this.visibleWrites_=Ja(this.visibleWrites_,r.path):Yo(r.children,(function(t){e.visibleWrites_=Ja(e.visibleWrites_,r.path.child(t))}));return!0}return!1},t.prototype.getCompleteWriteData=function(t){return tu(this.visibleWrites_,t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var o=nu(this.visibleWrites_,e);if(!i&&ru(o))return n;if(i||null!=n||Za(o,es.Empty)){return iu(t.layerTree_(this.allWrites_,(function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))}),e),n||ra.EMPTY_NODE)}return null}var s=tu(this.visibleWrites_,e);if(null!=s)return s;var a=nu(this.visibleWrites_,e);return ru(a)?n:null!=n||Za(a,es.Empty)?iu(a,n||ra.EMPTY_NODE):null},t.prototype.calcCompleteEventChildren=function(t,e){var n=ra.EMPTY_NODE,r=tu(this.visibleWrites_,t);if(r)return r.isLeafNode()||r.forEachChild(Gs,(function(t,e){n=n.updateImmediateChild(t,e)})),n;if(e){var i=nu(this.visibleWrites_,t);return e.forEachChild(Gs,(function(t,e){var r=iu(nu(i,new es(t)),e);n=n.updateImmediateChild(t,r)})),eu(i).forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n}return eu(nu(this.visibleWrites_,t)).forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){di(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(Za(this.visibleWrites_,i))return null;var o=nu(this.visibleWrites_,i);return ru(o)?r.getChild(e):iu(o,r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=tu(this.visibleWrites_,r);return null!=i?i:n.isCompleteForChild(e)?iu(nu(this.visibleWrites_,r),n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return tu(this.visibleWrites_,t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=nu(this.visibleWrites_,t),u=tu(a,es.Empty);if(null!=u)s=u;else{if(null==e)return[];s=iu(a,e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],h=o.getCompare(),l=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),f=l.getNext();f&&c.length<r;)0!==h(f,n)&&c.push(f),f=l.getNext();return c},t.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,es.Empty),this.allWrites_.length>0?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var r=Ya.empty(),i=0;i<t.length;++i){var o=t[i];if(e(o)){var s=o.path,a=void 0;if(o.snap)n.contains(s)?r=Xa(r,a=es.relativePath(n,s),o.snap):s.contains(n)&&(a=es.relativePath(s,n),r=Xa(r,es.Empty,o.snap.getChild(a)));else{if(!o.children)throw vi("WriteRecord should have .snap or .children");if(n.contains(s))r=$a(r,a=es.relativePath(n,s),o.children);else if(s.contains(n))if((a=es.relativePath(s,n)).isEmpty())r=$a(r,es.Empty,o.children);else{var u=Li(o.children,a.getFront());if(u){var c=u.getChild(a.popFront());r=Xa(r,es.Empty,c)}}}}}return r},t}(),au=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(this.treePath_.child(e),this.writeTree_)},t}(),uu=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=new ka(null),this.pendingWriteTree_=new su,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new Oa(Na.user(),t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=ka.fromObject(e);return this.applyOperationToSyncPoints_(new xa(Na.user(),t,r))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=new ka(null);return null!=n.snap?r=r.set(es.Empty,!0):Yo(n.children,(function(t){r=r.set(new es(t),!0)})),this.applyOperationToSyncPoints_(new Aa(n.path,r,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new Oa(Na.server(),t,e))},t.prototype.applyServerMerge=function(t,e){var n=ka.fromObject(e);return this.applyOperationToSyncPoints_(new xa(Na.server(),t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new Pa(Na.server(),t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=es.relativePath(s,e),c=new Oa(Na.forServerTaggedQuery(a),u,n);return this.applyTaggedOperation_(s,c)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=es.relativePath(s,e),c=ka.fromObject(n),h=new xa(Na.forServerTaggedQuery(a),u,c);return this.applyTaggedOperation_(s,h)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,s=i.queryId,a=es.relativePath(o,e),u=new Pa(Na.forServerTaggedQuery(s),a);return this.applyTaggedOperation_(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var r=e.path,i=null,o=!1;this.syncPointTree_.foreachOnPath(r,(function(t,e){var n=es.relativePath(t,r);i=i||e.getCompleteServerCache(n),o=o||e.hasCompleteView()}));var s,a=this.syncPointTree_.get(r);(a?(o=o||a.hasCompleteView(),i=i||a.getCompleteServerCache(es.Empty)):(a=new Ka,this.syncPointTree_=this.syncPointTree_.set(r,a)),null!=i)?s=!0:(s=!1,i=ra.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild((function(t,e){var n=e.getCompleteServerCache(es.Empty);n&&(i=i.updateImmediateChild(t,n))})));var u=a.viewExistsForQuery(e);if(!u&&!e.getQueryParams().loadsAllData()){var c=t.makeQueryKey_(e);di(!this.queryToTagMap.has(c),"View does not exist, but we have a tag");var h=t.getNextQueryTag_();this.queryToTagMap.set(c,h),this.tagToQueryMap.set(h,c)}var l=this.pendingWriteTree_.childWrites(r),f=a.addEventRegistration(e,n,l,i,s);if(!u&&!o){var p=a.viewForQuery(e);f=f.concat(this.setupListener_(e,p))}return f},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,s=this.syncPointTree_.get(o),a=[];if(s&&("default"===e.queryIdentifier()||s.viewExistsForQuery(e))){var u=s.removeEventRegistration(e,n,r);s.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;a=u.events;var h=-1!==c.findIndex((function(t){return t.getQueryParams().loadsAllData()})),l=this.syncPointTree_.findOnPath(o,(function(t,e){return e.hasCompleteView()}));if(h&&!l){var f=this.syncPointTree_.subtree(o);if(!f.isEmpty())for(var p=this.collectDistinctViewsForSubTree_(f),d=0;d<p.length;++d){var v=p[d],y=v.getQuery(),g=this.createListenerForView_(v);this.listenProvider_.startListening(t.queryForListening_(y),this.tagForQuery_(y),g.hashFn,g.onComplete)}}if(!l&&c.length>0&&!r)if(h){this.listenProvider_.stopListening(t.queryForListening_(e),null)}else c.forEach((function(e){var n=i.queryToTagMap.get(t.makeQueryKey_(e));i.listenProvider_.stopListening(t.queryForListening_(e),n)}));this.removeTags_(c)}return a},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(t,(function(e,n){var r=es.relativePath(e,t),i=n.getCompleteServerCache(r);if(i)return i}));return n.calcCompleteEventCache(t,r,e,!0)},t.prototype.getServerValue=function(t){var e=t.path,n=null;this.syncPointTree_.foreachOnPath(e,(function(t,r){var i=es.relativePath(t,e);n=n||r.getCompleteServerCache(i)}));var r=this.syncPointTree_.get(e);r?n=n||r.getCompleteServerCache(es.Empty):(r=new Ka,this.syncPointTree_=this.syncPointTree_.set(e,r));var i=null!=n,o=i?new Ra(n,!0,!1):null,s=this.pendingWriteTree_.childWrites(t.path);return r.getView(t,s,i?o.getNode():ra.EMPTY_NODE,i).getCompleteNode()},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold((function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),Yo(n,(function(t,e){r=r.concat(e)})),r}))},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap.get(i);this.queryToTagMap.delete(i),this.tagToQueryMap.delete(o)}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var r=e.path,i=this.tagForQuery_(e),o=this.createListenerForView_(n),s=this.listenProvider_.startListening(t.queryForListening_(e),i,o.hashFn,o.onComplete),a=this.syncPointTree_.subtree(r);if(i)di(!a.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var u=a.fold((function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map((function(t){return t.getQuery()})))),Yo(n,(function(t,e){r=r.concat(e)})),r})),c=0;c<u.length;++c){var h=u[c];this.listenProvider_.stopListening(t.queryForListening_(h),this.tagForQuery_(h))}return s},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||ra.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,n);return e.removeEventRegistration(n,null,i)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return di(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new es(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return this.queryToTagMap.get(n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);di(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(es.Empty))},t.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(es.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(es.Empty));var o=[],s=t.path.getFront(),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,h=r.child(s);o=o.concat(this.applyOperationHelper_(a,u,c,h))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get(es.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(es.Empty));var s=[];return e.children.inorderTraversal((function(e,o){var a=n?n.getImmediateChild(e):null,u=r.child(e),c=t.operationForChild(e);c&&(s=s.concat(i.applyOperationDescendantsHelper_(c,o,a,u)))})),o&&(s=s.concat(o.applyOperation(t,r,n))),s},t.nextQueryTag_=1,t}(),cu=function(){function t(){this.rootNode_=ra.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),hu=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Di(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return _i(this.counters_)},t}(),lu=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new hu),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),fu=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=oi({},t);return this.last_&&Yo(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),pu=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new fu(t);var n=1e4+2e4*Math.random();ts(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;Yo(e,(function(e,i){i>0&&Di(t.statsToReport_,e)&&(n[e]=i,r=!0)})),r&&this.server_.reportStats(n),ts(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),du=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new vu(i)),e.add(r)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.equals(t)}))},t.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.contains(t)||t.contains(e)}))},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];if(r)t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1}e&&(this.eventLists_=[]),this.recursionDepth_--},t}(),vu=function(){function t(t){this.path_=t,this.events_=[]}return t.prototype.add=function(t){this.events_.push(t)},t.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();Ro&&Mo("event: "+e.toString()),Zo(n)}}},t.prototype.getPath=function(){return this.path_},t}(),yu=function(){function t(t){this.allowedEvents_=t,this.listeners_={},di(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=hi(this.listeners_[t]),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){di(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),gu=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))}),!1),r}return ii(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return di("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(yu),mu=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Ii()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return ii(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return di("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(yu),_u=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&Zo((function(){n.onMessage_(t[e])}))},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum];){if("break"===r())break}},t}(),bu=function(){function t(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Fo(t),this.stats_=lu.getCollection(e),this.urlFn=function(t){return e.connectionURL("long_polling",t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new _u(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if("complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new wu((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=ci(t,5),i=r[0],o=r[1],s=r[2];if(r[3],r[4],n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"===i)n.id=o,n.password=s;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=ci(t,2),i=r[0],o=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)}),(function(){n.onClosed_()}),n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.hostname&&rs.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!!t.forceAllow_||!(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=xi(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n,r=(n=yi(e),gi.encodeByteArray(n,!0)),i=Ko(r,1840),o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},t.prototype.incrementIncomingBytes_=function(t){var e=xi(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),wu=function(){function t(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,this.uniqueCallbackIdentifier=Po(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(o='<script>document.domain="'+document.domain+'";<\/script>');var s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(uI){Mo("frame writing exception"),uI.stack&&Mo(uI.stack),Mo(uI)}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||Mo("No IE domain setting required")}catch(uI){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(i),r()}))},t.prototype.addTag=function(t,e){var n=this;setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){Mo("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(uI){}}),Math.floor(1))},t}(),Eu="";function Iu(t){Eu=t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tu=null;"undefined"!=typeof MozWebSocket?Tu=MozWebSocket:"undefined"!=typeof WebSocket&&(Tu=WebSocket);var Su,Cu,Nu=function(){function t(e,n,r,i,o){this.connId=e,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Fo(this.connId),this.stats_=lu.getCollection(n),this.connURL=t.connectionURL_(n,i,o),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n){var r={v:"5"};return"undefined"!=typeof location&&location.hostname&&rs.test(location.hostname)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL("websocket",r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,No.set("previous_websocket_failure",!0);try{if(Ci());else{var r={headers:{"X-Firebase-GMPID":this.applicationId||""}};this.mySock=new Tu(this.connURL,[],r)}}catch(uI){this.log_("Error instantiating WebSocket.");var i=uI.message||uI.data;return i&&this.log_(i),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Tu&&!t.forceDisallow_},t.previouslyFailed=function(){return No.isInMemoryStorage||!0===No.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){No.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Oi(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(di(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=xi(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=Ko(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(uI){this.log_("Exception thrown from WebSocket.send():",uI.message||uI.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),Au=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[bu,Nu]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=Nu&&Nu.isAvailable(),o=i&&!Nu.previouslyFailed();if(e.webSocketOnly&&(i||jo("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[Nu];else{var s=this.transports_=[];try{for(var a=ui(t.ALL_TRANSPORTS),u=a.next();!u.done;u=a.next()){var c=u.value;c&&c.isAvailable()&&s.push(c)}}catch(h){n={error:h}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),ku=function(){function t(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Fo("c:"+this.id+":"),this.transportManager_=new Au(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=ts((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=zo("t",t),n=zo("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=zo("t",t),n=zo("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=zo("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?Vo("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Vo("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&jo("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),ts((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ts((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(No.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),Pu=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),Ou=function(t){function e(n,r,i,o,s,a,u){var c=t.call(this)||this;if(c.repoInfo_=n,c.applicationId_=r,c.onDataUpdate_=i,c.onConnectStatus_=o,c.onServerInfoUpdate_=s,c.authTokenProvider_=a,c.authOverride_=u,c.id=e.nextPersistentConnectionId_++,c.log_=Fo("p:"+c.id+":"),c.interruptReasons_={},c.listens=new Map,c.outstandingPuts_=[],c.outstandingGets_=[],c.outstandingPutCount_=0,c.outstandingGetCount_=0,c.onDisconnectRequestQueue_=[],c.connected_=!1,c.reconnectDelay_=1e3,c.maxReconnectDelay_=3e5,c.securityDebugCallback_=null,c.lastSessionId=null,c.establishConnectionTimer_=null,c.visible_=!1,c.requestCBHash_={},c.requestNumber_=0,c.realtime_=null,c.authToken_=null,c.forceTokenRefresh_=!1,c.invalidAuthTokenCount_=0,c.firstConnection_=!0,c.lastConnectionAttemptTime_=null,c.lastConnectionEstablishedTime_=null,u&&!Ci())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return c.scheduleConnect_(0),gu.getInstance().on("visible",c.onVisible_,c),-1===n.host.indexOf("fblocal")&&mu.getInstance().on("online",c.onOnline_,c),c}return ii(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(xi(i)),di(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this,n=new wi,r={p:t.path.toString(),q:t.queryObject()},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var o=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var t=e.outstandingGets_[o];void 0!==t&&i===t&&(delete e.outstandingGets_[o],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+o+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(o),n.promise},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),di(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),di(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var s={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(o).set(i,s),this.connected_&&this.sendListen_(s)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,(function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r.queryObject(),s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,(function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Di(t,"w")){var n=Li(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();jo("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){var e;(t&&40===t.length||"object"==typeof(e=Ri(t).claims)&&!0===e.admin)&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t,e=this;if(this.connected_&&this.authToken_){var n=this.authToken_,r=(t=Ri(n).claims)&&"object"==typeof t&&t.hasOwnProperty("iat")?"auth":"gauth",i={cred:n};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,(function(t){var r=t.s,i=t.d||"error";e.authToken_===n&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),di(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(function(t){r&&setTimeout((function(){r(t.s,t.d)}),Math.floor(0))}))},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;var s=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(s):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){if("ok"!==t.s){var n=t.d;e.log_("reportStats","Error sending stats: "+n)}}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+xi(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):Vo("Unrecognized action received from server: "+xi(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;di(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){var t=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+e.nextConnectionId_++,s=this,a=this.lastSessionId,u=!1,c=null,h=function(){c?c.close():(u=!0,i())};this.realtime_={close:h,sendRequest:function(t){di(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(t)}};var l=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(l).then((function(t){u?Mo("getToken() completed but was canceled"):(Mo("getToken() completed. Creating connection."),s.authToken_=t&&t.accessToken,c=new ku(o,s.repoInfo_,s.applicationId_,n,r,i,(function(t){jo(t+" ("+s.repoInfo_.toString()+")"),s.interrupt("server_kill")}),a))})).then(null,(function(e){s.log_("Failed to get token: "+e),u||(t.repoInfo_.nodeAdmin&&jo(e),h())}))}},e.prototype.interrupt=function(t){Mo("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){Mo("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Mi(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return Qo(t)})).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new es(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){Mo("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var i=ui(this.listens.values()),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,ui(s.values())),u=a.next();!u.done;u=a.next()){var c=u.value;this.sendListen_(c)}}catch(f){n={error:f}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(p){t={error:p}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var h=0;h<this.outstandingPuts_.length;h++)this.outstandingPuts_[h]&&this.sendPut_(h);for(;this.onDisconnectRequestQueue_.length;){var l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}for(h=0;h<this.outstandingGets_.length;h++)this.outstandingGets_[h]&&this.sendGet_(h)},e.prototype.sendConnectStats_=function(){var t={};t["sdk.js."+Eu.replace(/\./g,"-")]=1,Ii()?t["framework.cordova"]=1:Si()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=mu.getInstance().currentlyOnline();return Mi(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(Pu),xu=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=Fo("p:rest:"),i.listens_={},i}return ii(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(di(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var o=this,s=t.path.toString();this.log_("Listen called for "+s+" "+t.queryIdentifier());var a=e.getListenId_(t,r),u={};this.listens_[a]=u;var c=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(s+".json",c,(function(t,e){var n=e;(404===t&&(n=null,t=null),null===t&&o.onDataUpdate_(s,n,!1,r),Li(o.listens_,a)===u)&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=t.getQueryParams().toRestQueryStringParameters(),r=t.path.toString(),i=new wi;return this.restRequest_(r+".json",n,(function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))})),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then((function(i){var o=i&&i.accessToken;o&&(e.auth=o);var s=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+function(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}(e);r.log_("Sending REST request for "+s);var a=new XMLHttpRequest;a.onreadystatechange=function(){if(n&&4===a.readyState){r.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);var t=null;if(a.status>=200&&a.status<300){try{t=Oi(a.responseText)}catch(uI){jo("Failed to parse JSON response for "+s+": "+a.responseText)}n(null,t)}else 401!==a.status&&404!==a.status&&jo("Got unsuccessful REST response for "+s+" Status: "+a.status),n(a.status);n=null}},a.open("GET",s,!0),a.send()}))},e}(Pu),Ru=function(){this.children={},this.childCount=0,this.value=null},Du=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new Ru),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n=e instanceof es?e:new es(e),r=this,i=n.getFront();null!==i;){r=new t(i,r,Li(r.node_.children,i)||new Ru),i=(n=n.popFront()).getFront()}return r},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){di(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;Yo(this.node_.children,(function(r,i){e(new t(r,n,i))}))},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild((function(e){e.forEachDescendant(t,!0,n)})),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild((function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)}))},t.prototype.path=function(){return new es(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=Di(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(Cu=Su||(Su={}))[Cu.RUN=0]="RUN",Cu[Cu.SENT=1]="SENT",Cu[Cu.COMPLETED=2]="COMPLETED",Cu[Cu.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",Cu[Cu.NEEDS_ABORT=4]="NEEDS_ABORT";var Lu=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new du,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new Sa,this.transactionQueueTree_=new Du,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.start=function(){var t=this;if(this.stats_=lu.getCollection(this.repoInfo_),this.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)this.server_=new xu(this.repoInfo_,this.onDataUpdate_.bind(this),this.authTokenProvider_),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var e=this.app.options.databaseAuthVariableOverride;if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{xi(e)}catch(uI){throw new Error("Invalid authOverride provided: "+uI)}}this.persistentConnection_=new Ou(this.repoInfo_,this.app.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),this.authTokenProvider_,e),this.server_=this.persistentConnection_}this.authTokenProvider_.addTokenChangeListener((function(e){t.server_.refreshAuthToken(e)})),this.statsReporter_=lu.getOrCreateReporter(this.repoInfo_,(function(){return new pu(t.stats_,t.server_)})),this.infoData_=new cu,this.infoSyncTree_=new uu({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e.path);return s.isEmpty()||(o=t.infoSyncTree_.applyServerOverwrite(e.path,s),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new uu({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,(function(n,r){var o=i(n,r);t.eventQueue_.raiseEventsForChangedPath(e.path,o)})),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})},t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new es(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new es(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o=[];if(r)if(n){var s=Fi(e,(function(t){return oa(t)}));o=this.serverSyncTree_.applyTaggedQueryMerge(i,s,r)}else{var a=oa(e);o=this.serverSyncTree_.applyTaggedQueryOverwrite(i,a,r)}else if(n){var u=Fi(e,(function(t){return oa(t)}));o=this.serverSyncTree_.applyServerMerge(i,u)}else{var c=oa(e);o=this.serverSyncTree_.applyServerOverwrite(i,c)}var h=i;o.length>0&&(h=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(h,o)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;Yo(t,(function(t,n){e.updateInfo_(t,n)}))},t.prototype.updateInfo_=function(t,e){var n=new es("/.info/"+t),r=oa(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.getValue=function(t){var e=this,n=this.serverSyncTree_.getServerValue(t);return null!=n?Promise.resolve(new ca(n,t.getRef(),t.getQueryParams().getIndex())):this.server_.get(t).then((function(n){var r=oa(n),i=e.serverSyncTree_.applyServerOverwrite(t.path,r);return e.eventQueue_.raiseEventsAtPath(t.path,i),Promise.resolve(new ca(r,t.getRef(),t.getQueryParams().getIndex()))}),(function(n){return e.log_("get for query "+xi(t)+" failed: "+n),Promise.reject(new Error(n))}))},t.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),s=oa(e,n),a=this.serverSyncTree_.calcCompleteEventCache(t),u=wa(s,a,o),c=this.getNextWriteId_(),h=this.serverSyncTree_.applyUserOverwrite(t,u,c,!0);this.eventQueue_.queueEvents(h),this.server_.put(t.toString(),s.val(!0),(function(e,n){var o="ok"===e;o||jo("set at "+t+" failed: "+e);var s=i.serverSyncTree_.ackUserWrite(c,!o);i.eventQueue_.raiseEventsForChangedPath(t,s),i.callOnCompleteCallback(r,e,n)}));var l=this.abortTransactions_(t);this.rerunTransactions_(l),this.eventQueue_.raiseEventsForChangedPath(l,[])},t.prototype.update=function(t,e,n){var r=this;this.log_("update",{path:t.toString(),value:e});var i=!0,o=this.generateServerValues(),s={};if(Yo(e,(function(e,n){i=!1,s[e]=ba(t.child(e),oa(n),r.serverSyncTree_,o)})),i)Mo("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var a=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(t,s,a);this.eventQueue_.queueEvents(u),this.server_.merge(t.toString(),e,(function(e,i){var o="ok"===e;o||jo("update at "+t+" failed: "+e);var s=r.serverSyncTree_.ackUserWrite(a,!o),u=s.length>0?r.rerunTransactions_(t):t;r.eventQueue_.raiseEventsForChangedPath(u,s),r.callOnCompleteCallback(n,e,i)})),Yo(e,(function(e){var n=r.abortTransactions_(t.child(e));r.rerunTransactions_(n)})),this.eventQueue_.raiseEventsForChangedPath(t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=new Sa;this.onDisconnect_.forEachTree(es.Empty,(function(r,i){var o=ba(r,i,t.serverSyncTree_,e);n.remember(r,o)}));var r=[];n.forEachTree(es.Empty,(function(e,n){r=r.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var i=t.abortTransactions_(e);t.rerunTransactions_(i)})),this.onDisconnect_=new Sa,this.eventQueue_.raiseEventsForChangedPath(es.Empty,r)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)}))},t.prototype.onDisconnectSet=function(t,e,n){var r=this,i=oa(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),(function(e,o){"ok"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)}))},t.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=oa(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),(function(e,n){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)}))},t.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if(Mi(e))return Mo("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,(function(i,o){"ok"===i&&Yo(e,(function(e,n){var i=oa(n);r.onDisconnect_.remember(t.child(e),i)})),r.callOnCompleteCallback(n,i,o)}))},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt("repo_interrupt")},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume("repo_interrupt")},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new fu(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce((function(t,e){return Math.max(e.length,t)}),0);Yo(e,(function(t,e){for(var r=t,i=t.length;i<n+2;i++)r+=" ";console.log(r+e)}))}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),Mo.apply(void 0,hi([n],t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&Zo((function(){if("ok"===e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}}))},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new Hu(this))},enumerable:!1,configurable:!0}),t.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);var i=function(){},o=new Uu(this,t);o.on("value",i);var s={path:t,update:e,onComplete:n,status:null,order:Po(),applyLocally:r,retryCount:0,unwatcher:function(){o.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=this.getLatestState_(t);s.currentInputSnapshot=a;var u=s.update(a.val());if(void 0===u){if(s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete){var c=new ca(s.currentInputSnapshot,new Uu(this,s.path),Gs);s.onComplete(null,!1,c)}}else{gs("transaction failed: Data returned ",u,s.path),s.status=Su.RUN;var h=this.transactionQueueTree_.subTree(t),l=h.getValue()||[];l.push(s),h.setValue(l);var f=void 0;if("object"==typeof u&&null!==u&&Di(u,".priority"))f=Li(u,".priority"),di(vs(f),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else f=(this.serverSyncTree_.calcCompleteEventCache(t)||ra.EMPTY_NODE).getPriority().val();var p=this.generateServerValues(),d=oa(u,f),v=wa(d,a,p);s.currentOutputSnapshotRaw=d,s.currentOutputSnapshotResolved=v,s.currentWriteId=this.getNextWriteId_();var y=this.serverSyncTree_.applyUserOverwrite(t,v,s.currentWriteId,s.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,y),this.sendReadyTransactions_()}},t.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||ra.EMPTY_NODE},t.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);di(n.length>0,"Sending zero length transaction queue"),n.every((function(t){return t.status===Su.RUN}))&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild((function(t){e.sendReadyTransactions_(t)}))},t.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map((function(t){return t.currentWriteId})),i=this.getLatestState_(t,r),o=i,s=i.hash(),a=0;a<e.length;a++){var u=e[a];di(u.status===Su.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=Su.SENT,u.retryCount++;var c=es.relativePath(t,u.path);o=o.updateChild(c,u.currentOutputSnapshotRaw)}var h=o.val(!0),l=t;this.server_.put(l.toString(),h,(function(r){n.log_("transaction put response",{path:l.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=0;s<e.length;s++){if(e[s].status=Su.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[s].currentWriteId)),e[s].onComplete){var a=e[s].currentOutputSnapshotResolved,u=new Uu(n,e[s].path),c=new ca(a,u,Gs);o.push(e[s].onComplete.bind(null,null,!0,c))}e[s].unwatcher()}n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,i);for(s=0;s<o.length;s++)Zo(o[s])}else{if("datastale"===r)for(s=0;s<e.length;s++)e[s].status===Su.SENT_NEEDS_ABORT?e[s].status=Su.NEEDS_ABORT:e[s].status=Su.RUN;else{jo("transaction at "+l.toString()+" failed: "+r);for(s=0;s<e.length;s++)e[s].status=Su.NEEDS_ABORT,e[s].abortReason=r}n.rerunTransactions_(t)}}),s)},t.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},t.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n,r=[],i=[],o=t.filter((function(t){return t.status===Su.RUN})).map((function(t){return t.currentWriteId})),s=0;s<t.length;s++){var a=t[s],u=es.relativePath(e,a.path),c=!1,h=void 0;if(di(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===Su.NEEDS_ABORT)c=!0,h=a.abortReason,i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else if(a.status===Su.RUN)if(a.retryCount>=25)c=!0,h="maxretry",i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else{var l=this.getLatestState_(a.path,o);a.currentInputSnapshot=l;var f=t[s].update(l.val());if(void 0!==f){gs("transaction failed: Data returned ",f,a.path);var p=oa(f);"object"==typeof f&&null!=f&&Di(f,".priority")||(p=p.updatePriority(l.getPriority()));var d=a.currentWriteId,v=this.generateServerValues(),y=wa(p,l,v);a.currentOutputSnapshotRaw=p,a.currentOutputSnapshotResolved=y,a.currentWriteId=this.getNextWriteId_(),o.splice(o.indexOf(d),1),i=(i=i.concat(this.serverSyncTree_.applyUserOverwrite(a.path,y,a.currentWriteId,a.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(d,!0))}else c=!0,h="nodata",i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,i),i=[],c&&(t[s].status=Su.COMPLETED,n=t[s].unwatcher,setTimeout(n,Math.floor(0)),t[s].onComplete))if("nodata"===h){var g=new Uu(this,t[s].path),m=t[s].currentInputSnapshot,_=new ca(m,g,Gs);r.push(t[s].onComplete.bind(null,null,!1,_))}else r.push(t[s].onComplete.bind(null,new Error(h),!1,null))}this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);for(s=0;s<r.length;s++)Zo(r[s]);this.sendReadyTransactions_()}},t.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=t.getFront();null!==e&&null===n.getValue();)n=n.subTree(e),e=(t=t.popFront()).getFront();return n},t.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort((function(t,e){return t.order-e.order})),e},t.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild((function(t){n.aggregateTransactionQueuesForNode_(t,e)}))},t.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==Su.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild((function(t){e.pruneCompletedTransactionsBelowNode_(t)}))},t.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor((function(t){e.abortTransactionsOnNode_(t)})),this.abortTransactionsOnNode_(r),r.forEachDescendant((function(t){e.abortTransactionsOnNode_(t)})),n},t.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,o=0;o<e.length;o++)if(e[o].status===Su.SENT_NEEDS_ABORT);else if(e[o].status===Su.SENT)di(i===o-1,"All SENT items should be at beginning of queue."),i=o,e[o].status=Su.SENT_NEEDS_ABORT,e[o].abortReason="set";else if(di(e[o].status===Su.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete){n.push(e[o].onComplete.bind(null,new Error("set"),!1,null))}-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r);for(o=0;o<n.length;o++)Zo(n[o])}},t}(),Mu=function(){function t(e){this.indexedFilter_=new ja(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Rs(e,n))||(n=ra.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=ra.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(ra.EMPTY_NODE);var i=this;return e.forEachChild(Gs,(function(t,e){i.matches(new Rs(t,e))||(r=r.updateImmediateChild(t,ra.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),Fu=function(){function t(t){this.rangedFilter_=new Mu(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Rs(e,n))||(n=ra.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=ra.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=ra.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(ra.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;i=void 0;if(this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var h=this.index_.getCompare();c=function(t,e){return h(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var l=!1;i.hasNext();){s=i.getNext();!l&&c(a,s)<=0&&(l=!0),l&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,ra.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o;if(this.reverse_){var s=this.index_.getCompare();o=function(t,e){return s(e,t)}}else o=this.index_.getCompare();var a=t;di(a.numChildren()===this.limit_,"");var u=new Rs(e,n),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(u);if(a.hasChild(e)){for(var l=a.getImmediateChild(e),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===e||a.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:o(f,u);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(Va(e,n,l)),a.updateImmediateChild(e,n);null!=i&&i.trackChildChange(Fa(e,l));var d=a.updateImmediateChild(e,ra.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(Ma(f.name,f.node)),d.updateImmediateChild(f.name,f.node)):d}return n.isEmpty()?t:h&&o(c,u)>=0?(null!=i&&(i.trackChildChange(Fa(c.name,c.node)),i.trackChildChange(Ma(e,n))),a.updateImmediateChild(e,n).updateImmediateChild(c.name,ra.EMPTY_NODE)):t},t}(),Vu=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Gs}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},t.prototype.getIndexStartValue=function(){return di(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return di(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Bo},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return di(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return di(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Wo},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return di(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.copy_=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},t.prototype.limitToFirst=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},t.prototype.limitToLast=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},t.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},t.prototype.startAfter=function(t,e){var n;if(this.index_===Ms)"string"==typeof t&&(t=Os(t)),n=this.startAt(t,e);else{var r=void 0;r=null==e?Wo:Os(e),n=this.startAt(t,r)}return n.startAfterSet_=!0,n},t.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},t.prototype.endBefore=function(t,e){var n,r;return this.index_===Ms?("string"==typeof t&&(t=xs(t)),r=this.endAt(t,e)):(n=null==e?Bo:xs(e),r=this.endAt(t,n)),r.endBeforeSet_=!0,r},t.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},t.prototype.getQueryObject=function(){var e=t.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[e.LIMIT]=this.limit_;var r=this.viewFrom_;""===r&&(r=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=r}return this.index_!==Gs&&(n[e.INDEX]=this.index_.toString()),n},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Gs},t.prototype.getNodeFilter=function(){return this.loadsAllData()?new ja(this.getIndex()):this.hasLimit()?new Fu(this):new Mu(this)},t.prototype.toRestQueryStringParameters=function(){var e,n=t.REST_QUERY_CONSTANTS_,r={};return this.isDefault()||(this.index_===Gs?e=n.PRIORITY_INDEX:this.index_===aa?e=n.VALUE_INDEX:this.index_===Ms?e=n.KEY_INDEX:(di(this.index_ instanceof ua,"Unrecognized index type!"),e=this.index_.toString()),r[n.ORDER_BY]=xi(e),this.startSet_&&(r[n.START_AT]=xi(this.indexStartValue_),this.startNameSet_&&(r[n.START_AT]+=","+xi(this.indexStartName_))),this.endSet_&&(r[n.END_AT]=xi(this.indexEndValue_),this.endNameSet_&&(r[n.END_AT]+=","+xi(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?r[n.LIMIT_TO_FIRST]=this.limit_:r[n.LIMIT_TO_LAST]=this.limit_)),r},t.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},t.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},t}(),Uu=function(t){function e(e,n){if(!(e instanceof Lu))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,new Vu,!1)||this}return ii(e,t),e.prototype.getKey=function(){return Bi("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(t){return Bi("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof es||(null===this.path.getFront()?Is("Reference.child",1,t,!1):Es("Reference.child",1,t,!1)),new e(this.repo,this.path.child(t))},e.prototype.getParent=function(){Bi("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){Bi("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){Bi("Reference.set",1,2,arguments.length),Ts("Reference.set",this.path),ys("Reference.set",1,t,this.path,!1),Hi("Reference.set",2,e,!0);var n=new wi;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(Bi("Reference.update",1,2,arguments.length),Ts("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,jo("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ms("Reference.update",1,t,this.path,!1),Hi("Reference.update",2,e,!0);var i=new wi;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(Bi("Reference.setWithPriority",2,3,arguments.length),Ts("Reference.setWithPriority",this.path),ys("Reference.setWithPriority",1,t,this.path,!1),_s("Reference.setWithPriority",2,e,!1),Hi("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new wi;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return Bi("Reference.remove",0,1,arguments.length),Ts("Reference.remove",this.path),Hi("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(Bi("Reference.transaction",1,3,arguments.length),Ts("Reference.transaction",this.path),Hi("Reference.transaction",1,t,!1),Hi("Reference.transaction",2,e,!0),Cs("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new wi;"function"==typeof e&&r.promise.catch((function(){}));var i=function(t,n,i){t?r.reject(t):r.resolve(new As(n,i)),"function"==typeof e&&e(t,n,i)};return this.repo.startTransaction(this.path,t,i,n),r.promise},e.prototype.setPriority=function(t,e){Bi("Reference.setPriority",1,2,arguments.length),Ts("Reference.setPriority",this.path),_s("Reference.setPriority",1,t,!1),Hi("Reference.setPriority",2,e,!0);var n=new wi;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){Bi("Reference.push",0,2,arguments.length),Ts("Reference.push",this.path),ys("Reference.push",1,t,this.path,!0),Hi("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=Ps(r),o=this.child(i),s=this.child(i);return n=null!=t?o.set(t,e).then((function(){return s})):Promise.resolve(s),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch((function(){})),o},e.prototype.onDisconnect=function(){return Ts("Reference.onDisconnect",this.path),new Ns(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(da);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */da.__referenceConstructor=Uu,Ka.__referenceConstructor=Uu;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ju,qu=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then((function(t){return n.auth_=t}))}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(Mo("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout((function(){return t(null)}),0),this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)})))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',jo(t)},t}(),Bu=function(){function t(){}return t.prototype.getToken=function(e){return Promise.resolve({accessToken:t.EMULATOR_AUTH_TOKEN})},t.prototype.addTokenChangeListener=function(e){e(t.EMULATOR_AUTH_TOKEN)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.EMULATOR_AUTH_TOKEN="owner",t}(),Wu=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return ju||(ju=new t),ju},t.prototype.interrupt=function(){var t,e,n,r;try{for(var i=ui(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,ui(Object.keys(this.repos_[s]))),u=a.next();!u.done;u=a.next()){var c=u.value;this.repos_[s][c].interrupt()}}catch(h){n={error:h}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(l){t={error:l}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},t.prototype.resume=function(){var t,e,n,r;try{for(var i=ui(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,ui(Object.keys(this.repos_[s]))),u=a.next();!u.done;u=a.next()){var c=u.value;this.repos_[s][c].resume()}}catch(h){n={error:h}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(l){t={error:l}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},t.prototype.applyEmulatorSettings=function(t,e,n){t.repoInfo_=new is(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new Bu)},t.prototype.databaseFromApp=function(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||Uo("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Mo("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var o,s=cs(i,r),a=s.repoInfo,u=void 0;"undefined"!=typeof process&&(u=process.env.FIREBASE_DATABASE_EMULATOR_HOST),u?(o=!0,i="http://"+u+"?ns="+a.namespace,a=(s=cs(i,r)).repoInfo):o=!s.repoInfo.secure;var c=r&&o?new Bu:new qu(t,e);return Ss("Invalid Firebase Database URL",1,s),s.path.isEmpty()||Uo("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(a,t,c).database},t.prototype.deleteRepo=function(t){var e=Li(this.repos_,t.app.name);e&&Li(e,t.key)===t||Uo("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.key]},t.prototype.createRepo=function(t,e,n){var r=Li(this.repos_,e.name);r||(r={},this.repos_[e.name]=r);var i=Li(r,t.toURLString());return i&&Uo("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new Lu(t,this.useRestClient_,e,n),r[t.toURLString()]=i,i},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),Hu=function(){function t(t){var e=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return si(e,void 0,void 0,(function(){return ai(this,(function(t){return this.checkDeleted_("delete"),Wu.getInstance().deleteRepo(this.repo_),this.repoInternal_=null,this.rootInternal_=null,[2]}))}))}},t instanceof Lu||Uo("Don't call new Database() directly - please use firebase.database().")}return Object.defineProperty(t.prototype,"repo_",{get:function(){return this.instanceStarted_||(this.repoInternal_.start(),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new Uu(this.repo_,es.Empty)),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),t.prototype.useEmulator=function(t,e){this.checkDeleted_("useEmulator"),this.instanceStarted_?Uo("Cannot call useEmulator() after instance has already been initialized."):Wu.getInstance().applyEmulatorSettings(this.repoInternal_,t,e)},t.prototype.ref=function(t){return this.checkDeleted_("ref"),Bi("database.ref",0,1,arguments.length),t instanceof Uu?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),Bi(e,1,1,arguments.length);var n=cs(t,this.repo_.repoInfo_.nodeAdmin);Ss(e,1,n);var r=n.repoInfo;return this.repo_.repoInfo_.isCustomHost()||r.host===this.repo_.repoInfo_.host||Uo(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repoInternal_&&Uo("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){Bi("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){Bi("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},t}();var Gu=Object.freeze({__proto__:null,forceLongPolling:function(){Nu.forceDisallow(),bu.forceAllow()},forceWebSockets:function(){bu.forceDisallow()},isWebSocketsAvailable:function(){return Nu.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.version,i=t.customAuthImpl,o=t.namespace,s=t.nodeAdmin,a=void 0!==s&&s;Iu(r);var u=new Ki("auth-internal",new Xi("database-standalone"));return u.setComponent(new Qi("auth-internal",(function(){return i}),"PRIVATE")),{instance:Wu.getInstance().databaseFromApp(e,u,n,a),namespace:o}}}),zu=Ou;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ou.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Ou.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Qu,Ku=ku,Yu=is,Xu=Object.freeze({__proto__:null,DataConnection:zu,RealTimeConnection:Ku,hijackHash:function(t){var e=Ou.prototype.put;return Ou.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Ou.prototype.put=e}},ConnectionTarget:Yu,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){Wu.getInstance().forceRestClient(t)}}),$u=Hu.ServerValue;Iu((Qu=Eo).SDK_VERSION),Qu.INTERNAL.registerComponent(new Qi("database",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return Wu.getInstance().databaseFromApp(n,r,e)}),"PUBLIC").setServiceProps({Reference:Uu,Query:da,Database:Hu,DataSnapshot:ca,enableLogging:Lo,INTERNAL:Gu,ServerValue:$u,TEST_ACCESS:Xu}).setMultipleInstances(!0)),Qu.registerVersion("@firebase/database","0.9.3");
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var Ju=function(t,e){return(Ju=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Zu(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var tc,ec="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},nc=nc||{},rc=ec||self;function ic(){}function oc(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function sc(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var ac="closure_uid_"+(1e9*Math.random()>>>0),uc=0;function cc(t,e,n){return t.call.apply(t.bind,arguments)}function hc(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function lc(t,e,n){return(lc=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?cc:hc).apply(null,arguments)}function fc(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function pc(){return Date.now()}function dc(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function vc(){this.j=this.j,this.i=this.i}vc.prototype.j=!1,vc.prototype.ja=function(){var t;!this.j&&(this.j=!0,this.G(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,ac)&&t[ac]||(t[ac]=++uc))},vc.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var yc=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},gc=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function mc(t){return Array.prototype.concat.apply([],arguments)}function _c(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function bc(t){return/^[\s\xa0]*$/.test(t)}var wc,Ec=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Ic(t,e){return-1!=t.indexOf(e)}function Tc(t,e){return t<e?-1:t>e?1:0}t:{var Sc=rc.navigator;if(Sc){var Cc=Sc.userAgent;if(Cc){wc=Cc;break t}}wc=""}function Nc(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Ac(t){var e={};for(var n in t)e[n]=t[n];return e}var kc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Pc(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<kc.length;o++)n=kc[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Oc(t){return Oc[" "](t),t}Oc[" "]=ic;var xc,Rc,Dc=Ic(wc,"Opera"),Lc=Ic(wc,"Trident")||Ic(wc,"MSIE"),Mc=Ic(wc,"Edge"),Fc=Mc||Lc,Vc=Ic(wc,"Gecko")&&!(Ic(wc.toLowerCase(),"webkit")&&!Ic(wc,"Edge"))&&!(Ic(wc,"Trident")||Ic(wc,"MSIE"))&&!Ic(wc,"Edge"),Uc=Ic(wc.toLowerCase(),"webkit")&&!Ic(wc,"Edge");function jc(){var t=rc.document;return t?t.documentMode:void 0}t:{var qc="",Bc=(Rc=wc,Vc?/rv:([^\);]+)(\)|;)/.exec(Rc):Mc?/Edge\/([\d\.]+)/.exec(Rc):Lc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Rc):Uc?/WebKit\/(\S+)/.exec(Rc):Dc?/(?:Version)[ \/]?(\S+)/.exec(Rc):void 0);if(Bc&&(qc=Bc?Bc[1]:""),Lc){var Wc=jc();if(null!=Wc&&Wc>parseFloat(qc)){xc=String(Wc);break t}}xc=qc}var Hc,Gc={};function zc(t){return function(t,e){var n=Gc;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=Ec(String(xc)).split("."),r=Ec(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=Tc(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||Tc(0==s[2].length,0==a[2].length)||Tc(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}if(rc.document&&Lc){var Qc=jc();Hc=Qc||(parseInt(xc,10)||void 0)}else Hc=void 0;var Kc=Hc,Yc=!Lc||9<=Number(Kc),Xc=Lc&&!zc("9"),$c=function(){if(!rc.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{rc.addEventListener("test",ic,e),rc.removeEventListener("test",ic,e)}catch(n){}return t}();function Jc(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Zc(t,e){if(Jc.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Vc){t:{try{Oc(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:th[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Jc.prototype.b=function(){this.defaultPrevented=!0},dc(Zc,Jc);var th={2:"touch",3:"pen",4:"mouse"};Zc.prototype.b=function(){Zc.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Xc)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var eh="closure_listenable_"+(1e6*Math.random()|0),nh=0;function rh(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++nh,this.Y=this.Z=!1}function ih(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function oh(t){this.src=t,this.a={},this.b=0}function sh(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=yc(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ih(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function ah(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}oh.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=ah(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new rh(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var uh="closure_lm_"+(1e6*Math.random()|0),ch={};function hh(t,e,n,r,i){if(r&&r.once)return fh(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)hh(t,e[o],n,r,i);return null}return n=bh(n),t&&t[eh]?t.va(e,n,sc(r)?!!r.capture:!!r,i):lh(t,e,n,!1,r,i)}function lh(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=sc(i)?!!i.capture:!!i;if(s&&!Yc)return null;var a=mh(t);if(a||(t[uh]=a=new oh(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=gh,e=Yc?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)$c||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(vh(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function fh(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)fh(t,e[o],n,r,i);return null}return n=bh(n),t&&t[eh]?t.wa(e,n,sc(r)?!!r.capture:!!r,i):lh(t,e,n,!0,r,i)}function ph(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)ph(t,e[o],n,r,i);else r=sc(r)?!!r.capture:!!r,n=bh(n),t&&t[eh]?(t=t.c,(e=String(e).toString())in t.a&&(-1<(n=ah(o=t.a[e],n,r,i))&&(ih(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=mh(t))&&(e=t.a[e.toString()],t=-1,e&&(t=ah(e,n,r,i)),(n=-1<t?e[t]:null)&&dh(n))}function dh(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[eh])sh(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(vh(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=mh(e))?(sh(n,t),0==n.b&&(n.src=null,e[uh]=null)):ih(t)}}}function vh(t){return t in ch?ch[t]:ch[t]="on"+t}function yh(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&dh(t),n.call(r,e)}function gh(t,e){if(t.Y)return!0;if(!Yc){if(!e)t:{e=["window","event"];for(var n=rc,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return yh(t,e=new Zc(e,this))}return yh(t,new Zc(e,this))}function mh(t){return(t=t[uh])instanceof oh?t:null}var _h="__closure_events_fn_"+(1e9*Math.random()>>>0);function bh(t){return"function"==typeof t?t:(t[_h]||(t[_h]=function(e){return t.handleEvent(e)}),t[_h])}function wh(){vc.call(this),this.c=new oh(this),this.J=this,this.C=null}function Eh(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new Jc(e,t);else if(e instanceof Jc)e.target=e.target||t;else{var i=e;Pc(e=new Jc(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=Ih(s,r,!0,e)&&i}if(i=Ih(s=e.a=t,r,!0,e)&&i,i=Ih(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Ih(s=e.a=n[o],r,!1,e)&&i}function Ih(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&sh(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}dc(wh,vc),wh.prototype[eh]=!0,(tc=wh.prototype).addEventListener=function(t,e,n,r){hh(this,t,e,n,r)},tc.removeEventListener=function(t,e,n,r){ph(this,t,e,n,r)},tc.G=function(){if(wh.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)ih(n[r]);delete e.a[t],e.b--}}this.C=null},tc.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},tc.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Th=rc.JSON.stringify;function Sh(){this.b=this.a=null}var Ch,Nh=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new kh}),(function(t){t.reset()}));function Ah(){var t=Rh,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function kh(){this.next=this.b=this.a=null}function Ph(t){rc.setTimeout((function(){throw t}),0)}function Oh(t,e){Ch||function(){var t=rc.Promise.resolve(void 0);Ch=function(){t.then(Dh)}}(),xh||(Ch(),xh=!0),Rh.add(t,e)}Sh.prototype.add=function(t,e){var n=Nh.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},kh.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},kh.prototype.reset=function(){this.next=this.b=this.a=null};var xh=!1,Rh=new Sh;function Dh(){for(var t;t=Ah();){try{t.a.call(t.b)}catch(n){Ph(n)}var e=Nh;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}xh=!1}function Lh(t,e){wh.call(this),this.b=t||1,this.a=e||rc,this.f=lc(this.Za,this),this.g=pc()}function Mh(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Fh(t,e,n){if("function"==typeof t)n&&(t=lc(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=lc(t.handleEvent,t)}return 2147483647<Number(e)?-1:rc.setTimeout(t,e||0)}function Vh(t){t.a=Fh((function(){t.a=null,t.c&&(t.c=!1,Vh(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}dc(Lh,wh),(tc=Lh.prototype).aa=!1,tc.M=null,tc.Za=function(){if(this.aa){var t=pc()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Eh(this,"tick"),this.aa&&(Mh(this),this.start()))}},tc.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=pc())},tc.G=function(){Lh.X.G.call(this),Mh(this),delete this.a};var Uh=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}Ju(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Vh(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(rc.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(vc);function jh(t){vc.call(this),this.b=t,this.a={}}dc(jh,vc);var qh=[];function Bh(t,e,n,r){Array.isArray(n)||(n&&(qh[0]=n.toString()),n=qh);for(var i=0;i<n.length;i++){var o=hh(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Wh(t){Nc(t.a,(function(t,e){this.a.hasOwnProperty(e)&&dh(t)}),t),t.a={}}function Hh(){this.a=!0}function Gh(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Th(n)}catch(a){return e}}(t,n)+(r?" "+r:"")}))}jh.prototype.G=function(){jh.X.G.call(this),Wh(this)},jh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Hh.prototype.info=function(){};var zh={},Qh=null;function Kh(){return Qh=Qh||new wh}function Yh(t){Jc.call(this,zh.Fa,t)}function Xh(t){var e=Kh();Eh(e,new Yh(e,t))}function $h(t,e){Jc.call(this,zh.STAT_EVENT,t),this.stat=e}function Jh(t){var e=Kh();Eh(e,new $h(e,t))}function Zh(t){Jc.call(this,zh.Ga,t)}function tl(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return rc.setTimeout((function(){t()}),e)}zh.Fa="serverreachability",dc(Yh,Jc),zh.STAT_EVENT="statevent",dc($h,Jc),zh.Ga="timingevent",dc(Zh,Jc);var el={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},nl={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function rl(){}function il(t){var e;return(e=t.a)||(e=t.a={}),e}function ol(){}rl.prototype.a=null;var sl,al={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function ul(){Jc.call(this,"d")}function cl(){Jc.call(this,"c")}function hl(){}function ll(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new jh(this),this.P=fl,t=Fc?125:void 0,this.R=new Lh(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}dc(ul,Jc),dc(cl,Jc),dc(hl,rl),sl=new hl;var fl=45e3,pl={},dl={};function vl(t,e,n){t.H=1,t.i=Fl(Ol(e)),t.j=n,t.I=!0,yl(t,null)}function yl(t,e){t.u=pc(),_l(t),t.l=Ol(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Xl(n.b,"t",r),t.D=0,t.a=Gf(t.g,t.g.C?e:null),0<t.O&&(t.F=new Uh(lc(t.Ca,t,t.a),t.O)),Bh(t.J,t.a,"readystatechange",t.Xa),e=t.B?Ac(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Xh(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var h=c[0];c=c[1];var l=h.split("_");s=2<=l.length&&"type"==l[1]?s+(h+"=")+c+"&":s+(h+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.c,t.m,t.l,t.f,t.S,t.j)}function gl(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=ml(t,n);if(i==dl){4==e&&(t.h=4,Jh(14),r=!1),Gh(t.c,t.f,null,"[Incomplete Response]");break}if(i==pl){t.h=4,Jh(15),Gh(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Gh(t.c,t.f,i,null),Tl(t,i)}4==e&&0==n.length&&(t.h=1,Jh(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ff(e),e.F=!0,Jh(11))):(Gh(t.c,t.f,n,"[Invalid Chunked Response]"),Il(t),El(t))}function ml(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?dl:(n=Number(e.substring(n,r)),isNaN(n)?pl:(r+=1)+n>e.length?dl:(e=e.substr(r,n),t.D=r+n,e))}function _l(t){t.T=pc()+t.P,bl(t,t.P)}function bl(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=tl(lc(t.Va,t),e)}function wl(t){t.o&&(rc.clearTimeout(t.o),t.o=null)}function El(t){0==t.g.v||t.A||jf(t.g,t)}function Il(t){wl(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Mh(t.R),Wh(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Tl(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||rf(n.b,t)))if(n.I=t.N,!t.C&&rf(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(y){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Uf(n),Af(n)}Mf(n),Jh(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=tl(lc(n.Sa,n),6e3));if(1>=nf(n.b)&&n.ea){try{n.ea()}catch(y){}n.ea=void 0}}else Bf(n,11)}else if((t.C||n.a==t)&&Uf(n),!bc(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var h=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var l=u.b;!l.a&&(Ic(h,"spdy")||Ic(h,"quic")||Ic(h,"h2"))&&(l.f=l.g,l.a=new Set,l.b&&(of(l,l.b),l.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,Ml(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=pc()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var p=t;if((u=n).la=Hf(u,u.C?u.ga:null,u.fa),p.C){sf(u.b,p);var d=p,v=u.D;v&&d.setTimeout(v),d.o&&(wl(d),_l(d)),u.a=p}else Lf(u);0<n.g.length&&Of(n)}else"stop"!=i[0]&&"close"!=i[0]||Bf(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Bf(n,7):Nf(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Xh(4)}catch(y){}}function Sl(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(oc(t)||"string"==typeof t)gc(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(oc(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(oc(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Cl(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Cl)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Nl(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Al(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Al(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Al(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(tc=ll.prototype).setTimeout=function(t){this.P=t},tc.Xa=function(t){t=t.target;var e=this.F;e&&3==If(t)?e.f():this.Ca(t)},tc.Ca=function(t){try{if(t==this.a)t:{var e=If(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!Fc&&!this.a.$())){this.A||4!=e||7==n||Xh(8==n||0>=r?3:2),wl(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!bc(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,Jh(12),Il(this),El(this);break t}Gh(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Tl(this,u)}this.I?(gl(this,e,o),Fc&&this.b&&3==e&&(Bh(this.J,this.R,"tick",this.Wa),this.R.start())):(Gh(this.c,this.f,o,null),Tl(this,o)),4==e&&Il(this),this.b&&!this.A&&(4==e?jf(this.g,this):(this.b=!1,_l(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,Jh(12)):(this.h=0,Jh(13)),Il(this),El(this)}}}catch(c){}},tc.Wa=function(){if(this.a){var t=If(this.a),e=this.a.$();this.D<e.length&&(wl(this),gl(this,t,e),this.b&&4!=t&&_l(this))}},tc.cancel=function(){this.A=!0,Il(this)},tc.Va=function(){this.o=null;var t=pc();0<=t-this.T?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(Xh(3),Jh(17)),Il(this),this.h=2,El(this)):bl(this,this.T-t)},(tc=Cl.prototype).K=function(){Nl(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},tc.L=function(){return Nl(this),this.a.concat()},tc.get=function(t,e){return Al(this.b,t)?this.b[t]:e},tc.set=function(t,e){Al(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},tc.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var kl=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Pl(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Pl){this.a=void 0!==e?e:t.a,xl(this,t.f),this.j=t.j,Rl(this,t.c),Dl(this,t.h),this.g=t.g,e=t.b;var n=new zl;n.c=e.c,e.a&&(n.a=new Cl(e.a),n.b=e.b),Ll(this,n),this.i=t.i}else t&&(n=String(t).match(kl))?(this.a=!!e,xl(this,n[1]||"",!0),this.j=Vl(n[2]||""),Rl(this,n[3]||"",!0),Dl(this,n[4]),this.g=Vl(n[5]||"",!0),Ll(this,n[6]||"",!0),this.i=Vl(n[7]||"")):(this.a=!!e,this.b=new zl(null,this.a))}function Ol(t){return new Pl(t)}function xl(t,e,n){t.f=n?Vl(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Rl(t,e,n){t.c=n?Vl(e,!0):e}function Dl(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Ll(t,e,n){e instanceof zl?(t.b=e,function(t,e){e&&!t.f&&(Ql(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Kl(this,e),Xl(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=Ul(e,Hl)),t.b=new zl(e,t.a))}function Ml(t,e,n){t.b.set(e,n)}function Fl(t){return Ml(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^pc()).toString(36)),t}function Vl(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ul(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,jl),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function jl(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Pl.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Ul(e,ql,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Ul(e,ql,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Ul(n,"/"==n.charAt(0)?Wl:Bl,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Ul(n,Gl)),t.join("")};var ql=/[#\/\?@]/g,Bl=/[#\?:]/g,Wl=/[#\?]/g,Hl=/[#\?@]/g,Gl=/#/g;function zl(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Ql(t){t.a||(t.a=new Cl,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Kl(t,e){Ql(t),e=$l(t,e),Al(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Al((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Nl(t)))}function Yl(t,e){return Ql(t),e=$l(t,e),Al(t.a.b,e)}function Xl(t,e,n){Kl(t,e),0<n.length&&(t.c=null,t.a.set($l(t,e),_c(n)),t.b+=n.length)}function $l(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(tc=zl.prototype).add=function(t,e){Ql(this),this.c=null,t=$l(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},tc.forEach=function(t,e){Ql(this),this.a.forEach((function(n,r){gc(n,(function(n){t.call(e,n,r,this)}),this)}),this)},tc.L=function(){Ql(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},tc.K=function(t){Ql(this);var e=[];if("string"==typeof t)Yl(this,t)&&(e=mc(e,this.a.get($l(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=mc(e,t[n])}return e},tc.set=function(t,e){return Ql(this),this.c=null,Yl(this,t=$l(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},tc.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},tc.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Jl=function(t,e){this.b=t,this.a=e};function Zl(t){this.g=t||tf,rc.PerformanceNavigationTiming?t=0<(t=rc.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(rc.ia&&rc.ia.ya&&rc.ia.ya()&&rc.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var tf=10;function ef(t){return!!t.b||!!t.a&&t.a.size>=t.f}function nf(t){return t.b?1:t.a?t.a.size:0}function rf(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function of(t,e){t.a?t.a.add(e):t.b=e}function sf(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function af(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=Zu(t.a.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.s)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return _c(t.c)}function uf(){}function cf(){this.a=new uf}function hf(t,e,n){var r=n||"";try{Sl(t,(function(t,n){var i=t;sc(t)&&(i=Th(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(uI){throw e.push(r+"type="+encodeURIComponent("_badmap")),uI}}function lf(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}Zl.prototype.cancel=function(){var t,e;if(this.c=af(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Zu(this.a.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},uf.prototype.stringify=function(t){return rc.JSON.stringify(t,void 0)},uf.prototype.parse=function(t){return rc.JSON.parse(t,void 0)};var ff=rc.JSON.parse;function pf(t){wh.call(this),this.headers=new Cl,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=df,this.D=this.F=!1}dc(pf,wh);var df="",vf=/^https?$/i,yf=["POST","PUT"];function gf(t){return"content-type"==t.toLowerCase()}function mf(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,_f(t),wf(t)}function _f(t){t.u||(t.u=!0,Eh(t,"complete"),Eh(t,"error"))}function bf(t){if(t.b&&void 0!==nc&&(!t.s[1]||4!=If(t)||2!=t.W()))if(t.l&&4==If(t))Fh(t.za,0,t);else if(Eh(t,"readystatechange"),4==If(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(kl)[1]||null;if(!o&&rc.self&&rc.self.location){var s=rc.self.location.protocol;o=s.substr(0,s.length-1)}i=!vf.test(o?o.toLowerCase():"")}e=i}if(e)Eh(t,"complete"),Eh(t,"success");else{t.h=6;try{var a=2<If(t)?t.a.statusText:""}catch(u){a=""}t.f=a+" ["+t.W()+"]",_f(t)}}finally{wf(t)}}}function wf(t,e){if(t.a){Ef(t);var n=t.a,r=t.s[0]?ic:null;t.a=null,t.s=null,e||Eh(t,"ready");try{n.onreadystatechange=r}catch(uI){}}}function Ef(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(rc.clearTimeout(t.m),t.m=null)}function If(t){return t.a?t.a.readyState:0}function Tf(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Nc(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Ml(t,e,n))}function Sf(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Cf(t){this.pa=0,this.g=[],this.c=new Hh,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Sf("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Sf("baseRetryDelayMs",5e3,t),this.Ra=Sf("retryDelaySeedMs",1e4,t),this.Ma=Sf("forwardChannelMaxRetries",2,t),this.ma=Sf("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Zl(t&&t.concurrentRequestLimit),this.ka=new cf,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Nf(t){if(kf(t),3==t.v){var e=t.R++,n=Ol(t.B);Ml(n,"SID",t.J),Ml(n,"RID",e),Ml(n,"TYPE","terminate"),Rf(t,n),(e=new ll(t,t.c,e,void 0)).H=2,e.i=Fl(Ol(n)),n=!1,rc.navigator&&rc.navigator.sendBeacon&&(n=rc.navigator.sendBeacon(e.i.toString(),"")),!n&&rc.Image&&((new Image).src=e.i,n=!0),n||(e.a=Gf(e.g,null),e.a.ba(e.i)),e.u=pc(),_l(e)}Wf(t)}function Af(t){t.a&&(Ff(t),t.a.cancel(),t.a=null)}function kf(t){Af(t),t.j&&(rc.clearTimeout(t.j),t.j=null),Uf(t),t.b.cancel(),t.h&&("number"==typeof t.h&&rc.clearTimeout(t.h),t.h=null)}function Pf(t,e){t.g.push(new Jl(t.Oa++,e)),3==t.v&&Of(t)}function Of(t){ef(t.b)||t.h||(t.h=!0,Oh(t.Ba,t),t.u=0)}function xf(t,e){var n;n=e?e.f:t.R++;var r=Ol(t.B);Ml(r,"SID",t.J),Ml(r,"RID",n),Ml(r,"AID",t.P),Rf(t,r),t.i&&t.l&&Tf(r,t.i,t.l),n=new ll(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Df(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),of(t.b,n),vl(n,r,e)}function Rf(t,e){t.f&&Sl({},(function(t,n){Ml(e,n,t)}))}function Df(t,e,n){n=Math.min(t.g.length,n);var r=t.f?lc(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,h=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{hf(h,s,"req"+c+"_")}catch(l){r&&r(h)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Lf(t){t.a||t.j||(t.T=1,Oh(t.Aa,t),t.o=0)}function Mf(t){return!(t.a||t.j||3<=t.o)&&(t.T++,t.j=tl(lc(t.Aa,t),qf(t,t.o)),t.o++,!0)}function Ff(t){null!=t.s&&(rc.clearTimeout(t.s),t.s=null)}function Vf(t){t.a=new ll(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Ol(t.la);Ml(e,"RID","rpc"),Ml(e,"SID",t.J),Ml(e,"CI",t.H?"0":"1"),Ml(e,"AID",t.P),Rf(t,e),Ml(e,"TYPE","xmlhttp"),t.i&&t.l&&Tf(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Fl(Ol(e)),n.j=null,n.I=!0,yl(n,t)}function Uf(t){null!=t.m&&(rc.clearTimeout(t.m),t.m=null)}function jf(t,e){var n=null;if(t.a==e){Uf(t),Ff(t),t.a=null;var r=2}else{if(!rf(t.b,e))return;n=e.s,sf(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=pc()-e.u;var i=t.u;Eh(r=Kh(),new Zh(r,n,e,i)),Of(t)}else Lf(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(nf(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=tl(lc(t.Ba,t,e),qf(t,t.u)),t.u++,0)))}(t,e)||2==r&&Mf(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Bf(t,5);break;case 4:Bf(t,10);break;case 3:Bf(t,6);break;default:Bf(t,2)}}function qf(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Bf(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=lc(t.Ya,t);n||(n=new Pl("//www.google.com/images/cleardot.gif"),rc.location&&"http"==rc.location.protocol||xl(n,"https"),Fl(n)),function(t,e){var n=new Hh;if(rc.Image){var r=new Image;r.onload=fc(lf,n,r,"TestLoadImage: loaded",!0,e),r.onerror=fc(lf,n,r,"TestLoadImage: error",!1,e),r.onabort=fc(lf,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=fc(lf,n,r,"TestLoadImage: timeout",!1,e),rc.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else Jh(2);t.v=0,t.f&&t.f.ra(e),Wf(t),kf(t)}function Wf(t){t.v=0,t.I=-1,t.f&&(0==af(t.b).length&&0==t.g.length||(t.b.c.length=0,_c(t.g),t.g.length=0),t.f.qa())}function Hf(t,e,n){var r=function(t){return t instanceof Pl?Ol(t):new Pl(t,void 0)}(n);if(""!=r.c)e&&Rl(r,e+"."+r.c),Dl(r,r.h);else{var i=rc.location;r=function(t,e,n,r){var i=new Pl(null,void 0);return t&&xl(i,t),e&&Rl(i,e),n&&Dl(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&Nc(t.V,(function(t,e){Ml(r,e,t)})),e=t.A,n=t.na,e&&n&&Ml(r,e,n),Ml(r,"VER",t.ha),Rf(t,r),r}function Gf(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new pf(t.Na)).F=t.C,e}function zf(){}function Qf(){if(Lc&&!(10<=Number(Kc)))throw Error("Environmental error: no available transport.")}function Kf(t,e){wh.call(this),this.a=new Cf(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!bc(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!bc(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new $f(this)}function Yf(t){ul.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Xf(){cl.call(this),this.status=1}function $f(t){this.a=t}(tc=pf.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?il(this.H):il(sl),this.a.onreadystatechange=lc(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void mf(this,o)}t=n||"";var i=new Cl(this.headers);r&&Sl(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=gf,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=rc.FormData&&t instanceof rc.FormData,!(0<=yc(yf,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Ef(this),0<this.o&&((this.D=function(t){return Lc&&zc(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=lc(this.xa,this)):this.m=Fh(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){mf(this,o)}},tc.xa=function(){void 0!==nc&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Eh(this,"timeout"),this.abort(8))},tc.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Eh(this,"complete"),Eh(this,"abort"),wf(this))},tc.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),wf(this,!0)),pf.X.G.call(this)},tc.za=function(){this.j||(this.A||this.l||this.g?bf(this):this.Ua())},tc.Ua=function(){bf(this)},tc.W=function(){try{return 2<If(this)?this.a.status:-1}catch(Rc){return-1}},tc.$=function(){try{return this.a?this.a.responseText:""}catch(Rc){return""}},tc.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),ff(e)}},tc.ua=function(){return this.h},tc.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(tc=Cf.prototype).ha=8,tc.v=1,tc.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new ll(this,this.c,t,void 0),r=this.l;if(this.O&&(r?Pc(r=Ac(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Df(this,n,e),Ml(i=Ol(this.B),"RID",t),Ml(i,"CVER",22),this.A&&Ml(i,"X-HTTP-Session-Id",this.A),Rf(this,i),this.i&&r&&Tf(i,this.i,r),of(this.b,n),this.Ia&&Ml(i,"TYPE","init"),this.da?(Ml(i,"$req",e),Ml(i,"SID","null"),n.U=!0,vl(n,i,null)):vl(n,i,e),this.v=2}}else 3==this.v&&(t?xf(this,t):0==this.g.length||ef(this.b)||xf(this))},tc.Aa=function(){if(this.j=null,Vf(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=tl(lc(this.Ta,this),t)}},tc.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Jh(10),Af(this),Vf(this))},tc.Sa=function(){null!=this.m&&(this.m=null,Af(this),Mf(this),Jh(19))},tc.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),Jh(2)):(this.c.info("Failed to ping google.com"),Jh(1))},(tc=zf.prototype).ta=function(){},tc.sa=function(){},tc.ra=function(){},tc.qa=function(){},tc.Ja=function(){},Qf.prototype.a=function(t,e){return new Kf(t,e)},dc(Kf,wh),Kf.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;Jh(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Hf(t,null,t.fa),Of(t)},Kf.prototype.close=function(){Nf(this.a)},Kf.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,Pf(this.a,e)}else this.l?((e={}).__data__=Th(t),Pf(this.a,e)):Pf(this.a,t)},Kf.prototype.G=function(){this.a.f=null,delete this.f,Nf(this.a),delete this.a,Kf.X.G.call(this)},dc(Yf,ul),dc(Xf,cl),dc($f,zf),$f.prototype.ta=function(){Eh(this.a,"a")},$f.prototype.sa=function(t){Eh(this.a,new Yf(t))},$f.prototype.ra=function(t){Eh(this.a,new Xf(t))},$f.prototype.qa=function(){Eh(this.a,"b")},Qf.prototype.createWebChannel=Qf.prototype.a,Kf.prototype.send=Kf.prototype.h,Kf.prototype.open=Kf.prototype.g,Kf.prototype.close=Kf.prototype.close,el.NO_ERROR=0,el.TIMEOUT=8,el.HTTP_ERROR=6,nl.COMPLETE="complete",ol.EventType=al,al.OPEN="a",al.CLOSE="b",al.ERROR="c",al.MESSAGE="d",wh.prototype.listen=wh.prototype.va,pf.prototype.listenOnce=pf.prototype.wa,pf.prototype.getLastError=pf.prototype.Qa,pf.prototype.getLastErrorCode=pf.prototype.ua,pf.prototype.getStatus=pf.prototype.W,pf.prototype.getResponseJson=pf.prototype.Pa,pf.prototype.getResponseText=pf.prototype.$,pf.prototype.send=pf.prototype.ba;var Jf=el,Zf=nl,tp=zh,ep=10,np=11,rp=ol,ip=pf,op=function(t,e,n,r,i,o){this.t=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.i=o},sp=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"o",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),ap=new so("@firebase/firestore");function up(){return ap.logLevel}function cp(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ap.logLevel<=Ji.DEBUG){var r=e.map(fp);ap.debug.apply(ap,li(["Firestore (8.2.7): "+t],r))}}function hp(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ap.logLevel<=Ji.ERROR){var r=e.map(fp);ap.error.apply(ap,li(["Firestore (8.2.7): "+t],r))}}function lp(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ap.logLevel<=Ji.WARN){var r=e.map(fp);ap.warn.apply(ap,li(["Firestore (8.2.7): "+t],r))}}function fp(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(n){return t}
/**
  * @license
  * Copyright 2020 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */var e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.2.7) INTERNAL ASSERTION FAILED: "+t;throw hp(e),new Error(e)}function dp(t,e){t||pp()}function vp(t,e){return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yp(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gp=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=yp(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function mp(t,e){return t<e?-1:t>e?1:0}function _p(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function bp(t){return t+"\0"}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wp=function(){function t(t){this.h=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.h,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.h)},t.prototype.l=function(){return 2*this.h.length},t.prototype._=function(t){return mp(this.h,t.h)},t.prototype.isEqual=function(t){return this.h===t.h},t}();wp.T=new wp("");var Ep={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ip=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return ii(e,t),e}(Error),Tp=function(){function t(t){this.I=t}return t.fromBase64String=function(e){try{return new t(wp.fromBase64String(e))}catch(n){throw new Ip(Ep.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}},t.fromUint8Array=function(e){return new t(wp.fromUint8Array(e))},t.prototype.toBase64=function(){return this.I.toBase64()},t.prototype.toUint8Array=function(){return this.I.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.I.isEqual(t.I)},t}(),Sp=function(){function t(t){this.uid=t}return t.prototype.m=function(){return null!=this.uid},t.prototype.A=function(){return this.m()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();Sp.UNAUTHENTICATED=new Sp(null),Sp.R=new Sp("google-credentials-uid"),Sp.P=new Sp("first-party-uid");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Cp=function(t,e){this.user=e,this.type="OAuth",this.g={},this.g.Authorization="Bearer "+t},Np=function(){function t(){this.V=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.p=function(){},t.prototype.v=function(t){this.V=t,t(Sp.UNAUTHENTICATED)},t.prototype.S=function(){this.V=null},t}(),Ap=function(){function t(t){var e=this;this.D=null,this.currentUser=Sp.UNAUTHENTICATED,this.C=!1,this.N=0,this.V=null,this.forceRefresh=!1,this.D=function(){e.N++,e.currentUser=e.$(),e.C=!0,e.V&&e.V(e.currentUser)},this.N=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.D):(this.D(null),t.get().then((function(t){e.auth=t,e.D&&e.auth.addAuthTokenListener(e.D)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.N,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.N!==e?(cp("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(dp("string"==typeof n.accessToken),new Cp(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.p=function(){this.forceRefresh=!0},t.prototype.v=function(t){this.V=t,this.C&&t(this.currentUser)},t.prototype.S=function(){this.auth&&this.auth.removeAuthTokenListener(this.D),this.D=null,this.V=null},t.prototype.$=function(){var t=this.auth&&this.auth.getUid();return dp(null===t||"string"==typeof t),new Sp(t)},t}(),kp=function(){function t(t,e){this.F=t,this.O=e,this.type="FirstParty",this.user=Sp.P}return Object.defineProperty(t.prototype,"g",{get:function(){var t={"X-Goog-AuthUser":this.O},e=this.F.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),Pp=function(){function t(t,e){this.F=t,this.O=e}return t.prototype.getToken=function(){return Promise.resolve(new kp(this.F,this.O))},t.prototype.v=function(t){t(Sp.P)},t.prototype.S=function(){},t.prototype.p=function(){},t}(),Op=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.k=function(t){return n.M(t)},this.L=function(t){return e.B(t)})}return t.prototype.M=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.L&&this.L(t),t},t}();Op.q=-1;var xp=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Ip(Ep.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Ip(Ep.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Ip(Ep.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ip(Ep.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.U=function(t){return this.seconds===t.seconds?mp(this.nanoseconds,t.nanoseconds):mp(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Rp=function(){function t(t){this.timestamp=t}return t.K=function(e){return new t(e)},t.min=function(){return new t(new xp(0,0))},t.prototype._=function(t){return this.timestamp.U(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.W=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.j=function(){return this.timestamp},t}(),Dp=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&pp(),void 0===n?n=t.length-e:n>t.length-e&&pp(),this.segments=t,this.offset=e,this.G=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.G},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.H(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.J(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.Y=function(t){return t=void 0===t?1:t,this.J(this.segments,this.offset+t,this.length-t)},t.prototype.X=function(){return this.J(this.segments,this.offset,this.length-1)},t.prototype.Z=function(){return this.segments[this.offset]},t.prototype.tt=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.et=function(){return 0===this.length},t.prototype.nt=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.st=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.it=function(){return this.segments.slice(this.offset,this.limit())},t.H=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Lp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ii(e,t),e.prototype.J=function(t,n,r){return new e(t,n,r)},e.prototype.rt=function(){return this.it().join("/")},e.prototype.toString=function(){return this.rt()},e.ot=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Ip(Ep.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.ct=function(){return new e([])},e}(Dp),Mp=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Fp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ii(e,t),e.prototype.J=function(t,n,r){return new e(t,n,r)},e.at=function(t){return Mp.test(t)},e.prototype.rt=function(){return this.it().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.at(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.rt()},e.prototype.ut=function(){return 1===this.length&&"__name__"===this.get(0)},e.ht=function(){return new e(["__name__"])},e.lt=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Ip(Ep.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Ip(Ep.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Ip(Ep.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Ip(Ep.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.ct=function(){return new e([])},e}(Dp),Vp=function(){function t(t){this.path=t}return t._t=function(e){return new t(Lp.ot(e))},t.ft=function(e){return new t(Lp.ot(e).Y(5))},t.prototype.dt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Lp.H(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.H=function(t,e){return Lp.H(t.path,e.path)},t.wt=function(t){return t.length%2==0},t.Et=function(e){return new t(new Lp(e.slice()))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Up(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function jp(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function qp(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bp=function(){function t(t){this.fields=t,t.sort(Fp.H)}return t.prototype.Tt=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].nt(t))return!0;return!1},t.prototype.isEqual=function(t){return _p(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Wp=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hp(t){if(dp(!!t),"string"==typeof t){var e=0,n=Wp.exec(t);if(dp(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Gp(t.seconds),nanos:Gp(t.nanos)}}function Gp(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function zp(t){return"string"==typeof t?wp.fromBase64String(t):wp.fromUint8Array(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qp(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Kp(t){var e=t.mapValue.fields.__previous_value__;return Qp(e)?Kp(e):e}function Yp(t){var e=Hp(t.mapValue.fields.__local_write_time__.timestampValue);return new xp(e.seconds,e.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xp(t){return null==t}function $p(t){return 0===t&&1/t==-1/0}function Jp(t){return"number"==typeof t&&Number.isInteger(t)&&!$p(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zp(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Qp(t)?4:10:pp()}function td(t,e){var n,r=Zp(t);if(r!==Zp(e))return!1;switch(r){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Yp(t).isEqual(Yp(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Hp(t.timestampValue),r=Hp(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return n=e,zp(t.bytesValue).isEqual(zp(n.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Gp(t.geoPointValue.latitude)===Gp(e.geoPointValue.latitude)&&Gp(t.geoPointValue.longitude)===Gp(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Gp(t.integerValue)===Gp(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Gp(t.doubleValue),r=Gp(e.doubleValue);return n===r?$p(n)===$p(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return _p(t.arrayValue.values||[],e.arrayValue.values||[],td);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Up(n)!==Up(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!td(n[i],r[i])))return!1;return!0}(t,e);default:return pp()}}function ed(t,e){return void 0!==(t.values||[]).find((function(t){return td(t,e)}))}function nd(t,e){var n,r,i,o,s=Zp(t),a=Zp(e);if(s!==a)return mp(s,a);switch(s){case 0:return 0;case 1:return mp(t.booleanValue,e.booleanValue);case 2:return r=e,i=Gp((n=t).integerValue||n.doubleValue),o=Gp(r.integerValue||r.doubleValue),i<o?-1:i>o?1:i===o?0:isNaN(i)?isNaN(o)?0:-1:1;case 3:return rd(t.timestampValue,e.timestampValue);case 4:return rd(Yp(t),Yp(e));case 5:return mp(t.stringValue,e.stringValue);case 6:return function(t,e){var n=zp(t),r=zp(e);return n._(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=mp(n[i],r[i]);if(0!==o)return o}return mp(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=mp(Gp(t.latitude),Gp(e.latitude));return 0!==n?n:mp(Gp(t.longitude),Gp(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=nd(n[i],r[i]);if(o)return o}return mp(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=mp(r[s],o[s]);if(0!==a)return a;var u=nd(n[r[s]],i[o[s]]);if(0!==u)return u}return mp(r.length,o.length)}(t.mapValue,e.mapValue);default:throw pp()}}function rd(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return mp(t,e);var n=Hp(t),r=Hp(e),i=mp(n.seconds,r.seconds);return 0!==i?i:mp(n.nanos,r.nanos)}function id(t){return od(t)}function od(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(e=t.timestampValue,"time("+(n=Hp(e)).seconds+","+n.nanos+")"):"stringValue"in t?t.stringValue:"bytesValue"in t?zp(t.bytesValue).toBase64():"referenceValue"in t?(i=t.referenceValue,Vp.ft(i).toString()):"geoPointValue"in t?"geo("+(r=t.geoPointValue).latitude+","+r.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=od(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+od(t.fields[o])}return e+"}"}(t.mapValue):pp();var e,n,r,i}function sd(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.rt()}}function ad(t){return!!t&&"integerValue"in t}function ud(t){return!!t&&"arrayValue"in t}function cd(t){return!!t&&"nullValue"in t}function hd(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ld(t){return!!t&&"mapValue"in t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fd=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.et())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!ld(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.tt()])||null},t.prototype.isEqual=function(t){return td(this.proto,t.proto)},t}(),pd=function(){function t(t){void 0===t&&(t=fd.empty()),this.It=t,this.At=new Map}return t.prototype.set=function(t,e){return this.Rt(t,e),this},t.prototype.delete=function(t){return this.Rt(t,null),this},t.prototype.Rt=function(t,e){for(var n=this.At,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Zp(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.tt(),e)},t.prototype.Pt=function(){var t=this.yt(Fp.ct(),this.At);return null!=t?new fd(t):this.It},t.prototype.yt=function(t,e){var n=this,r=!1,i=this.It.field(t),o=ld(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var s=n.yt(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function dd(t){var e=[];return jp(t.fields||{},(function(t,n){var r=new Fp([t]);if(ld(n)){var i=dd(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var a=s[o];e.push(r.child(a))}}else e.push(r)})),new Bp(e)}var vd=function(t,e){this.key=t,this.version=e},yd=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).gt=r,o.Vt=!!i.Vt,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return ii(e,t),e.prototype.field=function(t){return this.gt.field(t)},e.prototype.data=function(){return this.gt},e.prototype.bt=function(){return this.gt.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Vt===t.Vt&&this.hasCommittedMutations===t.hasCommittedMutations&&this.gt.isEqual(t.gt)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.gt.toString()+", {hasLocalMutations: "+this.Vt+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Vt||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(vd),gd=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return ii(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(vd),md=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ii(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(vd),_d=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.vt=null};function bd(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new _d(t,e,n,r,i,o,s)}function wd(t){var e=vp(t);if(null===e.vt){var n=e.path.rt();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return(e=t).field.rt()+e.op.toString()+id(e.value);var e})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return(e=t).field.rt()+e.dir;var e})).join(","),Xp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Dd(e.startAt)),e.endAt&&(n+="|ub:",n+=Dd(e.endAt)),e.vt=n}return e.vt}function Ed(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Md(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!td(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Vd(t.startAt,e.startAt)&&Vd(t.endAt,e.endAt)}function Id(t){return Vp.wt(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Td=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return ii(e,t),e.create=function(t,n,r){return t.ut()?"in"===n||"not-in"===n?this.St(t,n,r):new Sd(t,n,r):"array-contains"===n?new kd(t,r):"in"===n?new Pd(t,r):"not-in"===n?new Od(t,r):"array-contains-any"===n?new xd(t,r):new e(t,n,r)},e.St=function(t,e,n){return"in"===e?new Cd(t,n):new Nd(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.Dt(nd(e,this.value)):null!==e&&Zp(this.value)===Zp(e)&&this.Dt(nd(e,this.value))},e.prototype.Dt=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return pp()}},e.prototype.Ct=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Sd=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Vp.ft(r.referenceValue),i}return ii(e,t),e.prototype.matches=function(t){var e=Vp.H(t.key,this.key);return this.Dt(e)},e}(Td),Cd=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Ad("in",n),r}return ii(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Td),Nd=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Ad("not-in",n),r}return ii(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Td);function Ad(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return Vp.ft(t.referenceValue)}))}var kd=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return ii(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return ud(e)&&ed(e.arrayValue,this.value)},e}(Td),Pd=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return ii(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&ed(this.value.arrayValue,e)},e}(Td),Od=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return ii(e,t),e.prototype.matches=function(t){if(ed(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!ed(this.value.arrayValue,e)},e}(Td),xd=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return ii(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!ud(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return ed(e.value.arrayValue,t)}))},e}(Td),Rd=function(t,e){this.position=t,this.before=e};function Dd(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return id(t)})).join(",")}var Ld=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Md(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Fd(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.ut()?Vp.H(Vp.ft(s.referenceValue),n.key):nd(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Vd(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!td(t.position[n],e.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ud=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.xt=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.Nt=null,this.$t=null,this.startAt,this.endAt};function jd(t,e,n,r,i,o,s,a){return new Ud(t,e,n,r,i,o,s,a)}function qd(t){return new Ud(t)}function Bd(t){return!Xp(t.limit)&&"F"===t.limitType}function Wd(t){return!Xp(t.limit)&&"L"===t.limitType}function Hd(t){return t.xt.length>0?t.xt[0].field:null}function Gd(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.Ct())return r.field}return null}function zd(t){return null!==t.collectionGroup}function Qd(t){var e=vp(t);if(null===e.Nt){e.Nt=[];var n=Gd(e),r=Hd(e);if(null!==n&&null===r)n.ut()||e.Nt.push(new Ld(n)),e.Nt.push(new Ld(Fp.ht(),"asc"));else{for(var i=!1,o=0,s=e.xt;o<s.length;o++){var a=s[o];e.Nt.push(a),a.field.ut()&&(i=!0)}if(!i){var u=e.xt.length>0?e.xt[e.xt.length-1].dir:"asc";e.Nt.push(new Ld(Fp.ht(),u))}}}return e.Nt}function Kd(t){var e=vp(t);if(!e.$t)if("F"===e.limitType)e.$t=bd(e.path,e.collectionGroup,Qd(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Qd(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new Ld(o.field,s))}var a=e.endAt?new Rd(e.endAt.position,!e.endAt.before):null,u=e.startAt?new Rd(e.startAt.position,!e.startAt.before):null;e.$t=bd(e.path,e.collectionGroup,n,e.filters,e.limit,a,u)}return e.$t}function Yd(t,e,n){return new Ud(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Xd(t,e){return Ed(Kd(t),Kd(e))&&t.limitType===e.limitType}function $d(t){return wd(Kd(t))+"|lt:"+t.limitType}function Jd(t){return"Query(target="+(e=Kd(t),n=e.path.rt(),null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=", filters: ["+e.filters.map((function(t){return(e=t).field.rt()+" "+e.op+" "+id(e.value);var e})).join(", ")+"]"),Xp(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=", orderBy: ["+e.orderBy.map((function(t){return(e=t).field.rt()+" ("+e.dir+")";var e})).join(", ")+"]"),e.startAt&&(n+=", startAt: "+Dd(e.startAt)),e.endAt&&(n+=", endAt: "+Dd(e.endAt)),"Target("+n+"); limitType=")+t.limitType+")";var e,n}function Zd(t,e){return n=t,i=(r=e).key.path,(null!==n.collectionGroup?r.key.dt(n.collectionGroup)&&n.path.nt(i):Vp.wt(n.path)?n.path.isEqual(i):n.path.st(i))&&function(t,e){for(var n=0,r=t.xt;n<r.length;n++){var i=r[n];if(!i.field.ut()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Fd(t.startAt,Qd(t),e)||t.endAt&&Fd(t.endAt,Qd(t),e))}(t,e);var n,r,i}function tv(t){return function(e,n){for(var r=!1,i=0,o=Qd(t);i<o.length;i++){var s=o[i],a=ev(s,e,n);if(0!==a)return a;r=r||s.field.ut()}return 0}}function ev(t,e,n){var r,i,o,s,a=t.field.ut()?Vp.H(e.key,n.key):(r=t.field,i=n,o=e.field(r),s=i.field(r),null!==o&&null!==s?nd(o,s):pp());switch(t.dir){case"asc":return a;case"desc":return-1*a;default:return pp()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nv=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Rp.min()),void 0===o&&(o=Rp.min()),void 0===s&&(s=wp.T),this.target=t,this.targetId=e,this.Ft=n,this.sequenceNumber=r,this.Ot=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.kt=function(e){return new t(this.target,this.targetId,this.Ft,e,this.Ot,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.Mt=function(e,n){return new t(this.target,this.targetId,this.Ft,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.Lt=function(e){return new t(this.target,this.targetId,this.Ft,this.sequenceNumber,this.Ot,e,this.resumeToken)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rv(t,e){if(t.Bt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$p(e)?"-0":e}}function iv(t){return{integerValue:""+t}}function ov(t,e){return Jp(e)?iv(e):rv(t,e)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sv=function(){this.qt=void 0};function av(t,e,n){return t instanceof hv?(i=e,o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:(r=n).seconds,nanos:r.nanoseconds}}}},i&&(o.fields.__previous_value__=i),{mapValue:o}):t instanceof lv?fv(t,e):t instanceof pv?dv(t,e):function(t,e){var n=cv(t,e),r=yv(n)+yv(t.Ut);return ad(n)&&ad(t.Ut)?iv(r):rv(t.Qt,r)}(t,e);var r,i,o}function uv(t,e,n){return t instanceof lv?fv(t,e):t instanceof pv?dv(t,e):n}function cv(t,e){return t instanceof vv?ad(r=e)||(n=r)&&"doubleValue"in n?e:{integerValue:0}:null;var n,r}var hv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ii(e,t),e}(sv),lv=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return ii(e,t),e}(sv);function fv(t,e){for(var n=gv(e),r=function(t){n.some((function(e){return td(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var pv=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return ii(e,t),e}(sv);function dv(t,e){for(var n=gv(e),r=function(t){n=n.filter((function(e){return!td(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var vv=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qt=e,r.Ut=n,r}return ii(e,t),e}(sv);function yv(t){return Gp(t.integerValue||t.doubleValue)}function gv(t){return ud(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mv=function(t,e){this.field=t,this.transform=e},_v=function(t,e){this.version=t,this.transformResults=e},bv=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.Kt=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"Wt",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function wv(t,e){return void 0!==t.updateTime?e instanceof yd&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof yd}var Ev=function(){};function Iv(t,e,n){return t instanceof Av?function(t,e,n){var r=t.value;if(n.transformResults){var i=Ov(t.fieldTransforms,e,n.transformResults);r=Rv(t.fieldTransforms,r,i)}return new yd(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof kv?function(t,e,n){if(!wv(t.jt,e))return new md(t.key,n.version);var r=Pv(t,e,n.transformResults?Ov(t.fieldTransforms,e,n.transformResults):[]);return new yd(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):(r=n,new gd(t.key,r.version,{hasCommittedMutations:!0}));var r}function Tv(t,e,n){return t instanceof Av?function(t,e,n){if(!wv(t.jt,e))return e;var r=t.value,i=xv(t.fieldTransforms,n,e);r=Rv(t.fieldTransforms,r,i);var o=Nv(e);return new yd(t.key,o,r,{Vt:!0})}(t,e,n):t instanceof kv?function(t,e,n){if(!wv(t.jt,e))return e;var r=Nv(e),i=Pv(t,e,xv(t.fieldTransforms,n,e));return new yd(t.key,r,i,{Vt:!0})}(t,e,n):(i=e,wv((r=t).jt,i)?new gd(r.key,Rp.min()):i);var r,i}function Sv(t,e){return function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof yd?e.field(o.field):void 0,a=cv(o.transform,s||null);null!=a&&(n=null==n?(new pd).set(o.field,a):n.set(o.field,a))}return n?n.Pt():null}(t.fieldTransforms,e)}function Cv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.jt.isEqual(e.jt)&&(n=t.fieldTransforms,r=e.fieldTransforms,!!(void 0===n&&void 0===r||n&&r&&_p(n,r,(function(t,e){return r=e,(n=t).field.isEqual(r.field)&&(i=n.transform,o=r.transform,i instanceof lv&&o instanceof lv||i instanceof pv&&o instanceof pv?_p(i.elements,o.elements,td):i instanceof vv&&o instanceof vv?td(i.Ut,o.Ut):i instanceof hv&&o instanceof hv);var n,r,i,o}))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.Gt.isEqual(e.Gt));var n,r}function Nv(t){return t instanceof yd?t.version:Rp.min()}var Av=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.jt=r,o.fieldTransforms=i,o.type=0,o}return ii(e,t),e}(Ev),kv=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.Gt=r,s.jt=i,s.fieldTransforms=o,s.type=1,s}return ii(e,t),e}(Ev);function Pv(t,e,n){var r,i,o,s;return i=t,o=r=e instanceof yd?e.data():fd.empty(),s=new pd(o),i.Gt.fields.forEach((function(t){if(!t.et()){var e=i.data.field(t);null!==e?s.set(t,e):s.delete(t)}})),r=s.Pt(),Rv(t.fieldTransforms,r,n)}function Ov(t,e,n){var r=[];dp(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof yd&&(a=e.field(o.field)),r.push(uv(s,a,n[i]))}return r}function xv(t,e,n){for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=null;n instanceof yd&&(u=n.field(s.field)),r.push(av(a,u,e))}return r}function Rv(t,e,n){for(var r=new pd(e),i=0;i<t.length;i++){var o=t[i];r.set(o.field,n[i])}return r.Pt()}var Dv,Lv,Mv=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.jt=n,r.type=2,r.fieldTransforms=[],r}return ii(e,t),e}(Ev),Fv=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.jt=n,r.type=3,r.fieldTransforms=[],r}return ii(e,t),e}(Ev),Vv=function(t){this.count=t};function Uv(t){switch(t){case Ep.OK:return pp();case Ep.CANCELLED:case Ep.UNKNOWN:case Ep.DEADLINE_EXCEEDED:case Ep.RESOURCE_EXHAUSTED:case Ep.INTERNAL:case Ep.UNAVAILABLE:case Ep.UNAUTHENTICATED:return!1;case Ep.INVALID_ARGUMENT:case Ep.NOT_FOUND:case Ep.ALREADY_EXISTS:case Ep.PERMISSION_DENIED:case Ep.FAILED_PRECONDITION:case Ep.ABORTED:case Ep.OUT_OF_RANGE:case Ep.UNIMPLEMENTED:case Ep.DATA_LOSS:return!0;default:return pp()}}function jv(t){if(void 0===t)return hp("GRPC error has no .code"),Ep.UNKNOWN;switch(t){case Dv.OK:return Ep.OK;case Dv.CANCELLED:return Ep.CANCELLED;case Dv.UNKNOWN:return Ep.UNKNOWN;case Dv.DEADLINE_EXCEEDED:return Ep.DEADLINE_EXCEEDED;case Dv.RESOURCE_EXHAUSTED:return Ep.RESOURCE_EXHAUSTED;case Dv.INTERNAL:return Ep.INTERNAL;case Dv.UNAVAILABLE:return Ep.UNAVAILABLE;case Dv.UNAUTHENTICATED:return Ep.UNAUTHENTICATED;case Dv.INVALID_ARGUMENT:return Ep.INVALID_ARGUMENT;case Dv.NOT_FOUND:return Ep.NOT_FOUND;case Dv.ALREADY_EXISTS:return Ep.ALREADY_EXISTS;case Dv.PERMISSION_DENIED:return Ep.PERMISSION_DENIED;case Dv.FAILED_PRECONDITION:return Ep.FAILED_PRECONDITION;case Dv.ABORTED:return Ep.ABORTED;case Dv.OUT_OF_RANGE:return Ep.OUT_OF_RANGE;case Dv.UNIMPLEMENTED:return Ep.UNIMPLEMENTED;case Dv.DATA_LOSS:return Ep.DATA_LOSS;default:return pp()}}(Lv=Dv||(Dv={}))[Lv.OK=0]="OK",Lv[Lv.CANCELLED=1]="CANCELLED",Lv[Lv.UNKNOWN=2]="UNKNOWN",Lv[Lv.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Lv[Lv.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Lv[Lv.NOT_FOUND=5]="NOT_FOUND",Lv[Lv.ALREADY_EXISTS=6]="ALREADY_EXISTS",Lv[Lv.PERMISSION_DENIED=7]="PERMISSION_DENIED",Lv[Lv.UNAUTHENTICATED=16]="UNAUTHENTICATED",Lv[Lv.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Lv[Lv.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Lv[Lv.ABORTED=10]="ABORTED",Lv[Lv.OUT_OF_RANGE=11]="OUT_OF_RANGE",Lv[Lv.UNIMPLEMENTED=12]="UNIMPLEMENTED",Lv[Lv.INTERNAL=13]="INTERNAL",Lv[Lv.UNAVAILABLE=14]="UNAVAILABLE",Lv[Lv.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var qv=function(){function t(t,e){this.H=t,this.root=e||Wv.EMPTY}return t.prototype.zt=function(e,n){return new t(this.H,this.root.zt(e,n,this.H).copy(null,null,Wv.Ht,null,null))},t.prototype.remove=function(e){return new t(this.H,this.root.remove(e,this.H).copy(null,null,Wv.Ht,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.et();){var n=this.H(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.et();){var r=this.H(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.et=function(){return this.root.et()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.Jt=function(){return this.root.Jt()},t.prototype.Yt=function(){return this.root.Yt()},t.prototype.Xt=function(t){return this.root.Xt(t)},t.prototype.forEach=function(t){this.Xt((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.Xt((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.Zt=function(t){return this.root.Zt(t)},t.prototype.te=function(){return new Bv(this.root,null,this.H,!1)},t.prototype.ee=function(t){return new Bv(this.root,t,this.H,!1)},t.prototype.ne=function(){return new Bv(this.root,null,this.H,!0)},t.prototype.se=function(t){return new Bv(this.root,t,this.H,!0)},t}(),Bv=function(){function t(t,e,n,r){this.ie=r,this.re=[];for(var i=1;!t.et();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.ie?t.left:t.right;else{if(0===i){this.re.push(t);break}this.re.push(t),t=this.ie?t.right:t.left}}return t.prototype.oe=function(){var t=this.re.pop(),e={key:t.key,value:t.value};if(this.ie)for(t=t.left;!t.et();)this.re.push(t),t=t.right;else for(t=t.right;!t.et();)this.re.push(t),t=t.left;return e},t.prototype.ce=function(){return this.re.length>0},t.prototype.ae=function(){if(0===this.re.length)return null;var t=this.re[this.re.length-1];return{key:t.key,value:t.value}},t}(),Wv=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.et=function(){return!1},t.prototype.Xt=function(t){return this.left.Xt(t)||t(this.key,this.value)||this.right.Xt(t)},t.prototype.Zt=function(t){return this.right.Zt(t)||t(this.key,this.value)||this.left.Zt(t)},t.prototype.min=function(){return this.left.et()?this:this.left.min()},t.prototype.Jt=function(){return this.min().key},t.prototype.Yt=function(){return this.right.et()?this.key:this.right.Yt()},t.prototype.zt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.zt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.zt(t,e,n))).ue()},t.prototype.he=function(){if(this.left.et())return t.EMPTY;var e=this;return e.left.le()||e.left.left.le()||(e=e._e()),(e=e.copy(null,null,null,e.left.he(),null)).ue()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.et()||i.left.le()||i.left.left.le()||(i=i._e()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.le()&&(i=i.fe()),i.right.et()||i.right.le()||i.right.left.le()||(i=i.de()),0===n(e,i.key)){if(i.right.et())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.he())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.ue()},t.prototype.le=function(){return this.color},t.prototype.ue=function(){var t=this;return t.right.le()&&!t.left.le()&&(t=t.we()),t.left.le()&&t.left.left.le()&&(t=t.fe()),t.left.le()&&t.right.le()&&(t=t.Ee()),t},t.prototype._e=function(){var t=this.Ee();return t.right.left.le()&&(t=(t=(t=t.copy(null,null,null,null,t.right.fe())).we()).Ee()),t},t.prototype.de=function(){var t=this.Ee();return t.left.left.le()&&(t=(t=t.fe()).Ee()),t},t.prototype.we=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.fe=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Ee=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Te=function(){var t=this.Ie();return Math.pow(2,t)<=this.size+1},t.prototype.Ie=function(){if(this.le()&&this.left.le())throw pp();if(this.right.le())throw pp();var t=this.left.Ie();if(t!==this.right.Ie())throw pp();return t+(this.le()?0:1)},t}();Wv.EMPTY=null,Wv.RED=!0,Wv.Ht=!1,Wv.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw pp()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw pp()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw pp()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw pp()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw pp()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.zt=function(t,e,n){return new Wv(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.et=function(){return!0},t.prototype.Xt=function(t){return!1},t.prototype.Zt=function(t){return!1},t.prototype.Jt=function(){return null},t.prototype.Yt=function(){return null},t.prototype.le=function(){return!1},t.prototype.Te=function(){return!0},t.prototype.Ie=function(){return 0},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Hv=function(){function t(t){this.H=t,this.data=new qv(this.H)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.Jt()},t.prototype.last=function(){return this.data.Yt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.Xt((function(e,n){return t(e),!1}))},t.prototype.me=function(t,e){for(var n=this.data.ee(t[0]);n.ce();){var r=n.oe();if(this.H(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Ae=function(t,e){var n;for(n=void 0!==e?this.data.ee(e):this.data.te();n.ce();)if(!t(n.oe().key))return},t.prototype.Re=function(t){var e=this.data.ee(t);return e.ce()?e.oe().key:null},t.prototype.te=function(){return new Gv(this.data.te())},t.prototype.ee=function(t){return new Gv(this.data.ee(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).zt(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.et=function(){return this.data.et()},t.prototype.Pe=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.te(),r=e.data.te();n.ce();){var i=n.oe().key,o=r.oe().key;if(0!==this.H(i,o))return!1}return!0},t.prototype.it=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.H);return n.data=e,n},t}(),Gv=function(){function t(t){this.ye=t}return t.prototype.oe=function(){return this.ye.oe().key},t.prototype.ce=function(){return this.ye.ce()},t}(),zv=new qv(Vp.H);function Qv(){return zv}function Kv(){return Qv()}var Yv=new qv(Vp.H);function Xv(){return Yv}var $v=new qv(Vp.H);var Jv=new Hv(Vp.H);function Zv(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Jv,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var ty=new Hv(mp);function ey(){return ty}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ny=function(){function t(t){this.H=t?function(e,n){return t(e,n)||Vp.H(e.key,n.key)}:function(t,e){return Vp.H(t.key,e.key)},this.ge=Xv(),this.Ve=new qv(this.H)}return t.pe=function(e){return new t(e.H)},t.prototype.has=function(t){return null!=this.ge.get(t)},t.prototype.get=function(t){return this.ge.get(t)},t.prototype.first=function(){return this.Ve.Jt()},t.prototype.last=function(){return this.Ve.Yt()},t.prototype.et=function(){return this.Ve.et()},t.prototype.indexOf=function(t){var e=this.ge.get(t);return e?this.Ve.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.Ve.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.Ve.Xt((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.ge.zt(t.key,t),e.Ve.zt(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.ge.remove(t),this.Ve.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.Ve.te(),r=e.Ve.te();n.ce();){var i=n.oe().key,o=r.oe().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.H=this.H,r.ge=e,r.Ve=n,r},t}(),ry=function(){function t(){this.be=new qv(Vp.H)}return t.prototype.track=function(t){var e=t.doc.key,n=this.be.get(e);n?0!==t.type&&3===n.type?this.be=this.be.zt(e,t):3===t.type&&1!==n.type?this.be=this.be.zt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.be=this.be.zt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.be=this.be.zt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.be=this.be.remove(e):1===t.type&&2===n.type?this.be=this.be.zt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.be=this.be.zt(e,{type:2,doc:t.doc}):pp():this.be=this.be.zt(e,t)},t.prototype.ve=function(){var t=[];return this.be.Xt((function(e,n){t.push(n)})),t},t}(),iy=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.Se=n,this.docChanges=r,this.De=i,this.fromCache=o,this.Ce=s,this.xe=a}return t.Ne=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,ny.pe(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.De.et()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Ce===t.Ce&&this.De.isEqual(t.De)&&Xd(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Se.isEqual(t.Se)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),oy=function(){function t(t,e,n,r,i){this.Ot=t,this.$e=e,this.Fe=n,this.Oe=r,this.ke=i}return t.Me=function(e,n){var r=new Map;return r.set(e,sy.Le(e,n)),new t(Rp.min(),r,ey(),Qv(),Zv())},t}(),sy=function(){function t(t,e,n,r,i){this.resumeToken=t,this.Be=e,this.qe=n,this.Ue=r,this.Qe=i}return t.Le=function(e,n){return new t(wp.T,n,Zv(),Zv(),Zv())},t}(),ay=function(t,e,n,r){this.Ke=t,this.removedTargetIds=e,this.key=n,this.We=r},uy=function(t,e){this.targetId=t,this.je=e},cy=function(t,e,n,r){void 0===n&&(n=wp.T),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},hy=function(){function t(){this.Ge=0,this.ze=py(),this.He=wp.T,this.Je=!1,this.Ye=!0}return Object.defineProperty(t.prototype,"Be",{get:function(){return this.Je},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.He},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Xe",{get:function(){return 0!==this.Ge},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ze",{get:function(){return this.Ye},enumerable:!1,configurable:!0}),t.prototype.tn=function(t){t.l()>0&&(this.Ye=!0,this.He=t)},t.prototype.en=function(){var t=Zv(),e=Zv(),n=Zv();return this.ze.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:pp()}})),new sy(this.He,this.Je,t,e,n)},t.prototype.nn=function(){this.Ye=!1,this.ze=py()},t.prototype.sn=function(t,e){this.Ye=!0,this.ze=this.ze.zt(t,e)},t.prototype.rn=function(t){this.Ye=!0,this.ze=this.ze.remove(t)},t.prototype.on=function(){this.Ge+=1},t.prototype.cn=function(){this.Ge-=1},t.prototype.an=function(){this.Ye=!0,this.Je=!0},t}(),ly=function(){function t(t){this.un=t,this.hn=new Map,this.ln=Qv(),this._n=fy(),this.fn=new Hv(mp)}return t.prototype.dn=function(t){for(var e=0,n=t.Ke;e<n.length;e++){var r=n[e];t.We instanceof yd?this.wn(r,t.We):t.We instanceof gd&&this.En(r,t.key,t.We)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.En(r,t.key,t.We)},t.prototype.Tn=function(t){var e=this;this.In(t,(function(n){var r=e.mn(n);switch(t.state){case 0:e.An(n)&&r.tn(t.resumeToken);break;case 1:r.cn(),r.Xe||r.nn(),r.tn(t.resumeToken);break;case 2:r.cn(),r.Xe||e.removeTarget(n);break;case 3:e.An(n)&&(r.an(),r.tn(t.resumeToken));break;case 4:e.An(n)&&(e.Rn(n),r.tn(t.resumeToken));break;default:pp()}}))},t.prototype.In=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.hn.forEach((function(t,r){n.An(r)&&e(r)}))},t.prototype.Pn=function(t){var e=t.targetId,n=t.je.count,r=this.yn(e);if(r){var i=r.target;if(Id(i))if(0===n){var o=new Vp(i.path);this.En(e,o,new gd(o,Rp.min()))}else dp(1===n);else this.gn(e)!==n&&(this.Rn(e),this.fn=this.fn.add(e))}},t.prototype.Vn=function(t){var e=this,n=new Map;this.hn.forEach((function(r,i){var o=e.yn(i);if(o){if(r.Be&&Id(o.target)){var s=new Vp(o.target.path);null!==e.ln.get(s)||e.pn(i,s)||e.En(i,s,new gd(s,t))}r.Ze&&(n.set(i,r.en()),r.nn())}}));var r=Zv();this._n.forEach((function(t,n){var i=!0;n.Ae((function(t){var n=e.yn(t);return!n||2===n.Ft||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new oy(t,n,this.fn,this.ln,r);return this.ln=Qv(),this._n=fy(),this.fn=new Hv(mp),i},t.prototype.wn=function(t,e){if(this.An(t)){var n=this.pn(t,e.key)?2:0;this.mn(t).sn(e.key,n),this.ln=this.ln.zt(e.key,e),this._n=this._n.zt(e.key,this.bn(e.key).add(t))}},t.prototype.En=function(t,e,n){if(this.An(t)){var r=this.mn(t);this.pn(t,e)?r.sn(e,1):r.rn(e),this._n=this._n.zt(e,this.bn(e).delete(t)),n&&(this.ln=this.ln.zt(e,n))}},t.prototype.removeTarget=function(t){this.hn.delete(t)},t.prototype.gn=function(t){var e=this.mn(t).en();return this.un.vn(t).size+e.qe.size-e.Qe.size},t.prototype.on=function(t){this.mn(t).on()},t.prototype.mn=function(t){var e=this.hn.get(t);return e||(e=new hy,this.hn.set(t,e)),e},t.prototype.bn=function(t){var e=this._n.get(t);return e||(e=new Hv(mp),this._n=this._n.zt(t,e)),e},t.prototype.An=function(t){var e=null!==this.yn(t);return e||cp("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.yn=function(t){var e=this.hn.get(t);return e&&e.Xe?null:this.un.Sn(t)},t.prototype.Rn=function(t){var e=this;this.hn.set(t,new hy),this.un.vn(t).forEach((function(n){e.En(t,n,null)}))},t.prototype.pn=function(t,e){return this.un.vn(t).has(e)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fy(){return new qv(Vp.H)}function py(){return new qv(Vp.H)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dy={asc:"ASCENDING",desc:"DESCENDING"},vy={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},yy=function(t,e){this.t=t,this.Bt=e};function gy(t,e){return t.Bt?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function my(t,e){return t.Bt?e.toBase64():e.toUint8Array()}function _y(t,e){return gy(t,e.j())}function by(t){return dp(!!t),Rp.K((e=Hp(t),new xp(e.seconds,e.nanos)));var e}function wy(t,e){return(n=t,new Lp(["projects",n.projectId,"databases",n.database])).child("documents").child(e).rt();var n}function Ey(t){var e=Lp.ot(t);return dp(Gy(e)),e}function Iy(t,e){return wy(t.t,e.path)}function Ty(t,e){var n=Ey(e);if(n.get(1)!==t.t.projectId)throw new Ip(Ep.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.t.projectId);if(n.get(3)!==t.t.database)throw new Ip(Ep.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.t.database);return new Vp(Ay(n))}function Sy(t,e){return wy(t.t,e)}function Cy(t){var e=Ey(t);return 4===e.length?Lp.ct():Ay(e)}function Ny(t){return new Lp(["projects",t.t.projectId,"databases",t.t.database]).rt()}function Ay(t){return dp(t.length>4&&"documents"===t.get(4)),t.Y(5)}function ky(t,e,n){return{name:Iy(t,e),fields:n.proto.mapValue.fields}}function Py(t,e){var n,r,i;if(e instanceof Av)n={update:ky(t,e.key,e.value)};else if(e instanceof Mv)n={delete:Iy(t,e.key)};else if(e instanceof kv)n={update:ky(t,e.key,e.data),updateMask:Hy(e.Gt)};else{if(!(e instanceof Fv))return pp();n={verify:Iy(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof hv)return{fieldPath:e.field.rt(),setToServerValue:"REQUEST_TIME"};if(n instanceof lv)return{fieldPath:e.field.rt(),appendMissingElements:{values:n.elements}};if(n instanceof pv)return{fieldPath:e.field.rt(),removeAllFromArray:{values:n.elements}};if(n instanceof vv)return{fieldPath:e.field.rt(),increment:n.Ut};throw pp()}(0,t)}))),e.jt.Wt||(n.currentDocument=(r=t,void 0!==(i=e.jt).updateTime?{updateTime:_y(r,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:pp())),n}function Oy(t,e){var n,r=e.currentDocument?void 0!==(n=e.currentDocument).updateTime?bv.updateTime(by(n.updateTime)):void 0!==n.exists?bv.exists(n.exists):bv.Kt():bv.Kt(),i=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)dp("REQUEST_TIME"===e.setToServerValue),n=new hv;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new lv(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new pv(i)}else"increment"in e?n=new vv(t,e.increment):pp();var o=Fp.lt(e.fieldPath);return new mv(o,n)}(t,e)})):[];if(e.update){e.update.name;var o=Ty(t,e.update.name),s=new fd({mapValue:{fields:e.update.fields}});if(e.updateMask){var a=function(t){var e=t.fieldPaths||[];return new Bp(e.map((function(t){return Fp.lt(t)})))}(e.updateMask);return new kv(o,s,a,r,i)}return new Av(o,s,r,i)}if(e.delete){var u=Ty(t,e.delete);return new Mv(u,r)}if(e.verify){var c=Ty(t,e.verify);return new Fv(c,r)}return pp()}function xy(t,e){return{documents:[Sy(t,e.path)]}}function Ry(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Sy(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Sy(t,r.X()),n.structuredQuery.from=[{collectionId:r.tt()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(hd(t.value))return{unaryFilter:{field:jy(t.field),op:"IS_NAN"}};if(cd(t.value))return{unaryFilter:{field:jy(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(hd(t.value))return{unaryFilter:{field:jy(t.field),op:"IS_NOT_NAN"}};if(cd(t.value))return{unaryFilter:{field:jy(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jy(t.field),op:Uy(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return{field:jy((e=t).field),direction:Vy(e.dir)};var e}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s,a,u=(s=t,a=e.limit,s.Bt||Xp(a)?a:{value:a});return null!==u&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=My(e.startAt)),e.endAt&&(n.structuredQuery.endAt=My(e.endAt)),n}function Dy(t){var e=Cy(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){dp(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=Ly(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return new Ld(qy((e=t).field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction));var e})));var u,c,h=null;n.limit&&(u=n.limit,h=Xp(c="object"==typeof u?u.value:u)?null:c);var l=null;n.startAt&&(l=Fy(n.startAt));var f=null;return n.endAt&&(f=Fy(n.endAt)),jd(e,i,a,s,h,"F",l,f)}function Ly(t){return t?void 0!==t.unaryFilter?[Wy(t)]:void 0!==t.fieldFilter?[By(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return Ly(t)})).reduce((function(t,e){return t.concat(e)})):pp():[]}function My(t){return{before:t.before,values:t.position}}function Fy(t){var e=!!t.before,n=t.values||[];return new Rd(n,e)}function Vy(t){return dy[t]}function Uy(t){return vy[t]}function jy(t){return{fieldPath:t.rt()}}function qy(t){return Fp.lt(t.fieldPath)}function By(t){return Td.create(qy(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return pp()}}(t.fieldFilter.op),t.fieldFilter.value)}function Wy(t){switch(t.unaryFilter.op){case"IS_NAN":var e=qy(t.unaryFilter.field);return Td.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=qy(t.unaryFilter.field);return Td.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=qy(t.unaryFilter.field);return Td.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=qy(t.unaryFilter.field);return Td.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return pp()}}function Hy(t){var e=[];return t.fields.forEach((function(t){return e.push(t.rt())})),{fieldPaths:e}}function Gy(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zy=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},Qy=function(){function t(t){var e=this;this.Dn=null,this.Cn=null,this.result=void 0,this.error=void 0,this.xn=!1,this.Nn=!1,t((function(t){e.xn=!0,e.result=t,e.Dn&&e.Dn(t)}),(function(t){e.xn=!0,e.error=t,e.Cn&&e.Cn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Nn&&pp(),this.Nn=!0,this.xn?this.error?this.$n(n,this.error):this.Fn(e,this.result):new t((function(t,i){r.Dn=function(n){r.Fn(e,n).next(t,i)},r.Cn=function(e){r.$n(n,e).next(t,i)}}))},t.prototype.On=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.kn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(r){return t.reject(r)}},t.prototype.Fn=function(e,n){return e?this.kn((function(){return e(n)})):t.resolve(n)},t.prototype.$n=function(e,n){return e?this.kn((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.Mn=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.Ln=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.Mn(r)},t}(),Ky=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.Bn=new zy,this.transaction.oncomplete=function(){n.Bn.resolve()},this.transaction.onabort=function(){e.error?n.Bn.reject(new $y(t,e.error)):n.Bn.resolve()},this.transaction.onerror=function(e){var r=ng(e.target.error);n.Bn.reject(new $y(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(o){throw new $y(n,o)}},Object.defineProperty(t.prototype,"qn",{get:function(){return this.Bn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.Bn.reject(t),this.aborted||(cp("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Zy(e)},t}(),Yy=function(){function t(e,n,r){this.name=e,this.version=n,this.Un=r,12.2===t.Qn(Ei())&&hp("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return cp("SimpleDb","Removing database:",t),tg(window.indexedDB.deleteDatabase(t)).On()},t.Kn=function(){if("undefined"==typeof indexedDB)return!1;if(t.Wn())return!0;var e=Ei(),n=t.Qn(e),r=0<n&&n<10,i=t.jn(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Wn=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Gn)},t.zn=function(t,e){return t.store(e)},t.Qn=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.jn=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Hn=function(t){return si(this,void 0,void 0,(function(){var e,n=this;return ai(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(cp("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new $y(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Ip(Ep.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new $y(t,n))},i.onupgradeneeded=function(t){cp("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.Un.Jn(e,i.transaction,t.oldVersion,n.version).next((function(){cp("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Yn&&(this.db.onversionchange=function(t){return n.Yn(t)}),this.db)]}}))}))},t.prototype.Xn=function(t){this.Yn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return si(this,void 0,void 0,(function(){var i,o,s,a,u;return ai(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,h;return ai(this,(function(l){switch(l.label){case 0:++o,l.label=1;case 1:return l.trys.push([1,4,,5]),[4,a.Hn(t)];case 2:return a.db=l.sent(),e=Ky.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),Qy.reject(t)})).On(),u={},s.catch((function(){})),[4,e.qn];case 3:return[2,(u.value=(l.sent(),s),u)];case 4:return c=l.sent(),h="FirebaseError"!==c.name&&o<3,cp("SimpleDb","Transaction failed with error:",c.message,"Retrying:",h),a.close(),h?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Xy=function(){function t(t){this.Zn=t,this.ts=!1,this.es=null}return Object.defineProperty(t.prototype,"xn",{get:function(){return this.ts},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ns",{get:function(){return this.es},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Zn=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.ts=!0},t.prototype.ss=function(t){this.es=t},t.prototype.delete=function(){return tg(this.Zn.delete())},t}(),$y=function(t){function e(e,n){var r=this;return(r=t.call(this,Ep.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return ii(e,t),e}(Ip);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jy(t){return"IndexedDbTransactionError"===t.name}var Zy=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(cp("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(cp("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),tg(n)},t.prototype.add=function(t){return cp("SimpleDb","ADD",this.store.name,t,t),tg(this.store.add(t))},t.prototype.get=function(t){var e=this;return tg(this.store.get(t)).next((function(n){return void 0===n&&(n=null),cp("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return cp("SimpleDb","DELETE",this.store.name,t),tg(this.store.delete(t))},t.prototype.count=function(){return cp("SimpleDb","COUNT",this.store.name),tg(this.store.count())},t.prototype.rs=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.os(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.cs=function(t,e){cp("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.us=!1;var r=this.cursor(n);return this.os(r,(function(t,e,n){return n.delete()}))},t.prototype.hs=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.os(r,e)},t.prototype.ls=function(t){var e=this.cursor({});return new Qy((function(n,r){e.onerror=function(t){var e=ng(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.os=function(t,e){var n=[];return new Qy((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Xy(i),s=e(i.primaryKey,i.value,o);if(s instanceof Qy){var a=s.catch((function(t){return o.done(),Qy.reject(t)}));n.push(a)}o.xn?r():null===o.ns?i.continue():i.continue(o.ns)}else r()}})).next((function(){return Qy.Mn(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.us?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function tg(t){return new Qy((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=ng(t.target.error);n(e)}}))}var eg=!1;function ng(t){var e=Yy.Qn(Ei());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Ip("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return eg||(eg=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rg=function(){function t(t,e,n,r,i){this._s=t,this.fs=e,this.ds=n,this.op=r,this.ws=i,this.Es=new zy,this.then=this.Es.promise.then.bind(this.Es.promise),this.Es.promise.catch((function(t){}))}return t.Ts=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.Is=setTimeout((function(){return e.As()}),t)},t.prototype.Rs=function(){return this.As()},t.prototype.cancel=function(t){null!==this.Is&&(this.clearTimeout(),this.Es.reject(new Ip(Ep.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.As=function(){var t=this;this._s.Ps((function(){return null!==t.Is?(t.clearTimeout(),t.op().then((function(e){return t.Es.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.Is&&(this.ws(this),clearTimeout(this.Is),this.Is=null)},t}();function ig(t,e){if(hp("AsyncQueue",e+": "+t),Jy(t))return new Ip(Ep.UNAVAILABLE,e+": "+t);throw t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var og="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",sg=function(){function t(){this.ys=[]}return t.prototype.gs=function(t){this.ys.push(t)},t.prototype.Vs=function(){this.ys.forEach((function(t){return t()}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ag(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=cg(e)),e=ug(t.get(n),e);return cg(e)}function ug(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function cg(t){return t+""}function hg(t){var e=t.length;if(dp(e>=2),2===e)return dp(""===t.charAt(0)&&""===t.charAt(1)),Lp.ct();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&pp(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:pp()}o=s+2}return new Lp(r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lg=function(t,e){this.seconds=t,this.nanoseconds=e},fg=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};fg.store="owner",fg.key="owner";var pg=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};pg.store="mutationQueues",pg.keyPath="userId";var dg=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};dg.store="mutations",dg.keyPath="batchId",dg.userMutationsIndex="userMutationsIndex",dg.userMutationsKeyPath=["userId","batchId"];var vg=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,ag(e)]},t.key=function(t,e,n){return[t,ag(e),n]},t}();vg.store="documentMutations",vg.PLACEHOLDER=new vg;var yg=function(t,e){this.path=t,this.readTime=e},gg=function(t,e){this.path=t,this.version=e},mg=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};mg.store="remoteDocuments",mg.readTimeIndex="readTimeIndex",mg.readTimeIndexPath="readTime",mg.collectionReadTimeIndex="collectionReadTimeIndex",mg.collectionReadTimeIndexPath=["parentPath","readTime"];var _g=function(t){this.byteSize=t};_g.store="remoteDocumentGlobal",_g.key="remoteDocumentGlobalKey";var bg=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};bg.store="targets",bg.keyPath="targetId",bg.queryTargetsIndexName="queryTargetsIndex",bg.queryTargetsKeyPath=["canonicalId","targetId"];var wg=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};wg.store="targetDocuments",wg.keyPath=["targetId","path"],wg.documentTargetsIndex="documentTargetsIndex",wg.documentTargetsKeyPath=["path","targetId"];var Eg=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Eg.key="targetGlobalKey",Eg.store="targetGlobal";var Ig=function(t,e){this.collectionId=t,this.parent=e};Ig.store="collectionParents",Ig.keyPath=["collectionId","parent"];var Tg=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Tg.store="clientMetadata",Tg.keyPath="clientId";var Sg=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Sg.store="bundles",Sg.keyPath="bundleId";var Cg=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Cg.store="namedQueries",Cg.keyPath="name";var Ng=li(li(li(li([pg.store,dg.store,vg.store,mg.store,bg.store,fg.store,Eg.store,wg.store],[Tg.store]),[_g.store]),[Ig.store]),[Sg.store,Cg.store]),Ag=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ps=e,r.bs=n,r}return ii(e,t),e}(sg);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kg(t,e){var n=vp(t);return Yy.zn(n.ps,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pg=function(){function t(t,e,n,r){this.batchId=t,this.vs=e,this.baseMutations=n,this.mutations=r}return t.prototype.Ss=function(t,e,n){for(var r=n.Ds,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=Iv(o,e,r[i]))}return e},t.prototype.Cs=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(t)&&(e=Tv(s,e,this.vs));for(var i=0,o=this.mutations;i<o.length;i++){var s;(s=o[i]).key.isEqual(t)&&(e=Tv(s,e,this.vs))}return e},t.prototype.xs=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.Cs(r.key,t.get(r.key));i&&(n=n.zt(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Zv())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&_p(this.mutations,t.mutations,(function(t,e){return Cv(t,e)}))&&_p(this.baseMutations,t.baseMutations,(function(t,e){return Cv(t,e)}))},t}(),Og=function(){function t(t,e,n,r){this.batch=t,this.Ns=e,this.Ds=n,this.$s=r}return t.from=function(e,n,r){dp(e.mutations.length===r.length);for(var i=$v,o=e.mutations,s=0;s<o.length;s++)i=i.zt(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),xg=function(t){this.Fs=t};function Rg(t,e){if(e.document)return function(t,e,n){var r=Ty(t,e.name),i=by(e.updateTime),o=new fd({mapValue:{fields:e.fields}});return new yd(r,i,o,{hasCommittedMutations:!!n})}(t.Fs,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Vp.Et(e.noDocument.path),r=Vg(e.noDocument.readTime);return new gd(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=Vp.Et(e.unknownDocument.path);return r=Vg(e.unknownDocument.version),new md(i,r)}return pp()}function Dg(t,e,n){var r,i,o=Lg(n),s=e.key.path.X().it();if(e instanceof yd){var a={name:Iy(r=t.Fs,(i=e).key),fields:i.bt().mapValue.fields,updateTime:gy(r,i.version.j())},u=e.hasCommittedMutations;return new mg(null,null,a,u,o,s)}if(e instanceof gd){var c=e.key.path.it(),h=Fg(e.version);return u=e.hasCommittedMutations,new mg(null,new yg(c,h),null,u,o,s)}if(e instanceof md){var l=e.key.path.it(),f=Fg(e.version);return new mg(new gg(l,f),null,null,!0,o,s)}return pp()}function Lg(t){var e=t.j();return[e.seconds,e.nanoseconds]}function Mg(t){var e=new xp(t[0],t[1]);return Rp.K(e)}function Fg(t){var e=t.j();return new lg(e.seconds,e.nanoseconds)}function Vg(t){var e=new xp(t.seconds,t.nanoseconds);return Rp.K(e)}function Ug(t,e){for(var n=(e.baseMutations||[]).map((function(e){return Oy(t.Fs,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var s=e.mutations.map((function(e){return Oy(t.Fs,e)})),a=xp.fromMillis(e.localWriteTimeMs);return new Pg(e.batchId,a,n,s)}function jg(t){var e,n,r=Vg(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Vg(t.lastLimboFreeSnapshotVersion):Rp.min();return void 0!==t.query.documents?(dp(1===(n=t.query).documents.length),e=Kd(qd(Cy(n.documents[0])))):e=Kd(Dy(t.query)),new nv(e,t.targetId,0,t.lastListenSequenceNumber,r,i,wp.fromBase64String(t.resumeToken))}function qg(t,e){var n,r=Fg(e.Ot),i=Fg(e.lastLimboFreeSnapshotVersion);n=Id(e.target)?xy(t.Fs,e.target):Ry(t.Fs,e.target);var o=e.resumeToken.toBase64();return new bg(e.targetId,wd(e.target),r,o,e.sequenceNumber,i,n)}function Bg(t){var e=Dy({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Yd(e,e.limit,"L"):e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wg=function(){function t(){}return t.prototype.Os=function(t,e){return Hg(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:Vg(e.createTime),version:e.version};var e}))},t.prototype.ks=function(t,e){return Hg(t).put({bundleId:(n=e).id,createTime:Fg(by(n.createTime)),version:n.version});var n},t.prototype.Ms=function(t,e){return Gg(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:Bg(e.bundledQuery),readTime:Vg(e.readTime)};var e}))},t.prototype.Ls=function(t,e){return Gg(t).put({name:(n=e).name,readTime:Fg(by(n.readTime)),bundledQuery:n.bundledQuery});var n},t}();function Hg(t){return kg(t,Sg.store)}function Gg(t){return kg(t,Cg.store)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zg=function(){function t(){this.Bs=new Qg}return t.prototype.qs=function(t,e){return this.Bs.add(e),Qy.resolve()},t.prototype.Us=function(t,e){return Qy.resolve(this.Bs.getEntries(e))},t}(),Qg=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.tt(),n=t.X(),r=this.index[e]||new Hv(Lp.H),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.tt(),n=t.X(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Hv(Lp.H)).it()},t}(),Kg=function(){function t(){this.Qs=new Qg}return t.prototype.qs=function(t,e){var n=this;if(!this.Qs.has(e)){var r=e.tt(),i=e.X();t.gs((function(){n.Qs.add(e)}));var o={collectionId:r,parent:ag(i)};return Yg(t).put(o)}return Qy.resolve()},t.prototype.Us=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[bp(e),""],!1,!0);return Yg(t).rs(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(hg(o.parent))}return n}))},t}();function Yg(t){return kg(t,Ig.store)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xg={Ks:!1,Ws:0,js:0,Gs:0},$g=function(){function t(t,e,n){this.zs=t,this.Hs=e,this.Js=n}return t.Ys=function(e){return new t(e,t.Xs,t.Zs)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jg(t){return si(this,void 0,void 0,(function(){return ai(this,(function(e){if(t.code!==Ep.FAILED_PRECONDITION||t.message!==og)throw t;return cp("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$g.Xs=10,$g.Zs=1e3,$g.ti=new $g(41943040,$g.Xs,$g.Zs),$g.ei=new $g(-1,0,0);var Zg=function(){function t(t,e){this.ni=t,this.si=e,this.ii={}}return t.prototype.get=function(t){var e=this.ni(t),n=this.ii[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(this.si(s,t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.ni(t),r=this.ii[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.si(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.ii[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.ni(t),n=this.ii[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.si(n[r][0],t))return 1===n.length?delete this.ii[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){jp(this.ii,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];t(s,a)}}))},t.prototype.et=function(){return qp(this.ii)},t}(),tm=function(){function t(){this.ri=new Zg((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.oi=!1}return t.prototype.ci=function(t){var e=this.ri.get(t);return e?e.readTime:Rp.min()},t.prototype.ai=function(t,e){this.ui(),this.ri.set(t.key,{hi:t,readTime:e})},t.prototype.li=function(t,e){void 0===e&&(e=null),this.ui(),this.ri.set(t,{hi:null,readTime:e})},t.prototype._i=function(t,e){this.ui();var n=this.ri.get(e);return void 0!==n?Qy.resolve(n.hi):this.fi(t,e)},t.prototype.getEntries=function(t,e){return this.di(t,e)},t.prototype.apply=function(t){return this.ui(),this.oi=!0,this.wi(t)},t.prototype.ui=function(){},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function em(t,e,n){var r=t.store(dg.store),i=t.store(vg.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.hs({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){dp(1===a)})));for(var c=[],h=0,l=n.mutations;h<l.length;h++){var f=l[h],p=vg.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return Qy.Mn(o).next((function(){return c}))}function nm(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw pp();e=t.noDocument}return JSON.stringify(e).length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rm=function(){function t(t,e,n,r){this.userId=t,this.Qt=e,this.Ei=n,this.Ti=r,this.Ii={}}return t.mi=function(e,n,r,i){return dp(""!==e.uid),new t(e.m()?e.uid:"",n,r,i)},t.prototype.Ai=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return om(t).hs({index:dg.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.Ri=function(t,e,n,r){var i=this,o=sm(t),s=om(t);return s.add({}).next((function(a){dp("number"==typeof a);for(var u=new Pg(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return Py(t.Fs,e)})),i=n.mutations.map((function(e){return Py(t.Fs,e)}));return new dg(e,n.batchId,n.vs.toMillis(),r,i)}(i.Qt,i.userId,u),h=[],l=new Hv((function(t,e){return mp(t.rt(),e.rt())})),f=0,p=r;f<p.length;f++){var d=p[f],v=vg.key(i.userId,d.key.path,a);l=l.add(d.key.path.X()),h.push(s.put(c)),h.push(o.put(v,vg.PLACEHOLDER))}return l.forEach((function(e){h.push(i.Ei.qs(t,e))})),t.gs((function(){i.Ii[a]=u.keys()})),Qy.Mn(h).next((function(){return u}))}))},t.prototype.Pi=function(t,e){var n=this;return om(t).get(e).next((function(t){return t?(dp(t.userId===n.userId),Ug(n.Qt,t)):null}))},t.prototype.yi=function(t,e){var n=this;return this.Ii[e]?Qy.resolve(this.Ii[e]):this.Pi(t,e).next((function(t){if(t){var r=t.keys();return n.Ii[e]=r,r}return null}))},t.prototype.gi=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return om(t).hs({index:dg.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(dp(e.batchId>=r),o=Ug(n.Qt,e)),i.done()})).next((function(){return o}))},t.prototype.Vi=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return om(t).hs({index:dg.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.pi=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return om(t).rs(dg.userMutationsIndex,n).next((function(t){return t.map((function(t){return Ug(e.Qt,t)}))}))},t.prototype.bi=function(t,e){var n=this,r=vg.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return sm(t).hs({range:i},(function(r,i,s){var a=r[0],u=r[1],c=r[2],h=hg(u);if(a===n.userId&&e.path.isEqual(h))return om(t).get(c).next((function(t){if(!t)throw pp();dp(t.userId===n.userId),o.push(Ug(n.Qt,t))}));s.done()})).next((function(){return o}))},t.prototype.vi=function(t,e){var n=this,r=new Hv(mp),i=[];return e.forEach((function(e){var o=vg.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=sm(t).hs({range:s},(function(t,i,o){var s=t[0],a=t[1],u=t[2],c=hg(a);s===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(a)})),Qy.Mn(i).next((function(){return n.Si(t,r)}))},t.prototype.Di=function(t,e){var n=this,r=e.path,i=r.length+1,o=vg.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Hv(mp);return sm(t).hs({range:s},(function(t,e,o){var s=t[0],u=t[1],c=t[2],h=hg(u);s===n.userId&&r.nt(h)?h.length===i&&(a=a.add(c)):o.done()})).next((function(){return n.Si(t,a)}))},t.prototype.Si=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(om(t).get(e).next((function(t){if(null===t)throw pp();dp(t.userId===n.userId),r.push(Ug(n.Qt,t))})))})),Qy.Mn(i).next((function(){return r}))},t.prototype.Ci=function(t,e){var n=this;return em(t.ps,this.userId,e).next((function(r){return t.gs((function(){n.xi(e.batchId)})),Qy.forEach(r,(function(e){return n.Ti.Ni(t,e)}))}))},t.prototype.xi=function(t){delete this.Ii[t]},t.prototype.$i=function(t){var e=this;return this.Ai(t).next((function(n){if(!n)return Qy.resolve();var r=IDBKeyRange.lowerBound(vg.prefixForUser(e.userId)),i=[];return sm(t).hs({range:r},(function(t,n,r){if(t[0]===e.userId){var o=hg(t[1]);i.push(o)}else r.done()})).next((function(){dp(0===i.length)}))}))},t.prototype.Fi=function(t,e){return im(t,this.userId,e)},t.prototype.Oi=function(t){var e=this;return am(t).get(this.userId).next((function(t){return t||new pg(e.userId,-1,"")}))},t}();function im(t,e,n){var r=vg.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return sm(t).hs({range:o,us:!0},(function(t,n,r){var o=t[0],a=t[1];t[2],o===e&&a===i&&(s=!0),r.done()})).next((function(){return s}))}function om(t){return kg(t,dg.store)}function sm(t){return kg(t,vg.store)}function am(t){return kg(t,pg.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var um=function(){function t(t){this.ki=t}return t.prototype.next=function(){return this.ki+=2,this.ki},t.Mi=function(){return new t(0)},t.Li=function(){return new t(-1)},t}(),cm=function(){function t(t,e){this.Ti=t,this.Qt=e}return t.prototype.Bi=function(t){var e=this;return this.qi(t).next((function(n){var r=new um(n.highestTargetId);return n.highestTargetId=r.next(),e.Ui(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.Qi=function(t){return this.qi(t).next((function(t){return Rp.K(new xp(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.Ki=function(t){return this.qi(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.Wi=function(t,e,n){var r=this;return this.qi(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.j()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Ui(t,i)}))},t.prototype.ji=function(t,e){var n=this;return this.Gi(t,e).next((function(){return n.qi(t).next((function(r){return r.targetCount+=1,n.zi(e,r),n.Ui(t,r)}))}))},t.prototype.Hi=function(t,e){return this.Gi(t,e)},t.prototype.Ji=function(t,e){var n=this;return this.Yi(t,e.targetId).next((function(){return hm(t).delete(e.targetId)})).next((function(){return n.qi(t)})).next((function(e){return dp(e.targetCount>0),e.targetCount-=1,n.Ui(t,e)}))},t.prototype.Xi=function(t,e,n){var r=this,i=0,o=[];return hm(t).hs((function(s,a){var u=jg(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.Ji(t,u)))})).next((function(){return Qy.Mn(o)})).next((function(){return i}))},t.prototype.In=function(t,e){return hm(t).hs((function(t,n){var r=jg(n);e(r)}))},t.prototype.qi=function(t){return lm(t).get(Eg.key).next((function(t){return dp(null!==t),t}))},t.prototype.Ui=function(t,e){return lm(t).put(Eg.key,e)},t.prototype.Gi=function(t,e){return hm(t).put(qg(this.Qt,e))},t.prototype.zi=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.Zi=function(t){return this.qi(t).next((function(t){return t.targetCount}))},t.prototype.tr=function(t,e){var n=wd(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return hm(t).hs({range:r,index:bg.queryTargetsIndexName},(function(t,n,r){var o=jg(n);Ed(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.er=function(t,e,n){var r=this,i=[],o=fm(t);return e.forEach((function(e){var s=ag(e.path);i.push(o.put(new wg(n,s))),i.push(r.Ti.nr(t,n,e))})),Qy.Mn(i)},t.prototype.sr=function(t,e,n){var r=this,i=fm(t);return Qy.forEach(e,(function(e){var o=ag(e.path);return Qy.Mn([i.delete([n,o]),r.Ti.ir(t,n,e)])}))},t.prototype.Yi=function(t,e){var n=fm(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.rr=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=fm(t),i=Zv();return r.hs({range:n,us:!0},(function(t,e,n){var r=hg(t[1]),o=new Vp(r);i=i.add(o)})).next((function(){return i}))},t.prototype.Fi=function(t,e){var n=ag(e.path),r=IDBKeyRange.bound([n],[bp(n)],!1,!0),i=0;return fm(t).hs({index:wg.documentTargetsIndex,us:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Sn=function(t,e){return hm(t).get(e).next((function(t){return t?jg(t):null}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hm(t){return kg(t,bg.store)}function lm(t){return kg(t,Eg.store)}function fm(t){return kg(t,wg.store)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pm(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=mp(n,i);return 0===s?mp(r,o):s}var dm=function(){function t(t){this.cr=t,this.buffer=new Hv(pm),this.ar=0}return t.prototype.ur=function(){return++this.ar},t.prototype.hr=function(t){var e=[t,this.ur()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();pm(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),vm=function(){function t(t,e){this.lr=t,this._s=e,this._r=!1,this.dr=null}return t.prototype.start=function(t){-1!==this.lr.params.zs&&this.wr(t)},t.prototype.stop=function(){this.dr&&(this.dr.cancel(),this.dr=null)},Object.defineProperty(t.prototype,"Er",{get:function(){return null!==this.dr},enumerable:!1,configurable:!0}),t.prototype.wr=function(t){var e=this,n=this._r?3e5:6e4;cp("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.dr=this._s.Tr("lru_garbage_collection",n,(function(){return si(e,void 0,void 0,(function(){var e;return ai(this,(function(n){switch(n.label){case 0:this.dr=null,this._r=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.Ir(this.lr)];case 2:return n.sent(),[3,7];case 3:return Jy(e=n.sent())?(cp("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Jg(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.wr(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),ym=function(){function t(t,e){this.mr=t,this.params=e}return t.prototype.Ar=function(t,e){return this.mr.Rr(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.Pr=function(t,e){var n=this;if(0===e)return Qy.resolve(Op.q);var r=new dm(e);return this.mr.In(t,(function(t){return r.hr(t.sequenceNumber)})).next((function(){return n.mr.yr(t,(function(t){return r.hr(t)}))})).next((function(){return r.maxValue}))},t.prototype.Xi=function(t,e,n){return this.mr.Xi(t,e,n)},t.prototype.gr=function(t,e){return this.mr.gr(t,e)},t.prototype.Vr=function(t,e){var n=this;return-1===this.params.zs?(cp("LruGarbageCollector","Garbage collection skipped; disabled"),Qy.resolve(Xg)):this.pr(t).next((function(r){return r<n.params.zs?(cp("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.zs),Xg):n.br(t,e)}))},t.prototype.pr=function(t){return this.mr.pr(t)},t.prototype.br=function(t,e){var n,r,i,o,s,a,u,c=this,h=Date.now();return this.Ar(t,this.params.Hs).next((function(e){return e>c.params.Js?(cp("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.Js+" from "+e),r=c.params.Js):r=e,o=Date.now(),c.Pr(t,r)})).next((function(r){return n=r,s=Date.now(),c.Xi(t,n,e)})).next((function(e){return i=e,a=Date.now(),c.gr(t,n)})).next((function(t){return u=Date.now(),up()<=Ji.DEBUG&&cp("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-h)+"ms"),Qy.resolve({Ks:!0,Ws:r,js:i,Gs:t})}))},t}(),gm=function(){function t(t,e){this.db=t,this.lr=new ym(this,e)}return t.prototype.Rr=function(t){var e=this.vr(t);return this.db.Sr().Zi(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.vr=function(t){var e=0;return this.yr(t,(function(t){e++})).next((function(){return e}))},t.prototype.In=function(t,e){return this.db.Sr().In(t,e)},t.prototype.yr=function(t,e){return this.Dr(t,(function(t,n){return e(n)}))},t.prototype.nr=function(t,e,n){return mm(t,n)},t.prototype.ir=function(t,e,n){return mm(t,n)},t.prototype.Xi=function(t,e,n){return this.db.Sr().Xi(t,e,n)},t.prototype.Ni=function(t,e){return mm(t,e)},t.prototype.Cr=function(t,e){return r=e,i=!1,am(n=t).ls((function(t){return im(n,t,r).next((function(t){return t&&(i=!0),Qy.resolve(!t)}))})).next((function(){return i}));var n,r,i},t.prototype.gr=function(t,e){var n=this,r=this.db.$r().Nr(),i=[],o=0;return this.Dr(t,(function(s,a){if(a<=e){var u=n.Cr(t,s).next((function(e){if(!e)return o++,r._i(t,s).next((function(){return r.li(s),fm(t).delete([0,ag(s.path)])}))}));i.push(u)}})).next((function(){return Qy.Mn(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.kt(t.bs);return this.db.Sr().Hi(t,n)},t.prototype.Fr=function(t,e){return mm(t,e)},t.prototype.Dr=function(t,e){var n,r=fm(t),i=Op.q;return r.hs({index:wg.documentTargetsIndex},(function(t,r){var o=t[0],s=(t[1],r.path),a=r.sequenceNumber;0===o?(i!==Op.q&&e(new Vp(hg(n)),i),i=a,n=s):i=Op.q})).next((function(){i!==Op.q&&e(new Vp(hg(n)),i)}))},t.prototype.pr=function(t){return this.db.$r().Or(t)},t}();function mm(t,e){return fm(t).put((n=e,r=t.bs,new wg(0,ag(n.path),r)));var n,r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _m=function(){function t(t,e){this.Qt=t,this.Ei=e}return t.prototype.ai=function(t,e,n){return Em(t).put(Im(e),n)},t.prototype.li=function(t,e){var n=Em(t),r=Im(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.kr(t,r)}))},t.prototype._i=function(t,e){var n=this;return Em(t).get(Im(e)).next((function(t){return n.Mr(t)}))},t.prototype.Lr=function(t,e){var n=this;return Em(t).get(Im(e)).next((function(t){var e=n.Mr(t);return e?{hi:e,size:nm(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=Kv();return this.Br(t,e,(function(t,e){var i=n.Mr(e);r=r.zt(t,i)})).next((function(){return r}))},t.prototype.qr=function(t,e){var n=this,r=Kv(),i=new qv(Vp.H);return this.Br(t,e,(function(t,e){var o=n.Mr(e);o?(r=r.zt(t,o),i=i.zt(t,nm(e))):(r=r.zt(t,null),i=i.zt(t,0))})).next((function(){return{Ur:r,Qr:i}}))},t.prototype.Br=function(t,e,n){if(e.et())return Qy.resolve();var r=IDBKeyRange.bound(e.first().path.it(),e.last().path.it()),i=e.te(),o=i.oe();return Em(t).hs({range:r},(function(t,e,r){for(var s=Vp.Et(t);o&&Vp.H(o,s)<0;)n(o,null),o=i.oe();o&&o.isEqual(s)&&(n(o,e),o=i.ce()?i.oe():null),o?r.ss(o.path.it()):r.done()})).next((function(){for(;o;)n(o,null),o=i.ce()?i.oe():null}))},t.prototype.Kr=function(t,e,n){var r=this,i=Xv(),o=e.path.length+1,s={};if(n.isEqual(Rp.min())){var a=e.path.it();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.it(),c=Lg(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=mg.collectionReadTimeIndex}return Em(t).hs(s,(function(t,n,s){if(t.length===o){var a=Rg(r.Qt,n);e.path.nt(a.key.path)?a instanceof yd&&Zd(e,a)&&(i=i.zt(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.Nr=function(t){return new bm(this,!!t&&t.Wr)},t.prototype.Or=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return wm(t).get(_g.key).next((function(t){return dp(!!t),t}))},t.prototype.kr=function(t,e){return wm(t).put(_g.key,e)},t.prototype.Mr=function(t){if(t){var e=Rg(this.Qt,t);return e instanceof gd&&e.version.isEqual(Rp.min())?null:e}return null},t}(),bm=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jr=e,r.Wr=n,r.Gr=new Zg((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return ii(e,t),e.prototype.wi=function(t){var e=this,n=[],r=0,i=new Hv((function(t,e){return mp(t.rt(),e.rt())}));return this.ri.forEach((function(o,s){var a=e.Gr.get(o);if(s.hi){var u=Dg(e.jr.Qt,s.hi,e.ci(o));i=i.add(o.path.X());var c=nm(u);r+=c-a,n.push(e.jr.ai(t,o,u))}else if(r-=a,e.Wr){var h=Dg(e.jr.Qt,new gd(o,Rp.min()),e.ci(o));n.push(e.jr.ai(t,o,h))}else n.push(e.jr.li(t,o))})),i.forEach((function(r){n.push(e.jr.Ei.qs(t,r))})),n.push(this.jr.updateMetadata(t,r)),Qy.Mn(n)},e.prototype.fi=function(t,e){var n=this;return this.jr.Lr(t,e).next((function(t){return null===t?(n.Gr.set(e,0),null):(n.Gr.set(e,t.size),t.hi)}))},e.prototype.di=function(t,e){var n=this;return this.jr.qr(t,e).next((function(t){var e=t.Ur;return t.Qr.forEach((function(t,e){n.Gr.set(t,e)})),e}))},e}(tm);function wm(t){return kg(t,_g.store)}function Em(t){return kg(t,mg.store)}function Im(t){return t.path.it()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tm=function(){function t(t){this.Qt=t}return t.prototype.Jn=function(t,e,n,r){var i=this;dp(n<r&&n>=0&&r<=11);var o=new Ky("createOrUpgrade",e);n<1&&r>=1&&(t.createObjectStore(fg.store),function(t){t.createObjectStore(pg.store,{keyPath:pg.keyPath}),t.createObjectStore(dg.store,{keyPath:dg.keyPath,autoIncrement:!0}).createIndex(dg.userMutationsIndex,dg.userMutationsKeyPath,{unique:!0}),t.createObjectStore(vg.store)}(t),Sm(t),function(t){t.createObjectStore(mg.store)}(t));var s=Qy.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(wg.store),t.deleteObjectStore(bg.store),t.deleteObjectStore(Eg.store)}(t),Sm(t)),s=s.next((function(){return function(t){var e=t.store(Eg.store),n=new Eg(0,0,Rp.min().j(),0);return e.put(Eg.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(dg.store).rs().next((function(n){t.deleteObjectStore(dg.store),t.createObjectStore(dg.store,{keyPath:dg.keyPath,autoIncrement:!0}).createIndex(dg.userMutationsIndex,dg.userMutationsKeyPath,{unique:!0});var r=e.store(dg.store),i=n.map((function(t){return r.put(t)}));return Qy.Mn(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(Tg.store,{keyPath:Tg.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.zr(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(_g.store)}(t),i.Hr(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.Jr(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Yr(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(mg.store);e.createIndex(mg.readTimeIndex,mg.readTimeIndexPath,{unique:!1}),e.createIndex(mg.collectionReadTimeIndex,mg.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.Xr(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(Sg.store,{keyPath:Sg.keyPath})}(t),function(t){t.createObjectStore(Cg.store,{keyPath:Cg.keyPath})}(t)}))),s},t.prototype.Hr=function(t){var e=0;return t.store(mg.store).hs((function(t,n){e+=nm(n)})).next((function(){var n=new _g(e);return t.store(_g.store).put(_g.key,n)}))},t.prototype.zr=function(t){var e=this,n=t.store(pg.store),r=t.store(dg.store);return n.rs().next((function(n){return Qy.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.rs(dg.userMutationsIndex,i).next((function(r){return Qy.forEach(r,(function(r){dp(r.userId===n.userId);var i=Ug(e.Qt,r);return em(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.Jr=function(t){var e=t.store(wg.store),n=t.store(mg.store);return t.store(Eg.store).get(Eg.key).next((function(t){var r=[];return n.hs((function(n,i){var o=new Lp(n),s=[0,ag(o)];r.push(e.get(s).next((function(n){return n?Qy.resolve():(r=o,e.put(new wg(0,ag(r),t.highestListenSequenceNumber)));var r})))})).next((function(){return Qy.Mn(r)}))}))},t.prototype.Yr=function(t,e){t.createObjectStore(Ig.store,{keyPath:Ig.keyPath});var n=e.store(Ig.store),r=new Qg,i=function(t){if(r.add(t)){var e=t.tt(),i=t.X();return n.put({collectionId:e,parent:ag(i)})}};return e.store(mg.store).hs({us:!0},(function(t,e){var n=new Lp(t);return i(n.X())})).next((function(){return e.store(vg.store).hs({us:!0},(function(t,e){t[0];var n=t[1],r=(t[2],hg(n));return i(r.X())}))}))},t.prototype.Xr=function(t){var e=this,n=t.store(bg.store);return n.hs((function(t,r){var i=jg(r),o=qg(e.Qt,i);return n.put(o)}))},t}();function Sm(t){t.createObjectStore(wg.store,{keyPath:wg.keyPath}).createIndex(wg.documentTargetsIndex,wg.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(bg.store,{keyPath:bg.keyPath}).createIndex(bg.queryTargetsIndexName,bg.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Eg.store)}var Cm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Nm=function(){function t(e,n,r,i,o,s,a,u,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Zr=o,this.window=s,this.document=a,this.eo=c,this.no=h,this.so=null,this.io=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ro=null,this.inForeground=!1,this.oo=null,this.co=null,this.ao=Number.NEGATIVE_INFINITY,this.uo=function(t){return Promise.resolve()},!t.Kn())throw new Ip(Ep.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");var l,f;this.Ti=new gm(this,i),this.ho=n+"main",this.Qt=new xg(u),this.lo=new Yy(this.ho,11,new Tm(this.Qt)),this._o=new cm(this.Ti,this.Qt),this.Ei=new Kg,this.fo=(l=this.Qt,f=this.Ei,new _m(l,f)),this.wo=new Wg,this.window&&this.window.localStorage?this.Eo=this.window.localStorage:(this.Eo=null,!1===h&&hp("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.To().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Ip(Ep.FAILED_PRECONDITION,Cm);return t.Io(),t.mo(),t.Ao(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t._o.Ki(e)}))})).then((function(e){t.so=new Op(e,t.eo)})).then((function(){t.io=!0})).catch((function(e){return t.lo&&t.lo.close(),Promise.reject(e)}))},t.prototype.Ro=function(t){var e=this;return this.uo=function(n){return si(e,void 0,void 0,(function(){return ai(this,(function(e){return this.Er?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.Po=function(t){var e=this;this.lo.Xn((function(n){return si(e,void 0,void 0,(function(){return ai(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.yo=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Zr.Ps((function(){return si(e,void 0,void 0,(function(){return ai(this,(function(t){switch(t.label){case 0:return this.Er?[4,this.To()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.To=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return km(e).put(new Tg(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Vo(e).next((function(e){e||(t.isPrimary=!1,t.Zr.po((function(){return t.uo(!1)})))}))})).next((function(){return t.bo(e)})).next((function(n){return t.isPrimary&&!n?t.vo(e).next((function(){return!1})):!!n&&t.So(e).next((function(){return!0}))}))})).catch((function(e){if(Jy(e))return cp("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return cp("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Zr.po((function(){return t.uo(e)})),t.isPrimary=e}))},t.prototype.Vo=function(t){var e=this;return Am(t).get(fg.key).next((function(t){return Qy.resolve(e.Do(t))}))},t.prototype.Co=function(t){return km(t).delete(this.clientId)},t.prototype.xo=function(){return si(this,void 0,void 0,(function(){var t,e,n,r,i=this;return ai(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.No(this.ao,18e5)?[3,2]:(this.ao=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=kg(t,Tg.store);return e.rs().next((function(t){var n=i.$o(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return Qy.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Eo)for(e=0,n=t;e<n.length;e++)r=n[e],this.Eo.removeItem(this.Fo(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.Ao=function(){var t=this;this.co=this.Zr.Tr("client_metadata_refresh",4e3,(function(){return t.To().then((function(){return t.xo()})).then((function(){return t.Ao()}))}))},t.prototype.Do=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.bo=function(t){var e=this;return this.no?Qy.resolve(!0):Am(t).get(fg.key).next((function(n){if(null!==n&&e.No(n.leaseTimestampMs,5e3)&&!e.Oo(n.ownerId)){if(e.Do(n)&&e.networkEnabled)return!0;if(!e.Do(n)){if(!n.allowTabSynchronization)throw new Ip(Ep.FAILED_PRECONDITION,Cm);return!1}}return!(!e.networkEnabled||!e.inForeground)||km(t).rs().next((function(t){return void 0===e.$o(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&cp("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.ko=function(){return si(this,void 0,void 0,(function(){var t=this;return ai(this,(function(e){switch(e.label){case 0:return this.io=!1,this.Mo(),this.co&&(this.co.cancel(),this.co=null),this.Lo(),this.Bo(),[4,this.lo.runTransaction("shutdown","readwrite",[fg.store,Tg.store],(function(e){var n=new Ag(e,Op.q);return t.vo(n).next((function(){return t.Co(n)}))}))];case 1:return e.sent(),this.lo.close(),this.qo(),[2]}}))}))},t.prototype.$o=function(t,e){var n=this;return t.filter((function(t){return n.No(t.updateTimeMs,e)&&!n.Oo(t.clientId)}))},t.prototype.Uo=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return km(e).rs().next((function(e){return t.$o(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"Er",{get:function(){return this.io},enumerable:!1,configurable:!0}),t.prototype.Qo=function(t){return rm.mi(t,this.Qt,this.Ei,this.Ti)},t.prototype.Sr=function(){return this._o},t.prototype.$r=function(){return this.fo},t.prototype.Ko=function(){return this.Ei},t.prototype.Wo=function(){return this.wo},t.prototype.runTransaction=function(t,e,n){var r=this;cp("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.lo.runTransaction(t,o,Ng,(function(o){return i=new Ag(o,r.so?r.so.next():Op.q),"readwrite-primary"===e?r.Vo(i).next((function(t){return!!t||r.bo(i)})).next((function(e){if(!e)throw hp("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Zr.po((function(){return r.uo(!1)})),new Ip(Ep.FAILED_PRECONDITION,og);return n(i)})).next((function(t){return r.So(i).next((function(){return t}))})):r.jo(i).next((function(){return n(i)}))})).then((function(t){return i.Vs(),t}))},t.prototype.jo=function(t){var e=this;return Am(t).get(fg.key).next((function(t){if(null!==t&&e.No(t.leaseTimestampMs,5e3)&&!e.Oo(t.ownerId)&&!e.Do(t)&&!(e.no||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Ip(Ep.FAILED_PRECONDITION,Cm)}))},t.prototype.So=function(t){var e=new fg(this.clientId,this.allowTabSynchronization,Date.now());return Am(t).put(fg.key,e)},t.Kn=function(){return Yy.Kn()},t.prototype.vo=function(t){var e=this,n=Am(t);return n.get(fg.key).next((function(t){return e.Do(t)?(cp("IndexedDbPersistence","Releasing primary lease."),n.delete(fg.key)):Qy.resolve()}))},t.prototype.No=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(hp("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Io=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.oo=function(){t.Zr.Ps((function(){return t.inForeground="visible"===t.document.visibilityState,t.To()}))},this.document.addEventListener("visibilitychange",this.oo),this.inForeground="visible"===this.document.visibilityState)},t.prototype.Lo=function(){this.oo&&(this.document.removeEventListener("visibilitychange",this.oo),this.oo=null)},t.prototype.mo=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ro=function(){e.Mo(),e.Zr.Ps((function(){return e.ko()}))},this.window.addEventListener("unload",this.ro))},t.prototype.Bo=function(){this.ro&&(this.window.removeEventListener("unload",this.ro),this.ro=null)},t.prototype.Oo=function(t){var e;try{var n=null!==(null===(e=this.Eo)||void 0===e?void 0:e.getItem(this.Fo(t)));return cp("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(r){return hp("IndexedDbPersistence","Failed to get zombied client id.",r),!1}},t.prototype.Mo=function(){if(this.Eo)try{this.Eo.setItem(this.Fo(this.clientId),String(Date.now()))}catch(t){hp("Failed to set zombie client id.",t)}},t.prototype.qo=function(){if(this.Eo)try{this.Eo.removeItem(this.Fo(this.clientId))}catch(t){}},t.prototype.Fo=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Am(t){return kg(t,fg.store)}function km(t){return kg(t,Tg.store)}function Pm(t,e){var n=t.projectId;return t.o||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Om=function(){function t(t,e,n){this.fo=t,this.zo=e,this.Ei=n}return t.prototype.Ho=function(t,e){var n=this;return this.zo.bi(t,e).next((function(r){return n.Jo(t,e,r)}))},t.prototype.Jo=function(t,e,n){return this.fo._i(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].Cs(e,t);return t}))},t.prototype.Yo=function(t,e,n){var r=Kv();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].Cs(t,e);r=r.zt(t,e)})),r},t.prototype.Xo=function(t,e){var n=this;return this.fo.getEntries(t,e).next((function(e){return n.Zo(t,e)}))},t.prototype.Zo=function(t,e){var n=this;return this.zo.vi(t,e).next((function(r){var i=n.Yo(t,e,r),o=Qv();return i.forEach((function(t,e){e||(e=new gd(t,Rp.min())),o=o.zt(t,e)})),o}))},t.prototype.Kr=function(t,e,n){return r=e,Vp.wt(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.tc(t,e.path):zd(e)?this.ec(t,e,n):this.nc(t,e,n);var r},t.prototype.tc=function(t,e){return this.Ho(t,new Vp(e)).next((function(t){var e=Xv();return t instanceof yd&&(e=e.zt(t.key,t)),e}))},t.prototype.ec=function(t,e,n){var r=this,i=e.collectionGroup,o=Xv();return this.Ei.Us(t,i).next((function(s){return Qy.forEach(s,(function(s){var a,u,c=(a=e,u=s.child(i),new Ud(u,null,a.xt.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt));return r.nc(t,c,n).next((function(t){t.forEach((function(t,e){o=o.zt(t,e)}))}))})).next((function(){return o}))}))},t.prototype.nc=function(t,e,n){var r,i,o=this;return this.fo.Kr(t,e,n).next((function(n){return r=n,o.zo.Di(t,e)})).next((function(e){return i=e,o.sc(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,h=Tv(u,r.get(c),o.vs);r=h instanceof yd?r.zt(c,h):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){Zd(e,n)||(r=r.remove(t))})),r}))},t.prototype.sc=function(t,e,n){for(var r=Zv(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof kv&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.fo.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof yd&&(c=c.zt(t,e))})),c}))},t}(),xm=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.ic=n,this.rc=r}return t.oc=function(e,n){for(var r=Zv(),i=Zv(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Rm=function(){function t(){}return t.prototype.cc=function(t){this.ac=t},t.prototype.Kr=function(t,e,n,r){var i,o=this;return 0===(i=e).filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.xt.length||1===i.xt.length&&i.xt[0].field.ut())||n.isEqual(Rp.min())?this.uc(t,e):this.ac.Xo(t,r).next((function(i){var s=o.hc(e,i);return(Bd(e)||Wd(e))&&o.lc(e.limitType,s,r,n)?o.uc(t,e):(up()<=Ji.DEBUG&&cp("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Jd(e)),o.ac.Kr(t,e,n).next((function(t){return s.forEach((function(e){t=t.zt(e.key,e)})),t})))}))},t.prototype.hc=function(t,e){var n=new Hv(tv(t));return e.forEach((function(e,r){r instanceof yd&&Zd(t,r)&&(n=n.add(r))})),n},t.prototype.lc=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version._(r)>0)},t.prototype.uc=function(t,e){return up()<=Ji.DEBUG&&cp("QueryEngine","Using full collection scan to execute query:",Jd(e)),this.ac.Kr(t,e,Rp.min())},t}(),Dm=function(){function t(t,e,n,r){this.persistence=t,this._c=e,this.Qt=r,this.fc=new qv(mp),this.dc=new Zg((function(t){return wd(t)}),Ed),this.wc=Rp.min(),this.zo=t.Qo(n),this.Ec=t.$r(),this._o=t.Sr(),this.Tc=new Om(this.Ec,this.zo,this.persistence.Ko()),this.wo=t.Wo(),this._c.cc(this.Tc)}return t.prototype.Ir=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.Vr(n,e.fc)}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm(t,e,n,r){return new Dm(t,e,n,r)}function Mm(t,e){return si(this,void 0,void 0,(function(){var n,r,i,o;return ai(this,(function(s){switch(s.label){case 0:return n=vp(t),r=n.zo,i=n.Tc,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n.zo.pi(t).next((function(s){return o=s,r=n.persistence.Qo(e),i=new Om(n.Ec,r,n.persistence.Ko()),r.pi(t)})).next((function(e){for(var n=[],r=[],s=Zv(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var h=0,l=c.mutations;h<l.length;h++){var f=l[h];s=s.add(f.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var y=0,g=v.mutations;y<g.length;y++){var m=g[y];s=s.add(m.key)}}return i.Xo(t,s).next((function(t){return{Ic:t,mc:n,Ac:r}}))}))}))];case 1:return o=s.sent(),[2,(n.zo=r,n.Tc=i,n._c.cc(n.Tc),o)]}}))}))}function Fm(t,e){var n=vp(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r,i,o,s,a,u,c,h=e.batch.keys(),l=n.Ec.Nr({Wr:!0});return(r=n,i=t,o=e,s=l,a=o.batch,u=a.keys(),c=Qy.resolve(),u.forEach((function(t){c=c.next((function(){return s._i(i,t)})).next((function(e){var n=e,r=o.$s.get(t);dp(null!==r),(!n||n.version._(r)<0)&&(n=a.Ss(t,n,o))&&s.ai(n,o.Ns)}))})),c.next((function(){return r.zo.Ci(i,a)}))).next((function(){return l.apply(t)})).next((function(){return n.zo.$i(t)})).next((function(){return n.Tc.Xo(t,h)}))}))}function Vm(t){var e=vp(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e._o.Qi(t)}))}function Um(t,e){var n=vp(t),r=e.Ot,i=n.fc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Ec.Nr({Wr:!0});i=n.fc;var s=[];e.$e.forEach((function(e,o){var a,u,c,h=i.get(o);if(h){s.push(n._o.sr(t,e.Qe,o).next((function(){return n._o.er(t,e.qe,o)})));var l=e.resumeToken;if(l.l()>0){var f=h.Mt(l,r).kt(t.bs);i=i.zt(o,f),a=h,c=e,dp((u=f).resumeToken.l()>0),(0===a.resumeToken.l()||u.Ot.W()-a.Ot.W()>=3e8||c.qe.size+c.Ue.size+c.Qe.size>0)&&s.push(n._o.Hi(t,f))}}}));var a=Qv();if(e.Oe.forEach((function(r,i){e.ke.has(r)&&s.push(n.persistence.Ti.Fr(t,r))})),s.push(function(t,e,n,r,i){var o=Zv();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=Qv();return n.forEach((function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s instanceof gd&&s.version.isEqual(Rp.min())?(e.li(n,u),o=o.zt(n,s)):null==a||s.version._(a.version)>0||0===s.version._(a.version)&&a.hasPendingWrites?(e.ai(s,u),o=o.zt(n,s)):cp("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),o}))}(t,o,e.Oe,r,void 0).next((function(t){a=t}))),!r.isEqual(Rp.min())){var u=n._o.Qi(t).next((function(e){return n._o.Wi(t,t.bs,r)}));s.push(u)}return Qy.Mn(s).next((function(){return o.apply(t)})).next((function(){return n.Tc.Zo(t,a)}))})).then((function(t){return n.fc=i,t}))}function jm(t,e){var n=vp(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.zo.gi(t,e)}))}function qm(t,e){var n=vp(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n._o.tr(t,e).next((function(i){return i?(r=i,Qy.resolve(r)):n._o.Bi(t).next((function(i){return r=new nv(e,i,0,t.bs),n._o.ji(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.fc.get(t.targetId);return(null===r||t.Ot._(r.Ot)>0)&&(n.fc=n.fc.zt(t.targetId,t),n.dc.set(e,t.targetId)),t}))}function Bm(t,e,n){return si(this,void 0,void 0,(function(){var r,i,o,s;return ai(this,(function(a){switch(a.label){case 0:r=vp(t),i=r.fc.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.Ti.removeTarget(t,i)}))];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Jy(s=a.sent()))throw s;return cp("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.fc=r.fc.remove(e),r.dc.delete(i.target),[2]}}))}))}function Wm(t,e,n){var r=vp(t),i=Rp.min(),o=Zv();return r.persistence.runTransaction("Execute query","readonly",(function(t){return(s=r,a=t,u=Kd(e),c=vp(s),h=c.dc.get(u),void 0!==h?Qy.resolve(c.fc.get(h)):c._o.tr(a,u)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r._o.rr(t,e.targetId).next((function(t){o=t}))})).next((function(){return r._c.Kr(t,e,n?i:Rp.min(),n?o:Zv())})).next((function(t){return{documents:t,Rc:o}}));var s,a,u,c,h}))}function Hm(t,e){var n=vp(t),r=vp(n._o),i=n.fc.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.Sn(t,e).next((function(t){return t?t.target:null}))}))}function Gm(t){var e=vp(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return n=e.Ec,r=t,i=e.wc,o=vp(n),s=Qv(),a=Lg(i),u=Em(r),c=IDBKeyRange.lowerBound(a,!0),u.hs({index:mg.readTimeIndex,range:c},(function(t,e){var n=Rg(o.Qt,e);s=s.zt(n.key,n),a=e.readTime})).next((function(){return{Go:s,readTime:Mg(a)}}));var n,r,i,o,s,a,u,c})).then((function(t){var n=t.Go,r=t.readTime;return e.wc=r,n}))}function zm(t){return si(this,void 0,void 0,(function(){var e;return ai(this,(function(n){return[2,(e=vp(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return e=Em(t),n=Rp.min(),e.hs({index:mg.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Mg(e.readTime)),r.done()})).next((function(){return n}));var e,n})).then((function(t){e.wc=t}))]}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qm=function(){function t(t){this.Qt=t,this.Vc=new Map,this.bc=new Map}return t.prototype.Os=function(t,e){return Qy.resolve(this.Vc.get(e))},t.prototype.ks=function(t,e){var n;return this.Vc.set(e.id,{id:(n=e).id,version:n.version,createTime:by(n.createTime)}),Qy.resolve()},t.prototype.Ms=function(t,e){return Qy.resolve(this.bc.get(e))},t.prototype.Ls=function(t,e){return this.bc.set(e.name,{name:(n=e).name,query:Bg(n.bundledQuery),readTime:by(n.readTime)}),Qy.resolve();var n},t}(),Km=function(){function t(){this.vc=new Hv(Ym.Sc),this.Dc=new Hv(Ym.Cc)}return t.prototype.et=function(){return this.vc.et()},t.prototype.nr=function(t,e){var n=new Ym(t,e);this.vc=this.vc.add(n),this.Dc=this.Dc.add(n)},t.prototype.xc=function(t,e){var n=this;t.forEach((function(t){return n.nr(t,e)}))},t.prototype.ir=function(t,e){this.Nc(new Ym(t,e))},t.prototype.$c=function(t,e){var n=this;t.forEach((function(t){return n.ir(t,e)}))},t.prototype.Fc=function(t){var e=this,n=new Vp(new Lp([])),r=new Ym(n,t),i=new Ym(n,t+1),o=[];return this.Dc.me([r,i],(function(t){e.Nc(t),o.push(t.key)})),o},t.prototype.Oc=function(){var t=this;this.vc.forEach((function(e){return t.Nc(e)}))},t.prototype.Nc=function(t){this.vc=this.vc.delete(t),this.Dc=this.Dc.delete(t)},t.prototype.kc=function(t){var e=new Vp(new Lp([])),n=new Ym(e,t),r=new Ym(e,t+1),i=Zv();return this.Dc.me([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.Fi=function(t){var e=new Ym(t,0),n=this.vc.Re(e);return null!==n&&t.isEqual(n.key)},t}(),Ym=function(){function t(t,e){this.key=t,this.Mc=e}return t.Sc=function(t,e){return Vp.H(t.key,e.key)||mp(t.Mc,e.Mc)},t.Cc=function(t,e){return mp(t.Mc,e.Mc)||Vp.H(t.key,e.key)},t}(),Xm=function(){function t(t,e){this.Ei=t,this.Ti=e,this.zo=[],this.Lc=1,this.Bc=new Hv(Ym.Sc)}return t.prototype.Ai=function(t){return Qy.resolve(0===this.zo.length)},t.prototype.Ri=function(t,e,n,r){var i=this.Lc;this.Lc++,this.zo.length>0&&this.zo[this.zo.length-1];var o=new Pg(i,e,n,r);this.zo.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.Bc=this.Bc.add(new Ym(u.key,i)),this.Ei.qs(t,u.key.path.X())}return Qy.resolve(o)},t.prototype.Pi=function(t,e){return Qy.resolve(this.qc(e))},t.prototype.gi=function(t,e){var n=e+1,r=this.Uc(n),i=r<0?0:r;return Qy.resolve(this.zo.length>i?this.zo[i]:null)},t.prototype.Vi=function(){return Qy.resolve(0===this.zo.length?-1:this.Lc-1)},t.prototype.pi=function(t){return Qy.resolve(this.zo.slice())},t.prototype.bi=function(t,e){var n=this,r=new Ym(e,0),i=new Ym(e,Number.POSITIVE_INFINITY),o=[];return this.Bc.me([r,i],(function(t){var e=n.qc(t.Mc);o.push(e)})),Qy.resolve(o)},t.prototype.vi=function(t,e){var n=this,r=new Hv(mp);return e.forEach((function(t){var e=new Ym(t,0),i=new Ym(t,Number.POSITIVE_INFINITY);n.Bc.me([e,i],(function(t){r=r.add(t.Mc)}))})),Qy.resolve(this.Qc(r))},t.prototype.Di=function(t,e){var n=e.path,r=n.length+1,i=n;Vp.wt(i)||(i=i.child(""));var o=new Ym(new Vp(i),0),s=new Hv(mp);return this.Bc.Ae((function(t){var e=t.key.path;return!!n.nt(e)&&(e.length===r&&(s=s.add(t.Mc)),!0)}),o),Qy.resolve(this.Qc(s))},t.prototype.Qc=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.qc(t);null!==r&&n.push(r)})),n},t.prototype.Ci=function(t,e){var n=this;dp(0===this.Kc(e.batchId,"removed")),this.zo.shift();var r=this.Bc;return Qy.forEach(e.mutations,(function(i){var o=new Ym(i.key,e.batchId);return r=r.delete(o),n.Ti.Ni(t,i.key)})).next((function(){n.Bc=r}))},t.prototype.xi=function(t){},t.prototype.Fi=function(t,e){var n=new Ym(e,0),r=this.Bc.Re(n);return Qy.resolve(e.isEqual(r&&r.key))},t.prototype.$i=function(t){return this.zo.length,Qy.resolve()},t.prototype.Kc=function(t,e){return this.Uc(t)},t.prototype.Uc=function(t){return 0===this.zo.length?0:t-this.zo[0].batchId},t.prototype.qc=function(t){var e=this.Uc(t);return e<0||e>=this.zo.length?null:this.zo[e]},t}(),$m=function(){function t(t,e){this.Ei=t,this.Wc=e,this.docs=new qv(Vp.H),this.size=0}return t.prototype.ai=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.Wc(e);return this.docs=this.docs.zt(r,{hi:e,size:s,readTime:n}),this.size+=s-o,this.Ei.qs(t,r.path.X())},t.prototype.li=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype._i=function(t,e){var n=this.docs.get(e);return Qy.resolve(n?n.hi:null)},t.prototype.getEntries=function(t,e){var n=this,r=Kv();return e.forEach((function(t){var e=n.docs.get(t);r=r.zt(t,e?e.hi:null)})),Qy.resolve(r)},t.prototype.Kr=function(t,e,n){for(var r=Xv(),i=new Vp(e.path.child("")),o=this.docs.ee(i);o.ce();){var s=o.oe(),a=s.key,u=s.value,c=u.hi,h=u.readTime;if(!e.path.nt(a.path))break;h._(n)<=0||c instanceof yd&&Zd(e,c)&&(r=r.zt(c.key,c))}return Qy.resolve(r)},t.prototype.jc=function(t,e){return Qy.forEach(this.docs,(function(t){return e(t)}))},t.prototype.Nr=function(t){return new Jm(this)},t.prototype.Or=function(t){return Qy.resolve(this.size)},t}(),Jm=function(t){function e(e){var n=this;return(n=t.call(this)||this).jr=e,n}return ii(e,t),e.prototype.wi=function(t){var e=this,n=[];return this.ri.forEach((function(r,i){i&&i.hi?n.push(e.jr.ai(t,i.hi,e.ci(r))):e.jr.li(r)})),Qy.Mn(n)},e.prototype.fi=function(t,e){return this.jr._i(t,e)},e.prototype.di=function(t,e){return this.jr.getEntries(t,e)},e}(tm),Zm=function(){function t(t){this.persistence=t,this.Gc=new Zg((function(t){return wd(t)}),Ed),this.lastRemoteSnapshotVersion=Rp.min(),this.highestTargetId=0,this.zc=0,this.Hc=new Km,this.targetCount=0,this.Jc=um.Mi()}return t.prototype.In=function(t,e){return this.Gc.forEach((function(t,n){return e(n)})),Qy.resolve()},t.prototype.Qi=function(t){return Qy.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Ki=function(t){return Qy.resolve(this.zc)},t.prototype.Bi=function(t){return this.highestTargetId=this.Jc.next(),Qy.resolve(this.highestTargetId)},t.prototype.Wi=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.zc&&(this.zc=e),Qy.resolve()},t.prototype.Gi=function(t){this.Gc.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Jc=new um(e),this.highestTargetId=e),t.sequenceNumber>this.zc&&(this.zc=t.sequenceNumber)},t.prototype.ji=function(t,e){return this.Gi(e),this.targetCount+=1,Qy.resolve()},t.prototype.Hi=function(t,e){return this.Gi(e),Qy.resolve()},t.prototype.Ji=function(t,e){return this.Gc.delete(e.target),this.Hc.Fc(e.targetId),this.targetCount-=1,Qy.resolve()},t.prototype.Xi=function(t,e,n){var r=this,i=0,o=[];return this.Gc.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.Gc.delete(s),o.push(r.Yi(t,a.targetId)),i++)})),Qy.Mn(o).next((function(){return i}))},t.prototype.Zi=function(t){return Qy.resolve(this.targetCount)},t.prototype.tr=function(t,e){var n=this.Gc.get(e)||null;return Qy.resolve(n)},t.prototype.er=function(t,e,n){return this.Hc.xc(e,n),Qy.resolve()},t.prototype.sr=function(t,e,n){this.Hc.$c(e,n);var r=this.persistence.Ti,i=[];return r&&e.forEach((function(e){i.push(r.Ni(t,e))})),Qy.Mn(i)},t.prototype.Yi=function(t,e){return this.Hc.Fc(e),Qy.resolve()},t.prototype.rr=function(t,e){var n=this.Hc.kc(e);return Qy.resolve(n)},t.prototype.Fi=function(t,e){return Qy.resolve(this.Hc.Fi(e))},t}(),t_=function(){function t(t,e){var n,r=this;this.Yc={},this.so=new Op(0),this.io=!1,this.io=!0,this.Ti=t(this),this._o=new Zm(this),this.Ei=new zg,this.fo=(n=this.Ei,new $m(n,(function(t){return r.Ti.Xc(t)}))),this.Qt=new xg(e),this.wo=new Qm(this.Qt)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.ko=function(){return this.io=!1,Promise.resolve()},Object.defineProperty(t.prototype,"Er",{get:function(){return this.io},enumerable:!1,configurable:!0}),t.prototype.Po=function(){},t.prototype.yo=function(){},t.prototype.Ko=function(){return this.Ei},t.prototype.Qo=function(t){var e=this.Yc[t.A()];return e||(e=new Xm(this.Ei,this.Ti),this.Yc[t.A()]=e),e},t.prototype.Sr=function(){return this._o},t.prototype.$r=function(){return this.fo},t.prototype.Wo=function(){return this.wo},t.prototype.runTransaction=function(t,e,n){var r=this;cp("MemoryPersistence","Starting transaction:",t);var i=new e_(this.so.next());return this.Ti.Zc(),n(i).next((function(t){return r.Ti.ta(i).next((function(){return t}))})).On().then((function(t){return i.Vs(),t}))},t.prototype.ea=function(t,e){return Qy.Ln(Object.values(this.Yc).map((function(n){return function(){return n.Fi(t,e)}})))},t}(),e_=function(t){function e(e){var n=this;return(n=t.call(this)||this).bs=e,n}return ii(e,t),e}(sg),n_=function(){function t(t){this.persistence=t,this.na=new Km,this.sa=null}return t.ia=function(e){return new t(e)},Object.defineProperty(t.prototype,"ra",{get:function(){if(this.sa)return this.sa;throw pp()},enumerable:!1,configurable:!0}),t.prototype.nr=function(t,e,n){return this.na.nr(n,e),this.ra.delete(n.toString()),Qy.resolve()},t.prototype.ir=function(t,e,n){return this.na.ir(n,e),this.ra.add(n.toString()),Qy.resolve()},t.prototype.Ni=function(t,e){return this.ra.add(e.toString()),Qy.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.na.Fc(e.targetId).forEach((function(t){return n.ra.add(t.toString())}));var r=this.persistence.Sr();return r.rr(t,e.targetId).next((function(t){t.forEach((function(t){return n.ra.add(t.toString())}))})).next((function(){return r.Ji(t,e)}))},t.prototype.Zc=function(){this.sa=new Set},t.prototype.ta=function(t){var e=this,n=this.persistence.$r().Nr();return Qy.forEach(this.ra,(function(r){var i=Vp._t(r);return e.oa(t,i).next((function(t){t||n.li(i)}))})).next((function(){return e.sa=null,n.apply(t)}))},t.prototype.Fr=function(t,e){var n=this;return this.oa(t,e).next((function(t){t?n.ra.delete(e.toString()):n.ra.add(e.toString())}))},t.prototype.Xc=function(t){return 0},t.prototype.oa=function(t,e){var n=this;return Qy.Ln([function(){return Qy.resolve(n.na.Fi(e))},function(){return n.persistence.Sr().Fi(t,e)},function(){return n.persistence.ea(t,e)}])},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r_(t,e){return"firestore_clients_"+t+"_"+e}function i_(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.m()&&(r+="_"+e.uid),r}function o_(t,e){return"firestore_targets_"+t+"_"+e}var s_=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.ca=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Ip(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(hp("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.aa=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),a_=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.ca=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Ip(i.error.code,i.error.message)),o?new t(e,i.state,r):(hp("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.aa=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),u_=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.ca=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=ey(),s=0;i&&s<r.activeTargetIds.length;++s)i=Jp(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(hp("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),c_=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.ca=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(hp("SharedClientState","Failed to parse online state: "+e),null)},t}(),h_=function(){function t(){this.activeTargetIds=ey()}return t.prototype.ua=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.ha=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.aa=function(){var t={activeTargetIds:this.activeTargetIds.it(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),l_=function(){function t(t,e,n,r,i){this.window=t,this.Zr=e,this.persistenceKey=n,this.la=r,this._a=null,this.fa=null,this.k=null,this.da=this.wa.bind(this),this.Ea=new qv(mp),this.Er=!1,this.Ta=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ia=r_(this.persistenceKey,this.la),this.ma="firestore_sequence_number_"+this.persistenceKey,this.Ea=this.Ea.zt(this.la,new h_),this.Aa=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Ra=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Pa=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.ya=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.ga=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.da)}return t.Kn=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return si(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,a,u,c,h,l=this;return ai(this,(function(f){switch(f.label){case 0:return[4,this._a.Uo()];case 1:for(t=f.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.la&&(i=this.getItem(r_(this.persistenceKey,r)))&&(o=u_.ca(r,i))&&(this.Ea=this.Ea.zt(o.clientId,o));for(this.Va(),(s=this.storage.getItem(this.ya))&&(a=this.pa(s))&&this.ba(a),u=0,c=this.Ta;u<c.length;u++)h=c[u],this.wa(h);return this.Ta=[],this.window.addEventListener("unload",(function(){return l.ko()})),this.Er=!0,[2]}}))}))},t.prototype.B=function(t){this.setItem(this.ma,JSON.stringify(t))},t.prototype.va=function(){return this.Sa(this.Ea)},t.prototype.Da=function(t){var e=!1;return this.Ea.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.Ca=function(t){this.xa(t,"pending")},t.prototype.Na=function(t,e,n){this.xa(t,e,n),this.$a(t)},t.prototype.Fa=function(t){var e="not-current";if(this.Da(t)){var n=this.storage.getItem(o_(this.persistenceKey,t));if(n){var r=a_.ca(t,n);r&&(e=r.state)}}return this.Oa.ua(t),this.Va(),e},t.prototype.ka=function(t){this.Oa.ha(t),this.Va()},t.prototype.Ma=function(t){return this.Oa.activeTargetIds.has(t)},t.prototype.La=function(t){this.removeItem(o_(this.persistenceKey,t))},t.prototype.Ba=function(t,e,n){this.qa(t,e,n)},t.prototype.Ua=function(t,e,n){var r=this;e.forEach((function(t){r.$a(t)})),this.currentUser=t,n.forEach((function(t){r.Ca(t)}))},t.prototype.Qa=function(t){this.Ka(t)},t.prototype.Wa=function(){this.ja()},t.prototype.ko=function(){this.Er&&(this.window.removeEventListener("storage",this.da),this.removeItem(this.Ia),this.Er=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return cp("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){cp("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){cp("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.wa=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(cp("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ia)return void hp("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Zr.po((function(){return si(e,void 0,void 0,(function(){var t,e,r,i,o,s;return ai(this,(function(a){if(this.Er){if(null!==n.key)if(this.Aa.test(n.key)){if(null==n.newValue)return t=this.Ga(n.key),[2,this.za(t,null)];if(e=this.Ha(n.key,n.newValue))return[2,this.za(e.clientId,e)]}else if(this.Ra.test(n.key)){if(null!==n.newValue&&(r=this.Ja(n.key,n.newValue)))return[2,this.Ya(r)]}else if(this.Pa.test(n.key)){if(null!==n.newValue&&(i=this.Xa(n.key,n.newValue)))return[2,this.Za(i)]}else if(n.key===this.ya){if(null!==n.newValue&&(o=this.pa(n.newValue)))return[2,this.ba(o)]}else if(n.key===this.ma)(s=function(t){var e=Op.q;if(null!=t)try{var n=JSON.parse(t);dp("number"==typeof n),e=n}catch(r){hp("SharedClientState","Failed to read sequence number from WebStorage",r)}return e}(n.newValue))!==Op.q&&this.k(s);else if(n.key===this.ga)return[2,this._a.tu()]}else this.Ta.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Oa",{get:function(){return this.Ea.get(this.la)},enumerable:!1,configurable:!0}),t.prototype.Va=function(){this.setItem(this.Ia,this.Oa.aa())},t.prototype.xa=function(t,e,n){var r=new s_(this.currentUser,t,e,n),i=i_(this.persistenceKey,this.currentUser,t);this.setItem(i,r.aa())},t.prototype.$a=function(t){var e=i_(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Ka=function(t){var e={clientId:this.la,onlineState:t};this.storage.setItem(this.ya,JSON.stringify(e))},t.prototype.qa=function(t,e,n){var r=o_(this.persistenceKey,t),i=new a_(t,e,n);this.setItem(r,i.aa())},t.prototype.ja=function(){this.setItem(this.ga,"value-not-used")},t.prototype.Ga=function(t){var e=this.Aa.exec(t);return e?e[1]:null},t.prototype.Ha=function(t,e){var n=this.Ga(t);return u_.ca(n,e)},t.prototype.Ja=function(t,e){var n=this.Ra.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return s_.ca(new Sp(i),r,e)},t.prototype.Xa=function(t,e){var n=this.Pa.exec(t),r=Number(n[1]);return a_.ca(r,e)},t.prototype.pa=function(t){return c_.ca(t)},t.prototype.Ya=function(t){return si(this,void 0,void 0,(function(){return ai(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this._a.eu(t.batchId,t.state,t.error)]:(cp("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.Za=function(t){return this._a.nu(t.targetId,t.state,t.error)},t.prototype.za=function(t,e){var n=this,r=e?this.Ea.zt(t,e):this.Ea.remove(t),i=this.Sa(this.Ea),o=this.Sa(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this._a.su(s,a).then((function(){n.Ea=r}))},t.prototype.ba=function(t){this.Ea.get(t.clientId)&&this.fa(t.onlineState)},t.prototype.Sa=function(t){var e=ey();return t.forEach((function(t,n){e=e.Pe(n.activeTargetIds)})),e},t}(),f_=function(){function t(){this.iu=new h_,this.ru={},this.fa=null,this.k=null}return t.prototype.Ca=function(t){},t.prototype.Na=function(t,e,n){},t.prototype.Fa=function(t){return this.iu.ua(t),this.ru[t]||"not-current"},t.prototype.Ba=function(t,e,n){this.ru[t]=e},t.prototype.ka=function(t){this.iu.ha(t)},t.prototype.Ma=function(t){return this.iu.activeTargetIds.has(t)},t.prototype.La=function(t){delete this.ru[t]},t.prototype.va=function(){return this.iu.activeTargetIds},t.prototype.Da=function(t){return this.iu.activeTargetIds.has(t)},t.prototype.start=function(){return this.iu=new h_,Promise.resolve()},t.prototype.Ua=function(t,e,n){},t.prototype.Qa=function(t){},t.prototype.ko=function(){},t.prototype.B=function(t){},t.prototype.Wa=function(){},t}(),p_=function(){function t(){}return t.prototype.ou=function(t){},t.prototype.ko=function(){},t}(),d_=function(){function t(){var t=this;this.cu=function(){return t.au()},this.uu=function(){return t.hu()},this.lu=[],this._u()}return t.prototype.ou=function(t){this.lu.push(t)},t.prototype.ko=function(){window.removeEventListener("online",this.cu),window.removeEventListener("offline",this.uu)},t.prototype._u=function(){window.addEventListener("online",this.cu),window.addEventListener("offline",this.uu)},t.prototype.au=function(){cp("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.lu;t<e.length;t++)(0,e[t])(0)},t.prototype.hu=function(){cp("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.lu;t<e.length;t++)(0,e[t])(1)},t.Kn=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),v_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},y_=function(){function t(t){this.fu=t.fu,this.du=t.du}return t.prototype.wu=function(t){this.Eu=t},t.prototype.Tu=function(t){this.Iu=t},t.prototype.onMessage=function(t){this.mu=t},t.prototype.close=function(){this.du()},t.prototype.send=function(t){this.fu(t)},t.prototype.Au=function(){this.Eu()},t.prototype.Ru=function(t){this.Iu(t)},t.prototype.Pu=function(t){this.mu(t)},t}(),g_=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.i=e.i,n}return ii(e,t),e.prototype.Su=function(t,e,n,r){return new Promise((function(i,o){var s=new ip;s.listenOnce(Zf.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case Jf.NO_ERROR:var e=s.getResponseJson();cp("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Jf.TIMEOUT:cp("Connection",'RPC "'+t+'" timed out'),o(new Ip(Ep.DEADLINE_EXCEEDED,"Request time out"));break;case Jf.HTTP_ERROR:var n=s.getStatus();if(cp("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=(u=r.status,c=u.toLowerCase().replace(/_/g,"-"),Object.values(Ep).indexOf(c)>=0?c:Ep.UNKNOWN);o(new Ip(a,r.message))}else o(new Ip(Ep.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Ip(Ep.UNAVAILABLE,"Connection failed."));break;default:pp()}}finally{cp("Connection",'RPC "'+t+'" completed.')}var u,c}));var a=JSON.stringify(r);s.send(e,"POST",a,n,15)}))},e.prototype.Cu=function(t,e){var n,r,i=[this.gu,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=new Qf,s=Kh(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.t.projectId+"/databases/"+this.t.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.i};this.vu(a.initMessageHeaders,e),Ii()||Si()||Ei().indexOf("Electron/")>=0||((r=Ei()).indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0)||Ei().indexOf("MSAppHost/")>=0||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(a.httpHeadersOverwriteParam="$httpHeaders");var u=i.join("");cp("Connection","Creating WebChannel: "+u,a);var c=o.createWebChannel(u,a),h=!1,l=!1,f=new y_({fu:function(t){l?cp("Connection","Not sending because WebChannel is closed:",t):(h||(cp("Connection","Opening WebChannel transport."),c.open(),h=!0),cp("Connection","WebChannel sending:",t),c.send(t))},du:function(){return c.close()}}),p=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(e){setTimeout((function(){throw e}),0)}}))};return p(c,rp.EventType.OPEN,(function(){l||cp("Connection","WebChannel transport opened.")})),p(c,rp.EventType.CLOSE,(function(){l||(l=!0,cp("Connection","WebChannel transport closed"),f.Ru())})),p(c,rp.EventType.ERROR,(function(t){l||(l=!0,lp("Connection","WebChannel transport errored:",t),f.Ru(new Ip(Ep.UNAVAILABLE,"The operation could not be completed")))})),p(c,rp.EventType.MESSAGE,(function(t){var e;if(!l){var n=t.data[0];dp(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){cp("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=Dv[t];if(void 0!==e)return jv(e)}(o),a=i.message;void 0===s&&(s=Ep.INTERNAL,a="Unknown error status: "+o+" with message "+i.message),l=!0,f.Ru(new Ip(s,a)),c.close()}else cp("Connection","WebChannel received:",n),f.Pu(n)}})),p(s,tp.STAT_EVENT,(function(t){t.stat===ep?cp("Connection","Detected buffering proxy"):t.stat===np&&cp("Connection","Detected no buffering proxy")})),setTimeout((function(){f.Au()}),0),f},e}(function(){function t(t){this.yu=t,this.t=t.t;var e=t.ssl?"https":"http";this.gu=e+"://"+t.host,this.Vu="projects/"+this.t.projectId+"/databases/"+this.t.database+"/documents"}return t.prototype.pu=function(t,e,n,r){var i=this.bu(t,e);cp("RestConnection","Sending: ",i,n);var o={};return this.vu(o,r),this.Su(t,i,o,n).then((function(t){return cp("RestConnection","Received: ",t),t}),(function(e){throw lp("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.Du=function(t,e,n,r){return this.pu(t,e,n,r)},t.prototype.vu=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.2.7",t["Content-Type"]="text/plain",e)for(var n in e.g)e.g.hasOwnProperty(n)&&(t[n]=e.g[n])},t.prototype.bu=function(t,e){var n=v_[t];return this.gu+"/v1/"+e+":"+n},t}());
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m_(){return"undefined"!=typeof window?window:null}function __(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b_(t){return new yy(t,!0)}var w_=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Zr=t,this.fs=e,this.xu=n,this.Nu=r,this.$u=i,this.Fu=0,this.Ou=null,this.ku=Date.now(),this.reset()}return t.prototype.reset=function(){this.Fu=0},t.prototype.Mu=function(){this.Fu=this.$u},t.prototype.Lu=function(t){var e=this;this.cancel();var n=Math.floor(this.Fu+this.Bu()),r=Math.max(0,Date.now()-this.ku),i=Math.max(0,n-r);i>0&&cp("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Fu+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ou=this.Zr.Tr(this.fs,i,(function(){return e.ku=Date.now(),t()})),this.Fu*=this.Nu,this.Fu<this.xu&&(this.Fu=this.xu),this.Fu>this.$u&&(this.Fu=this.$u)},t.prototype.qu=function(){null!==this.Ou&&(this.Ou.Rs(),this.Ou=null)},t.prototype.cancel=function(){null!==this.Ou&&(this.Ou.cancel(),this.Ou=null)},t.prototype.Bu=function(){return(Math.random()-.5)*this.Fu},t}(),E_=function(){function t(t,e,n,r,i,o){this.Zr=t,this.Uu=n,this.Qu=r,this.Ku=i,this.listener=o,this.state=0,this.Wu=0,this.ju=null,this.stream=null,this.Gu=new w_(t,e)}return t.prototype.zu=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.Hu=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.Ju()},t.prototype.stop=function(){return si(this,void 0,void 0,(function(){return ai(this,(function(t){switch(t.label){case 0:return this.zu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.Yu=function(){this.state=0,this.Gu.reset()},t.prototype.Xu=function(){var t=this;this.Hu()&&null===this.ju&&(this.ju=this.Zr.Tr(this.Uu,6e4,(function(){return t.Zu()})))},t.prototype.th=function(t){this.eh(),this.stream.send(t)},t.prototype.Zu=function(){return si(this,void 0,void 0,(function(){return ai(this,(function(t){return this.Hu()?[2,this.close(0)]:[2]}))}))},t.prototype.eh=function(){this.ju&&(this.ju.cancel(),this.ju=null)},t.prototype.close=function(t,e){return si(this,void 0,void 0,(function(){return ai(this,(function(n){switch(n.label){case 0:return this.eh(),this.Gu.cancel(),this.Wu++,3!==t?this.Gu.reset():e&&e.code===Ep.RESOURCE_EXHAUSTED?(hp(e.toString()),hp("Using maximum backoff delay to prevent overloading the backend."),this.Gu.Mu()):e&&e.code===Ep.UNAUTHENTICATED&&this.Ku.p(),null!==this.stream&&(this.nh(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Tu(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.nh=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.sh(this.Wu),n=this.Wu;this.Ku.getToken().then((function(e){t.Wu===n&&t.ih(e)}),(function(n){e((function(){var e=new Ip(Ep.UNKNOWN,"Fetching auth token failed: "+n.message);return t.rh(e)}))}))},t.prototype.ih=function(t){var e=this,n=this.sh(this.Wu);this.stream=this.oh(t),this.stream.wu((function(){n((function(){return e.state=2,e.listener.wu()}))})),this.stream.Tu((function(t){n((function(){return e.rh(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.Ju=function(){var t=this;this.state=4,this.Gu.Lu((function(){return si(t,void 0,void 0,(function(){return ai(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.rh=function(t){return cp("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.sh=function(t){var e=this;return function(n){e.Zr.Ps((function(){return e.Wu===t?n():(cp("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),I_=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).Qt=i,s}return ii(e,t),e.prototype.oh=function(t){return this.Qu.Cu("Listen",t)},e.prototype.onMessage=function(t){this.Gu.reset();var e=function(t,e){var n,r;if("targetChange"in e){e.targetChange;var i="NO_CHANGE"===(r=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===r?1:"REMOVE"===r?2:"CURRENT"===r?3:"RESET"===r?4:pp(),o=e.targetChange.targetIds||[],s=function(t,e){return t.Bt?(dp(void 0===e||"string"==typeof e),wp.fromBase64String(e||"")):(dp(void 0===e||e instanceof Uint8Array),wp.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=(u=e.targetChange.cause)&&function(t){var e=void 0===t.code?Ep.UNKNOWN:jv(t.code);return new Ip(e,t.message||"")}(u);n=new cy(i,o,s,a||null)}else if("documentChange"in e){e.documentChange,(i=e.documentChange).document,i.document.name,i.document.updateTime,o=Ty(t,i.document.name),s=by(i.document.updateTime);var u=new fd({mapValue:{fields:i.document.fields}}),c=(a=new yd(o,s,u,{}),i.targetIds||[]),h=i.removedTargetIds||[];n=new ay(c,h,a.key,a)}else if("documentDelete"in e)e.documentDelete,(i=e.documentDelete).document,o=Ty(t,i.document),s=i.readTime?by(i.readTime):Rp.min(),u=new gd(o,s),a=i.removedTargetIds||[],n=new ay([],a,u.key,u);else if("documentRemove"in e)e.documentRemove,(i=e.documentRemove).document,o=Ty(t,i.document),s=i.removedTargetIds||[],n=new ay([],s,o,null);else{if(!("filter"in e))return pp();e.filter;var l=e.filter;l.targetId,i=l.count||0,o=new Vv(i),s=l.targetId,n=new uy(s,o)}return n}(this.Qt,t),n=function(t){if(!("targetChange"in t))return Rp.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Rp.min():e.readTime?by(e.readTime):Rp.min()}(t);return this.listener.ah(e,n)},e.prototype.uh=function(t){var e,n,r,i,o={};o.database=Ny(this.Qt),o.addTarget=(e=this.Qt,i=(n=t).target,(r=Id(i)?{documents:xy(e,i)}:{query:Ry(e,i)}).targetId=n.targetId,n.resumeToken.l()>0?r.resumeToken=my(e,n.resumeToken):n.Ot._(Rp.min())>0&&(r.readTime=gy(e,n.Ot.j())),r);var s=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return pp()}}(0,e.Ft);return null==n?null:{"goog-listen-tags":n}}(this.Qt,t);s&&(o.labels=s),this.th(o)},e.prototype.hh=function(t){var e={};e.database=Ny(this.Qt),e.removeTarget=t,this.th(e)},e}(E_),T_=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).Qt=i,s.lh=!1,s}return ii(e,t),Object.defineProperty(e.prototype,"_h",{get:function(){return this.lh},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.lh=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.nh=function(){this.lh&&this.fh([])},e.prototype.oh=function(t){return this.Qu.Cu("Write",t)},e.prototype.onMessage=function(t){if(dp(!!t.streamToken),this.lastStreamToken=t.streamToken,this.lh){this.Gu.reset();var e=(r=t.writeResults,i=t.commitTime,r&&r.length>0?(dp(void 0!==i),r.map((function(t){return function(t,e){var n=t.updateTime?by(t.updateTime):by(e);n.isEqual(Rp.min())&&(n=by(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new _v(n,r)}(t,i)}))):[]),n=by(t.commitTime);return this.listener.dh(n,e)}var r,i;return dp(!t.writeResults||0===t.writeResults.length),this.lh=!0,this.listener.wh()},e.prototype.Eh=function(){var t={};t.database=Ny(this.Qt),this.th(t)},e.prototype.fh=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Py(e.Qt,t)}))};this.th(n)},e}(E_),S_=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Qu=n,i.Qt=r,i.Th=!1,i}return ii(e,t),e.prototype.Ih=function(){if(this.Th)throw new Ip(Ep.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.pu=function(t,e,n){var r=this;return this.Ih(),this.credentials.getToken().then((function(i){return r.Qu.pu(t,e,n,i)})).catch((function(t){throw t.code===Ep.UNAUTHENTICATED&&r.credentials.p(),t}))},e.prototype.Du=function(t,e,n){var r=this;return this.Ih(),this.credentials.getToken().then((function(i){return r.Qu.Du(t,e,n,i)})).catch((function(t){throw t.code===Ep.UNAUTHENTICATED&&r.credentials.p(),t}))},e.prototype.terminate=function(){this.Th=!1},e}((function(){})),C_=function(){function t(t,e){this._s=t,this.fa=e,this.state="Unknown",this.mh=0,this.Ah=null,this.Rh=!0}return t.prototype.Ph=function(){var t=this;0===this.mh&&(this.yh("Unknown"),this.Ah=this._s.Tr("online_state_timeout",1e4,(function(){return t.Ah=null,t.gh("Backend didn't respond within 10 seconds."),t.yh("Offline"),Promise.resolve()})))},t.prototype.Vh=function(t){"Online"===this.state?this.yh("Unknown"):(this.mh++,this.mh>=1&&(this.ph(),this.gh("Connection failed 1 times. Most recent error: "+t.toString()),this.yh("Offline")))},t.prototype.set=function(t){this.ph(),this.mh=0,"Online"===t&&(this.Rh=!1),this.yh(t)},t.prototype.yh=function(t){t!==this.state&&(this.state=t,this.fa(t))},t.prototype.gh=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Rh?(hp(e),this.Rh=!1):cp("OnlineStateTracker",e)},t.prototype.ph=function(){null!==this.Ah&&(this.Ah.cancel(),this.Ah=null)},t}(),N_=function(t,e,n,r,i){var o=this;this.bh=t,this.Sh=e,this._s=n,this.Dh={},this.Ch=[],this.xh=new Map,this.Nh=new Set,this.$h=[],this.Fh=i,this.Fh.ou((function(t){n.Ps((function(){return si(o,void 0,void 0,(function(){return ai(this,(function(t){switch(t.label){case 0:return M_(this)?(cp("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return si(this,void 0,void 0,(function(){var e;return ai(this,(function(n){switch(n.label){case 0:return(e=vp(t)).Nh.add(4),[4,k_(e)];case 1:return n.sent(),e.Oh.set("Unknown"),e.Nh.delete(4),[4,A_(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Oh=new C_(n,r)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A_(t){return si(this,void 0,void 0,(function(){var e,n;return ai(this,(function(r){switch(r.label){case 0:if(!M_(t))return[3,4];e=0,n=t.$h,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function k_(t){return si(this,void 0,void 0,(function(){var e,n;return ai(this,(function(r){switch(r.label){case 0:e=0,n=t.$h,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function P_(t,e){var n=vp(t);n.xh.has(e.targetId)||(n.xh.set(e.targetId,e),L_(n)?D_(n):$_(n).Hu()&&x_(n,e))}function O_(t,e){var n=vp(t),r=$_(n);n.xh.delete(e),r.Hu()&&R_(n,e),0===n.xh.size&&(r.Hu()?r.Xu():M_(n)&&n.Oh.set("Unknown"))}function x_(t,e){t.kh.on(e.targetId),$_(t).uh(e)}function R_(t,e){t.kh.on(e),$_(t).hh(e)}function D_(t){t.kh=new ly({vn:function(e){return t.Dh.vn(e)},Sn:function(e){return t.xh.get(e)||null}}),$_(t).start(),t.Oh.Ph()}function L_(t){return M_(t)&&!$_(t).zu()&&t.xh.size>0}function M_(t){return 0===vp(t).Nh.size}function F_(t){t.kh=void 0}function V_(t){return si(this,void 0,void 0,(function(){return ai(this,(function(e){return t.xh.forEach((function(e,n){x_(t,e)})),[2]}))}))}function U_(t,e){return si(this,void 0,void 0,(function(){return ai(this,(function(n){return F_(t),L_(t)?(t.Oh.Vh(e),D_(t)):t.Oh.set("Unknown"),[2]}))}))}function j_(t,e,n){return si(this,void 0,void 0,(function(){var r,i,o;return ai(this,(function(s){switch(s.label){case 0:if(t.Oh.set("Online"),!(e instanceof cy&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return si(this,void 0,void 0,(function(){var n,r,i,o;return ai(this,(function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?(o=i[r],t.xh.has(o)?[4,t.Dh.Mh(o,n)]:[3,3]):[3,5];case 2:s.sent(),t.xh.delete(o),t.kh.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),cp("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,q_(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof ay?t.kh.dn(e):e instanceof uy?t.kh.Pn(e):t.kh.Tn(e),n.isEqual(Rp.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Vm(t.bh)];case 8:return i=s.sent(),n._(i)>=0?[4,(a=t,u=n,c=a.kh.Vn(u),c.$e.forEach((function(t,e){if(t.resumeToken.l()>0){var n=a.xh.get(e);n&&a.xh.set(e,n.Mt(t.resumeToken,u))}})),c.Fe.forEach((function(t){var e=a.xh.get(t);if(e){a.xh.set(t,e.Mt(wp.T,e.Ot)),R_(a,t);var n=new nv(e.target,t,1,e.sequenceNumber);x_(a,n)}})),a.Dh.Lh(c))]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return cp("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,q_(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}var a,u,c}))}))}function q_(t,e,n){return si(this,void 0,void 0,(function(){var r=this;return ai(this,(function(i){switch(i.label){case 0:if(!Jy(e))throw e;return t.Nh.add(1),[4,k_(t)];case 1:return i.sent(),t.Oh.set("Offline"),n||(n=function(){return Vm(t.bh)}),t._s.po((function(){return si(r,void 0,void 0,(function(){return ai(this,(function(e){switch(e.label){case 0:return cp("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Nh.delete(1),[4,A_(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function B_(t,e){return e().catch((function(n){return q_(t,n,e)}))}function W_(t){return si(this,void 0,void 0,(function(){var e,n,r,i,o;return ai(this,(function(s){switch(s.label){case 0:e=vp(t),n=J_(e),r=e.Ch.length>0?e.Ch[e.Ch.length-1].batchId:-1,s.label=1;case 1:if(!(M_(a=e)&&a.Ch.length<10))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,jm(e.bh,r)];case 3:return null===(i=s.sent())?(0===e.Ch.length&&n.Xu(),[3,7]):(r=i.batchId,function(t,e){t.Ch.push(e);var n=J_(t);n.Hu()&&n._h&&n.fh(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,q_(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return H_(e)&&G_(e),[2]}var a}))}))}function H_(t){return M_(t)&&!J_(t).zu()&&t.Ch.length>0}function G_(t){J_(t).start()}function z_(t){return si(this,void 0,void 0,(function(){return ai(this,(function(e){return J_(t).Eh(),[2]}))}))}function Q_(t){return si(this,void 0,void 0,(function(){var e,n,r,i;return ai(this,(function(o){for(e=J_(t),n=0,r=t.Ch;n<r.length;n++)i=r[n],e.fh(i.mutations);return[2]}))}))}function K_(t,e,n){return si(this,void 0,void 0,(function(){var r,i;return ai(this,(function(o){switch(o.label){case 0:return r=t.Ch.shift(),i=Og.from(r,e,n),[4,B_(t,(function(){return t.Dh.Bh(i)}))];case 1:return o.sent(),[4,W_(t)];case 2:return o.sent(),[2]}}))}))}function Y_(t,e){return si(this,void 0,void 0,(function(){return ai(this,(function(n){switch(n.label){case 0:return e&&J_(t)._h?[4,function(t,e){return si(this,void 0,void 0,(function(){var n,r;return ai(this,(function(i){switch(i.label){case 0:return Uv(r=e.code)&&r!==Ep.ABORTED?(n=t.Ch.shift(),J_(t).Yu(),[4,B_(t,(function(){return t.Dh.qh(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,W_(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return H_(t)&&G_(t),[2]}}))}))}function X_(t,e){return si(this,void 0,void 0,(function(){var n;return ai(this,(function(r){switch(r.label){case 0:return n=vp(t),e?(n.Nh.delete(2),[4,A_(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Nh.add(2),[4,k_(n)]);case 3:r.sent(),n.Oh.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function $_(t){var e,n,r,i,o=this;return t.Uh||(t.Uh=(e=t.Sh,n=t._s,r={wu:V_.bind(null,t),Tu:U_.bind(null,t),ah:j_.bind(null,t)},(i=vp(e)).Ih(),new I_(n,i.Qu,i.credentials,i.Qt,r)),t.$h.push((function(e){return si(o,void 0,void 0,(function(){return ai(this,(function(n){switch(n.label){case 0:return e?(t.Uh.Yu(),L_(t)?D_(t):t.Oh.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Uh.stop()];case 2:n.sent(),F_(t),n.label=3;case 3:return[2]}}))}))}))),t.Uh}function J_(t){var e,n,r,i,o=this;return t.Qh||(t.Qh=(e=t.Sh,n=t._s,r={wu:z_.bind(null,t),Tu:Y_.bind(null,t),wh:Q_.bind(null,t),dh:K_.bind(null,t)},(i=vp(e)).Ih(),new T_(n,i.Qu,i.credentials,i.Qt,r)),t.$h.push((function(e){return si(o,void 0,void 0,(function(){return ai(this,(function(n){switch(n.label){case 0:return e?(t.Qh.Yu(),[4,W_(t)]):[3,2];case 1:return n.sent(),[3,4];case 2:return[4,t.Qh.stop()];case 3:n.sent(),t.Ch.length>0&&(cp("RemoteStore","Stopping write stream with "+t.Ch.length+" pending writes"),t.Ch=[]),n.label=4;case 4:return[2]}}))}))}))),t.Qh}var Z_=function(){this.Kh=void 0,this.listeners=[]},tb=function(){this.queries=new Zg((function(t){return $d(t)}),Xd),this.onlineState="Unknown",this.Wh=new Set};function eb(t,e){return si(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return ai(this,(function(c){switch(c.label){case 0:if(n=vp(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new Z_),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.jh(r)];case 2:return s.Kh=c.sent(),[3,4];case 3:return a=c.sent(),u=ig(a,"Initialization of query '"+Jd(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.Gh(n.onlineState),o.Kh&&e.zh(o.Kh)&&ob(n),[2]}}))}))}function nb(t,e){return si(this,void 0,void 0,(function(){var n,r,i,o,s;return ai(this,(function(a){return n=vp(t),r=e.query,i=!1,(o=n.queries.get(r))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.Hh(r))]:[2]}))}))}function rb(t,e){for(var n=vp(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=s.query,u=n.queries.get(a);if(u){for(var c=0,h=u.listeners;c<h.length;c++)h[c].zh(s)&&(r=!0);u.Kh=s}}r&&ob(n)}function ib(t,e,n){var r=vp(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function ob(t){t.Wh.forEach((function(t){t.next()}))}var sb=function(){function t(t,e,n){this.query=t,this.Jh=e,this.Yh=!1,this.Xh=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.zh=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new iy(t.query,t.docs,t.Se,e,t.De,t.fromCache,t.Ce,!0)}var o=!1;return this.Yh?this.Zh(t)&&(this.Jh.next(t),o=!0):this.tl(t,this.onlineState)&&(this.el(t),o=!0),this.Xh=t,o},t.prototype.onError=function(t){this.Jh.error(t)},t.prototype.Gh=function(t){this.onlineState=t;var e=!1;return this.Xh&&!this.Yh&&this.tl(this.Xh,t)&&(this.el(this.Xh),e=!0),e},t.prototype.tl=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.nl&&n||t.docs.et()&&"Offline"!==e)},t.prototype.Zh=function(t){if(t.docChanges.length>0)return!0;var e=this.Xh&&this.Xh.hasPendingWrites!==t.hasPendingWrites;return!(!t.Ce&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.el=function(t){t=iy.Ne(t.query,t.docs,t.De,t.fromCache),this.Yh=!0,this.Jh.next(t)},t}(),ab=function(t){this.key=t},ub=function(t){this.key=t},cb=function(){function t(t,e){this.query=t,this.cl=e,this.al=null,this.Be=!1,this.ul=Zv(),this.De=Zv(),this.hl=tv(t),this.ll=new ny(this.hl)}return Object.defineProperty(t.prototype,"_l",{get:function(){return this.cl},enumerable:!1,configurable:!0}),t.prototype.fl=function(t,e){var n=this,r=e?e.dl:new ry,i=e?e.ll:this.ll,o=e?e.De:this.De,s=i,a=!1,u=Bd(this.query)&&i.size===this.query.limit?i.last():null,c=Wd(this.query)&&i.size===this.query.limit?i.first():null;if(t.Xt((function(t,e){var h=i.get(t),l=e instanceof yd?e:null;l&&(l=Zd(n.query,l)?l:null);var f=!!h&&n.De.has(h.key),p=!!l&&(l.Vt||n.De.has(l.key)&&l.hasCommittedMutations),d=!1;h&&l?h.data().isEqual(l.data())?f!==p&&(r.track({type:3,doc:l}),d=!0):n.wl(h,l)||(r.track({type:2,doc:l}),d=!0,(u&&n.hl(l,u)>0||c&&n.hl(l,c)<0)&&(a=!0)):!h&&l?(r.track({type:0,doc:l}),d=!0):h&&!l&&(r.track({type:1,doc:h}),d=!0,(u||c)&&(a=!0)),d&&(l?(s=s.add(l),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),Bd(this.query)||Wd(this.query))for(;s.size>this.query.limit;){var h=Bd(this.query)?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{ll:s,dl:r,lc:a,De:o}},t.prototype.wl=function(t,e){return t.Vt&&e.hasCommittedMutations&&!e.Vt},t.prototype.wi=function(t,e,n){var r=this,i=this.ll;this.ll=t.ll,this.De=t.De;var o=t.dl.ve();o.sort((function(t,e){return n=t.type,i=e.type,(o=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pp()}})(n)-o(i)||r.hl(t.doc,e.doc);var n,i,o})),this.El(n);var s=e?this.Tl():[],a=0===this.ul.size&&this.Be?1:0,u=a!==this.al;return this.al=a,0!==o.length||u?{snapshot:new iy(this.query,t.ll,i,o,t.De,0===a,u,!1),Il:s}:{Il:s}},t.prototype.Gh=function(t){return this.Be&&"Offline"===t?(this.Be=!1,this.wi({ll:this.ll,dl:new ry,De:this.De,lc:!1},!1)):{Il:[]}},t.prototype.ml=function(t){return!this.cl.has(t)&&!!this.ll.has(t)&&!this.ll.get(t).Vt},t.prototype.El=function(t){var e=this;t&&(t.qe.forEach((function(t){return e.cl=e.cl.add(t)})),t.Ue.forEach((function(t){})),t.Qe.forEach((function(t){return e.cl=e.cl.delete(t)})),this.Be=t.Be)},t.prototype.Tl=function(){var t=this;if(!this.Be)return[];var e=this.ul;this.ul=Zv(),this.ll.forEach((function(e){t.ml(e.key)&&(t.ul=t.ul.add(e.key))}));var n=[];return e.forEach((function(e){t.ul.has(e)||n.push(new ub(e))})),this.ul.forEach((function(t){e.has(t)||n.push(new ab(t))})),n},t.prototype.Al=function(t){this.cl=t.Rc,this.ul=Zv();var e=this.fl(t.documents);return this.wi(e,!0)},t.prototype.Rl=function(){return iy.Ne(this.query,this.ll,this.De,0===this.al)},t}(),hb=function(t,e,n){this.query=t,this.targetId=e,this.view=n},lb=function(t){this.key=t,this.Pl=!1},fb=function(){function t(t,e,n,r,i,o){this.bh=t,this.yl=e,this.gl=n,this.Vl=r,this.currentUser=i,this.pl=o,this.bl={},this.vl=new Zg((function(t){return $d(t)}),Xd),this.Sl=new Map,this.Dl=new Set,this.Cl=new qv(Vp.H),this.xl=new Map,this.Nl=new Km,this.$l={},this.Fl=new Map,this.Ol=um.Li(),this.onlineState="Unknown",this.kl=void 0}return Object.defineProperty(t.prototype,"Ml",{get:function(){return!0===this.kl},enumerable:!1,configurable:!0}),t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pb(t,e){return si(this,void 0,void 0,(function(){var n,r,i,o,s,a;return ai(this,(function(u){switch(u.label){case 0:return n=Bb(t),(o=n.vl.get(e))?(r=o.targetId,n.Vl.Fa(r),i=o.view.Rl(),[3,4]):[3,1];case 1:return[4,qm(n.bh,Kd(e))];case 2:return s=u.sent(),a=n.Vl.Fa(s.targetId),r=s.targetId,[4,db(n,e,r,"current"===a)];case 3:i=u.sent(),n.Ml&&P_(n.yl,s),u.label=4;case 4:return[2,i]}}))}))}function db(t,e,n,r){return si(this,void 0,void 0,(function(){var i,o,s,a,u,c;return ai(this,(function(h){switch(h.label){case 0:return t.Ll=function(e,n,r){return function(t,e,n,r){return si(this,void 0,void 0,(function(){var i,o,s;return ai(this,(function(a){switch(a.label){case 0:return(i=e.view.fl(n)).lc?[4,Wm(t.bh,e.query,!1).then((function(t){var n=t.documents;return e.view.fl(n,i)}))]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.$e.get(e.targetId),s=e.view.wi(i,t.Ml,o),[2,(Nb(t,e.targetId,s.Il),s.snapshot)]}}))}))}(t,e,n,r)},[4,Wm(t.bh,e,!0)];case 1:return i=h.sent(),o=new cb(e,i.Rc),s=o.fl(i.documents),a=sy.Le(n,r&&"Offline"!==t.onlineState),u=o.wi(s,t.Ml,a),Nb(t,n,u.Il),c=new hb(e,n,o),[2,(t.vl.set(e,c),t.Sl.has(n)?t.Sl.get(n).push(e):t.Sl.set(n,[e]),u.snapshot)]}}))}))}function vb(t,e){return si(this,void 0,void 0,(function(){var n,r,i;return ai(this,(function(o){switch(o.label){case 0:return n=vp(t),r=n.vl.get(e),(i=n.Sl.get(r.targetId)).length>1?[2,(n.Sl.set(r.targetId,i.filter((function(t){return!Xd(t,e)}))),void n.vl.delete(e))]:n.Ml?(n.Vl.ka(r.targetId),n.Vl.Da(r.targetId)?[3,2]:[4,Bm(n.bh,r.targetId,!1).then((function(){n.Vl.La(r.targetId),O_(n.yl,r.targetId),Sb(n,r.targetId)})).catch(Jg)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Sb(n,r.targetId),[4,Bm(n.bh,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function yb(t,e,n){return si(this,void 0,void 0,(function(){var r,i,o,s;return ai(this,(function(a){switch(a.label){case 0:r=Wb(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,(u=r.bh,c=e,l=vp(u),f=xp.now(),p=c.reduce((function(t,e){return t.add(e.key)}),Zv()),l.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return l.Tc.Xo(t,p).next((function(e){h=e;for(var n=[],r=0,i=c;r<i.length;r++){var o=i[r],s=Sv(o,h.get(o.key));null!=s&&n.push(new kv(o.key,s,dd(s.proto.mapValue),bv.exists(!0)))}return l.zo.Ri(t,f,n,c)}))})).then((function(t){var e=t.xs(h);return{batchId:t.batchId,ri:e}})))];case 2:return i=a.sent(),r.Vl.Ca(i.batchId),function(t,e,n){var r=t.$l[t.currentUser.A()];r||(r=new qv(mp)),r=r.zt(e,n),t.$l[t.currentUser.A()]=r}(r,i.batchId,n),[4,Pb(r,i.ri)];case 3:return a.sent(),[4,W_(r.yl)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=ig(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}var u,c,h,l,f,p}))}))}function gb(t,e){return si(this,void 0,void 0,(function(){var n,r;return ai(this,(function(i){switch(i.label){case 0:n=vp(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Um(n.bh,e)];case 2:return r=i.sent(),e.$e.forEach((function(t,e){var r=n.xl.get(e);r&&(dp(t.qe.size+t.Ue.size+t.Qe.size<=1),t.qe.size>0?r.Pl=!0:t.Ue.size>0?dp(r.Pl):t.Qe.size>0&&(dp(r.Pl),r.Pl=!1))})),[4,Pb(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Jg(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function mb(t,e,n){var r=vp(t);if(r.Ml&&0===n||!r.Ml&&1===n){var i=[];r.vl.forEach((function(t,n){var r=n.view.Gh(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=vp(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].Gh(e)&&(r=!0)})),r&&ob(n)}(r.gl,e),i.length&&r.bl.ah(i),r.onlineState=e,r.Ml&&r.Vl.Qa(e)}}function _b(t,e,n){return si(this,void 0,void 0,(function(){var r,i,o,s,a,u;return ai(this,(function(c){switch(c.label){case 0:return(r=vp(t)).Vl.Ba(e,"rejected",n),i=r.xl.get(e),(o=i&&i.key)?(s=(s=new qv(Vp.H)).zt(o,new gd(o,Rp.min())),a=Zv().add(o),u=new oy(Rp.min(),new Map,new Hv(mp),s,a),[4,gb(r,u)]):[3,2];case 1:return c.sent(),r.Cl=r.Cl.remove(o),r.xl.delete(e),kb(r),[3,4];case 2:return[4,Bm(r.bh,e,!1).then((function(){return Sb(r,e,n)})).catch(Jg)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function bb(t,e){return si(this,void 0,void 0,(function(){var n,r,i;return ai(this,(function(o){switch(o.label){case 0:n=vp(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Fm(n.bh,e)];case 2:return i=o.sent(),Tb(n,r,null),Ib(n,r),n.Vl.Na(r,"acknowledged"),[4,Pb(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Jg(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function wb(t,e,n){return si(this,void 0,void 0,(function(){var r,i;return ai(this,(function(o){switch(o.label){case 0:r=vp(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,(s=r.bh,a=e,u=vp(s),u.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var e;return u.zo.Pi(t,a).next((function(n){return dp(null!==n),e=n.keys(),u.zo.Ci(t,n)})).next((function(){return u.zo.$i(t)})).next((function(){return u.Tc.Xo(t,e)}))})))];case 2:return i=o.sent(),Tb(r,e,n),Ib(r,e),r.Vl.Na(e,"rejected",n),[4,Pb(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Jg(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}var s,a,u}))}))}function Eb(t,e){return si(this,void 0,void 0,(function(){var n,r,i,o,s;return ai(this,(function(a){switch(a.label){case 0:M_((n=vp(t)).yl)||cp("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,(u=n.bh,c=vp(u),c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return c.zo.Vi(t)})))];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fl.get(r)||[]).push(e),n.Fl.set(r,i),[3,4]);case 3:return o=a.sent(),s=ig(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}var u,c}))}))}function Ib(t,e){(t.Fl.get(e)||[]).forEach((function(t){t.resolve()})),t.Fl.delete(e)}function Tb(t,e,n){var r=vp(t),i=r.$l[r.currentUser.A()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.$l[r.currentUser.A()]=i}}function Sb(t,e,n){void 0===n&&(n=null),t.Vl.ka(e);for(var r=0,i=t.Sl.get(e);r<i.length;r++){var o=i[r];t.vl.delete(o),n&&t.bl.Bl(o,n)}t.Sl.delete(e),t.Ml&&t.Nl.Fc(e).forEach((function(e){t.Nl.Fi(e)||Cb(t,e)}))}function Cb(t,e){t.Dl.delete(e.path.rt());var n=t.Cl.get(e);null!==n&&(O_(t.yl,n),t.Cl=t.Cl.remove(e),t.xl.delete(n),kb(t))}function Nb(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof ab?(t.Nl.nr(o.key,e),Ab(t,o)):o instanceof ub?(cp("SyncEngine","Document no longer in limbo: "+o.key),t.Nl.ir(o.key,e),t.Nl.Fi(o.key)||Cb(t,o.key)):pp()}}function Ab(t,e){var n=e.key,r=n.path.rt();t.Cl.get(n)||t.Dl.has(r)||(cp("SyncEngine","New document in limbo: "+n),t.Dl.add(r),kb(t))}function kb(t){for(;t.Dl.size>0&&t.Cl.size<t.pl;){var e=t.Dl.values().next().value;t.Dl.delete(e);var n=new Vp(Lp.ot(e)),r=t.Ol.next();t.xl.set(r,new lb(n)),t.Cl=t.Cl.zt(n,r),P_(t.yl,new nv(Kd(qd(n.path)),r,2,Op.q))}}function Pb(t,e,n){return si(this,void 0,void 0,(function(){var r,i,o,s;return ai(this,(function(a){switch(a.label){case 0:return r=vp(t),i=[],o=[],s=[],r.vl.et()?[3,3]:(r.vl.forEach((function(t,a){s.push(r.Ll(a,e,n).then((function(t){if(t){r.Ml&&r.Vl.Ba(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=xm.oc(a.targetId,t);o.push(e)}})))})),[4,Promise.all(s)]);case 1:return a.sent(),r.bl.ah(i),[4,function(t,e){return si(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,h;return ai(this,(function(l){switch(l.label){case 0:n=vp(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return Qy.forEach(e,(function(e){return Qy.forEach(e.ic,(function(r){return n.persistence.Ti.nr(t,e.targetId,r)})).next((function(){return Qy.forEach(e.rc,(function(r){return n.persistence.Ti.ir(t,e.targetId,r)}))}))}))}))];case 2:return l.sent(),[3,4];case 3:if(!Jy(r=l.sent()))throw r;return cp("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)s=o[i],a=s.targetId,s.fromCache||(u=n.fc.get(a),c=u.Ot,h=u.Lt(c),n.fc=n.fc.zt(a,h));return[2]}}))}))}(r.bh,o)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function Ob(t,e){return si(this,void 0,void 0,(function(){var n,r;return ai(this,(function(i){switch(i.label){case 0:return(n=vp(t)).currentUser.isEqual(e)?[3,3]:(cp("SyncEngine","User change. New user:",e.A()),[4,Mm(n.bh,e)]);case 1:return r=i.sent(),n.currentUser=e,(o=n).Fl.forEach((function(t){t.forEach((function(t){t.reject(new Ip(Ep.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),o.Fl.clear(),n.Vl.Ua(e,r.mc,r.Ac),[4,Pb(n,r.Ic)];case 2:i.sent(),i.label=3;case 3:return[2]}var o}))}))}function xb(t,e){var n=vp(t),r=n.xl.get(e);if(r&&r.Pl)return Zv().add(r.key);var i=Zv(),o=n.Sl.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=a[s],c=n.vl.get(u);i=i.Pe(c.view._l)}return i}function Rb(t,e){return si(this,void 0,void 0,(function(){var n,r,i;return ai(this,(function(o){switch(o.label){case 0:return[4,Wm((n=vp(t)).bh,e.query,!0)];case 1:return r=o.sent(),i=e.view.Al(r),[2,(n.Ml&&Nb(n,e.targetId,i.Il),i)]}}))}))}function Db(t){return si(this,void 0,void 0,(function(){var e;return ai(this,(function(n){return[2,Gm((e=vp(t)).bh).then((function(t){return Pb(e,t)}))]}))}))}function Lb(t,e,n,r){return si(this,void 0,void 0,(function(){var i,o;return ai(this,(function(s){switch(s.label){case 0:return[4,(a=(i=vp(t)).bh,u=e,c=vp(a),h=vp(c.zo),c.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return h.yi(t,u).next((function(e){return e?c.Tc.Xo(t,e):Qy.resolve(null)}))})))];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,W_(i.yl)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Tb(i,e,r||null),Ib(i,e),function(t,e){vp(vp(t).zo).xi(e)}(i.bh,e)):pp(),s.label=4;case 4:return[4,Pb(i,o)];case 5:return s.sent(),[3,7];case 6:cp("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}var a,u,c,h}))}))}function Mb(t,e){return si(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c;return ai(this,(function(h){switch(h.label){case 0:return Bb(n=vp(t)),Wb(n),!0!==e||!0===n.kl?[3,3]:(r=n.Vl.va(),[4,Fb(n,r.it())]);case 1:return i=h.sent(),n.kl=!0,[4,X_(n.yl,!0)];case 2:for(h.sent(),o=0,s=i;o<s.length;o++)a=s[o],P_(n.yl,a);return[3,7];case 3:return!1!==e||!1===n.kl?[3,7]:(u=[],c=Promise.resolve(),n.Sl.forEach((function(t,e){n.Vl.Ma(e)?u.push(e):c=c.then((function(){return Sb(n,e),Bm(n.bh,e,!0)})),O_(n.yl,e)})),[4,c]);case 4:return h.sent(),[4,Fb(n,u)];case 5:return h.sent(),(l=vp(n)).xl.forEach((function(t,e){O_(l.yl,e)})),l.Nl.Oc(),l.xl=new Map,l.Cl=new qv(Vp.H),n.kl=!1,[4,X_(n.yl,!1)];case 6:h.sent(),h.label=7;case 7:return[2]}var l}))}))}function Fb(t,e,n){return si(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,h,l,f,p,d,v;return ai(this,(function(y){switch(y.label){case 0:n=vp(t),r=[],i=[],o=0,s=e,y.label=1;case 1:return o<s.length?(a=s[o],u=void 0,(c=n.Sl.get(a))&&0!==c.length?[4,qm(n.bh,Kd(c[0]))]:[3,7]):[3,13];case 2:u=y.sent(),h=0,l=c,y.label=3;case 3:return h<l.length?(f=l[h],p=n.vl.get(f),[4,Rb(n,p)]):[3,6];case 4:(d=y.sent()).snapshot&&i.push(d.snapshot),y.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,Hm(n.bh,a)];case 8:return v=y.sent(),[4,qm(n.bh,v)];case 9:return u=y.sent(),[4,db(n,Vb(v),a,!1)];case 10:y.sent(),y.label=11;case 11:r.push(u),y.label=12;case 12:return o++,[3,1];case 13:return[2,(n.bl.ah(i),r)]}}))}))}function Vb(t){return jd(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Ub(t){var e=vp(t);return vp(vp(e.bh).persistence).Uo()}function jb(t,e,n,r){return si(this,void 0,void 0,(function(){var i,o,s;return ai(this,(function(a){switch(a.label){case 0:return(i=vp(t)).kl?(cp("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Sl.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Gm(i.bh)];case 3:return o=a.sent(),s=oy.Me(e,"current"===n),[4,Pb(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,Bm(i.bh,e,!0)];case 6:return a.sent(),Sb(i,e,r),[3,8];case 7:pp(),a.label=8;case 8:return[2]}}))}))}function qb(t,e,n){return si(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,h,l,f;return ai(this,(function(p){switch(p.label){case 0:if(!(r=Bb(t)).kl)return[3,10];i=0,o=e,p.label=1;case 1:return i<o.length?(s=o[i],r.Sl.has(s)?(cp("SyncEngine","Adding an already active target "+s),[3,5]):[4,Hm(r.bh,s)]):[3,6];case 2:return a=p.sent(),[4,qm(r.bh,a)];case 3:return u=p.sent(),[4,db(r,Vb(a),u.targetId,!1)];case 4:p.sent(),P_(r.yl,u),p.label=5;case 5:return i++,[3,1];case 6:c=function(t){return ai(this,(function(e){switch(e.label){case 0:return r.Sl.has(t)?[4,Bm(r.bh,t,!1).then((function(){O_(r.yl,t),Sb(r,t)})).catch(Jg)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},h=0,l=n,p.label=7;case 7:return h<l.length?(f=l[h],[5,c(f)]):[3,10];case 8:p.sent(),p.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function Bb(t){var e=vp(t);return e.yl.Dh.Lh=gb.bind(null,e),e.yl.Dh.vn=xb.bind(null,e),e.yl.Dh.Mh=_b.bind(null,e),e.bl.ah=rb.bind(null,e.gl),e.bl.Bl=ib.bind(null,e.gl),e}function Wb(t){var e=vp(t);return e.yl.Dh.Bh=bb.bind(null,e),e.yl.Dh.qh=wb.bind(null,e),e}var Hb=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return si(this,void 0,void 0,(function(){return ai(this,(function(e){switch(e.label){case 0:return this.Qt=b_(t.yu.t),this.Vl=this.Wl(t),this.persistence=this.jl(t),[4,this.persistence.start()];case 1:return e.sent(),this.Gl=this.zl(t),this.bh=this.Hl(t),[2]}}))}))},t.prototype.zl=function(t){return null},t.prototype.Hl=function(t){return Lm(this.persistence,new Rm,t.Jl,this.Qt)},t.prototype.jl=function(t){return new t_(n_.ia,this.Qt)},t.prototype.Wl=function(t){return new f_},t.prototype.terminate=function(){return si(this,void 0,void 0,(function(){return ai(this,(function(t){switch(t.label){case 0:return this.Gl&&this.Gl.stop(),[4,this.Vl.ko()];case 1:return t.sent(),[4,this.persistence.ko()];case 2:return t.sent(),[2]}}))}))},t}(),Gb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Yl=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return ii(e,t),e.prototype.initialize=function(e){return si(this,void 0,void 0,(function(){return ai(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,zm(this.bh)];case 2:return n.sent(),[4,this.Yl.initialize(this,e)];case 3:return n.sent(),[4,Wb(this.Yl._a)];case 4:return n.sent(),[4,W_(this.Yl.yl)];case 5:return n.sent(),[2]}}))}))},e.prototype.Hl=function(t){return Lm(this.persistence,new Rm,t.Jl,this.Qt)},e.prototype.zl=function(t){var e=this.persistence.Ti.lr;return new vm(e,t._s)},e.prototype.jl=function(t){var e=Pm(t.yu.t,t.yu.persistenceKey),n=void 0!==this.cacheSizeBytes?$g.Ys(this.cacheSizeBytes):$g.ti;return new Nm(this.synchronizeTabs,e,t.clientId,n,t._s,m_(),__(),this.Qt,this.Vl,!!this.forceOwnership)},e.prototype.Wl=function(t){return new f_},e}(Hb),zb=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Yl=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return ii(e,t),e.prototype.initialize=function(e){return si(this,void 0,void 0,(function(){var n,r=this;return ai(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Yl._a,this.Vl instanceof l_?(this.Vl._a={eu:Lb.bind(null,n),nu:jb.bind(null,n),su:qb.bind(null,n),Uo:Ub.bind(null,n),tu:Db.bind(null,n)},[4,this.Vl.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.Ro((function(t){return si(r,void 0,void 0,(function(){return ai(this,(function(e){switch(e.label){case 0:return[4,Mb(this.Yl._a,t)];case 1:return e.sent(),this.Gl&&(t&&!this.Gl.Er?this.Gl.start(this.bh):t||this.Gl.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Wl=function(t){var e=m_();if(!l_.Kn(e))throw new Ip(Ep.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Pm(t.yu.t,t.yu.persistenceKey);return new l_(e,t._s,n,t.clientId,t.Jl)},e}(Gb),Qb=function(){function t(){}return t.prototype.initialize=function(t,e){return si(this,void 0,void 0,(function(){var n=this;return ai(this,(function(r){switch(r.label){case 0:return this.bh?[3,2]:(this.bh=t.bh,this.Vl=t.Vl,this.Sh=this.Xl(e),this.yl=this.Zl(e),this.gl=this.t_(e),this._a=this.e_(e,!t.synchronizeTabs),this.Vl.fa=function(t){return mb(n._a,t,1)},this.yl.Dh.n_=Ob.bind(null,this._a),[4,X_(this.yl,this._a.Ml)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.t_=function(t){return new tb},t.prototype.Xl=function(t){var e,n,r=b_(t.yu.t),i=(e=t.yu,new g_(e));return n=t.credentials,new S_(n,i,r)},t.prototype.Zl=function(t){var e,n,r,i,o,s=this;return e=this.bh,n=this.Sh,r=t._s,i=function(t){return mb(s._a,t,0)},o=d_.Kn()?new d_:new p_,new N_(e,n,r,i,o)},t.prototype.e_=function(t,e){return n=this.bh,r=this.yl,i=this.gl,o=this.Vl,s=t.Jl,a=t.pl,u=e,c=new fb(n,r,i,o,s,a),u&&(c.kl=!0),c;var n,r,i,o,s,a,u,c},t.prototype.terminate=function(){return function(t){return si(this,void 0,void 0,(function(){var e;return ai(this,(function(n){switch(n.label){case 0:return e=vp(t),cp("RemoteStore","RemoteStore shutting down."),e.Nh.add(5),[4,k_(e)];case 1:return n.sent(),e.Fh.ko(),e.Oh.set("Unknown"),[2]}}))}))}(this.yl)},t}(),Kb=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.s_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.s_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.i_=function(){this.muted=!0},t.prototype.s_=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),Yb=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Ip(Ep.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.f_=new Fp(t)}return t.prototype.isEqual=function(t){return this.f_.isEqual(t.f_)},t}(),Xb=function(t){this._methodName=t},$b=function(t){this.d_=t};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Jb(t,e,n){if(!n)throw new Ip(Ep.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Zb(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ip(Ep.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function tw(t,e,n,r){if(!0===e&&!0===r)throw new Ip(Ep.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function ew(t){if(!Vp.wt(t))throw new Ip(Ep.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function nw(t){if(Vp.wt(t))throw new Ip(Ep.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function rw(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":pp()}function iw(t,e){if("_delegate"in t&&(t=t.d_),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ip(Ep.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=rw(t);throw new Ip(Ep.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function ow(t,e){if(e<=0)throw new Ip(Ep.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sw=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Ip(Ep.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ip(Ep.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,tw("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),aw=new Map,uw=function(){function t(t,e){this.w_="(lite)",this.E_=new sw({}),this.T_=!1,t instanceof sp?(this.I_=t,this.m_=new Np):(this.A_=t,this.I_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Ip(Ep.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sp(t.options.projectId)}(t),this.m_=new Ap(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this.A_)throw new Ip(Ep.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.A_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"R_",{get:function(){return this.T_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"P_",{get:function(){return void 0!==this.y_},enumerable:!1,configurable:!0}),t.prototype.g_=function(t){if(this.T_)throw new Ip(Ep.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.E_=new sw(t),void 0!==t.credentials&&(this.m_=function(t){if(!t)return new Np;switch(t.type){case"gapi":var e=t.client;return dp(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Pp(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new Ip(Ep.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype.V_=function(){return this.E_},t.prototype.p_=function(){return this.T_=!0,this.E_},t.prototype._delete=function(){return this.y_||(this.y_=this.b_()),this.y_},t.prototype.toJSON=function(){return{app:this.A_,t:this.I_,settings:this.E_}},t.prototype.b_=function(){return this,(t=aw.get(this))&&(cp("ComponentProvider","Removing Datastore"),aw.delete(this),t.terminate()),Promise.resolve();var t},t}(),cw=function(){function t(t,e,n){this.v_=e,this.S_=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"D_",{get:function(){return this.S_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.S_.path.rt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new lw(this.firestore,this.v_,this.S_.path.X())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this.S_)},t}(),hw=function(){function t(t,e,n){this.v_=e,this.C_=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this.C_)},t}(),lw=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,qd(r))||this).firestore=e,i.D_=r,i.type="collection",i}return ii(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.C_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.C_.path.rt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.D_.X();return t.et()?null:new cw(this.firestore,null,new Vp(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this.D_)},e}(hw);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fw(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof $b&&(t=t.d_),Jb("collection","path",e),t instanceof uw)return nw(n=Lp.ot.apply(Lp,li([e],r))),new lw(t,null,n);if(!(t instanceof cw||t instanceof lw))throw new Ip(Ep.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return nw(n=Lp.ot.apply(Lp,li([t.path],r)).child(Lp.ot(e))),new lw(t.firestore,null,n)}function pw(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof $b&&(t=t.d_),1===arguments.length&&(e=gp.u()),Jb("doc","path",e),t instanceof uw)return ew(n=Lp.ot.apply(Lp,li([e],r))),new cw(t,null,new Vp(n));if(!(t instanceof cw||t instanceof lw))throw new Ip(Ep.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return ew(n=t.D_.child(Lp.ot.apply(Lp,li([e],r)))),new cw(t.firestore,t instanceof lw?t.v_:null,new Vp(n))}function dw(t,e){return t instanceof $b&&(t=t.d_),e instanceof $b&&(e=e.d_),(t instanceof cw||t instanceof lw)&&(e instanceof cw||e instanceof lw)&&t.firestore===e.firestore&&t.path===e.path&&t.v_===e.v_}function vw(t,e){return t instanceof $b&&(t=t.d_),e instanceof $b&&(e=e.d_),t instanceof hw&&e instanceof hw&&t.firestore===e.firestore&&Xd(t.C_,e.C_)&&t.v_===e.v_}var yw=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Ip(Ep.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Ip(Ep.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.x_=t,this.N_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.x_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.N_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.x_===t.x_&&this.N_===t.N_},t.prototype.toJSON=function(){return{latitude:this.x_,longitude:this.N_}},t.prototype.U=function(t){return mp(this.x_,t.x_)||mp(this.N_,t.N_)},t}(),gw=/^__.*__$/,mw=function(){function t(t,e,n){this.data=t,this.Gt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return null!==this.Gt?new kv(t,this.data,this.Gt,e,this.fieldTransforms):new Av(t,this.data,e,this.fieldTransforms)},t}(),_w=function(){function t(t,e,n){this.data=t,this.Gt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return new kv(t,this.data,this.Gt,e,this.fieldTransforms)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pp()}}var ww=function(){function t(t,e,n,r,i,o){this.settings=t,this.t=e,this.Qt=n,this.ignoreUndefinedProperties=r,void 0===i&&this.O_(),this.fieldTransforms=i||[],this.Gt=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k_",{get:function(){return this.settings.k_},enumerable:!1,configurable:!0}),t.prototype.M_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.t,this.Qt,this.ignoreUndefinedProperties,this.fieldTransforms,this.Gt)},t.prototype.L_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.q_(t),r},t.prototype.U_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.O_(),r},t.prototype.Q_=function(t){return this.M_({path:void 0,B_:!0})},t.prototype.K_=function(t){return qw(t,this.settings.methodName,this.settings.W_||!1,this.path,this.settings.j_)},t.prototype.contains=function(t){return void 0!==this.Gt.find((function(e){return t.nt(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.nt(e.field)}))},t.prototype.O_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.q_(this.path.get(t))},t.prototype.q_=function(t){if(0===t.length)throw this.K_("Document fields must not be empty");if(bw(this.k_)&&gw.test(t))throw this.K_('Document fields cannot begin and end with "__"')},t}(),Ew=function(){function t(t,e,n){this.t=t,this.ignoreUndefinedProperties=e,this.Qt=n||b_(t)}return t.prototype.G_=function(t,e,n,r){return void 0===r&&(r=!1),new ww({k_:t,methodName:e,j_:n,path:Fp.ct(),B_:!1,W_:r},this.t,this.Qt,this.ignoreUndefinedProperties)},t}();function Iw(t){var e=t.p_(),n=b_(t.I_);return new Ew(t.I_,!!e.ignoreUndefinedProperties,n)}function Tw(t,e,n,r,i,o){void 0===o&&(o={});var s=t.G_(o.merge||o.mergeFields?2:0,e,n,i);Fw("Data must be an object, but it was:",s,r);var a,u,c=Lw(r,s);if(o.merge)a=new Bp(s.Gt),u=s.fieldTransforms;else if(o.mergeFields){for(var h=[],l=0,f=o.mergeFields;l<f.length;l++){var p=Vw(e,f[l],n);if(!s.contains(p))throw new Ip(Ep.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");Bw(h,p)||h.push(p)}a=new Bp(h),u=s.fieldTransforms.filter((function(t){return a.Tt(t.field)}))}else a=null,u=s.fieldTransforms;return new mw(new fd(c),a,u)}var Sw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ii(e,t),e.prototype.z_=function(t){if(2!==t.k_)throw 1===t.k_?t.K_(this._methodName+"() can only appear at the top level of your update data"):t.K_(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.Gt.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Xb);function Cw(t,e,n){return new ww({k_:3,j_:e.settings.j_,methodName:t._methodName,B_:n},e.t,e.Qt,e.ignoreUndefinedProperties)}var Nw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ii(e,t),e.prototype.z_=function(t){return new mv(t.path,new hv)},e.prototype.isEqual=function(t){return t instanceof e},e}(Xb),Aw=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return ii(e,t),e.prototype.z_=function(t){var e=Cw(this,t,!0),n=this.H_.map((function(t){return Dw(t,e)})),r=new lv(n);return new mv(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Xb),kw=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return ii(e,t),e.prototype.z_=function(t){var e=Cw(this,t,!0),n=this.H_.map((function(t){return Dw(t,e)})),r=new pv(n);return new mv(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Xb),Pw=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).J_=n,r}return ii(e,t),e.prototype.z_=function(t){var e=new vv(t.Qt,ov(t.Qt,this.J_));return new mv(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Xb);function Ow(t,e,n,r){var i=t.G_(1,e,n);Fw("Data must be an object, but it was:",i,r);var o=[],s=new pd;jp(r,(function(t,r){var a=jw(e,t,n);r instanceof $b&&(r=r.d_);var u=i.U_(a);if(r instanceof Sw)o.push(a);else{var c=Dw(r,u);null!=c&&(o.push(a),s.set(a,c))}}));var a=new Bp(o);return new _w(s.Pt(),a,i.fieldTransforms)}function xw(t,e,n,r,i,o){var s=t.G_(1,e,n),a=[Vw(e,r,n)],u=[i];if(o.length%2!=0)throw new Ip(Ep.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Vw(e,o[c])),u.push(o[c+1]);for(var h=[],l=new pd,f=a.length-1;f>=0;--f)if(!Bw(h,a[f])){var p=a[f],d=u[f];d instanceof $b&&(d=d.d_);var v=s.U_(p);if(d instanceof Sw)h.push(p);else{var y=Dw(d,v);null!=y&&(h.push(p),l.set(p,y))}}var g=new Bp(h);return new _w(l.Pt(),g,s.fieldTransforms)}function Rw(t,e,n,r){return void 0===r&&(r=!1),Dw(n,t.G_(r?4:3,e))}function Dw(t,e){if(t instanceof $b&&(t=t.d_),Mw(t))return Fw("Unsupported field value:",e,t),Lw(t,e);if(t instanceof Xb)return function(t,e){if(!bw(e.k_))throw e.K_(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.K_(t._methodName+"() is not currently supported inside arrays");var n=t.z_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.Gt.push(e.path),t instanceof Array){if(e.settings.B_&&4!==e.k_)throw e.K_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Dw(o[i],e.Q_(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof $b&&(t=t.d_),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ov(e.Qt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=xp.fromDate(t);return{timestampValue:gy(e.Qt,n)}}if(t instanceof xp)return n=new xp(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:gy(e.Qt,n)};if(t instanceof yw)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Tp)return{bytesValue:my(e.Qt,t.I)};if(t instanceof cw){n=e.t;var r=t.firestore.I_;if(!r.isEqual(n))throw e.K_("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:wy(t.firestore.I_||e.t,t.S_.path)}}throw e.K_("Unsupported field value: "+rw(t))}(t,e)}function Lw(t,e){var n={};return qp(t)?e.path&&e.path.length>0&&e.Gt.push(e.path):jp(t,(function(t,r){var i=Dw(r,e.L_(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Mw(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof xp||t instanceof yw||t instanceof Tp||t instanceof cw||t instanceof Xb)}function Fw(t,e,n){if(!Mw(n)||("object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i))){var r=rw(n);throw"an object"===r?e.K_(t+" a custom object"):e.K_(t+" "+r)}var i}function Vw(t,e,n){if(e instanceof $b&&(e=e.d_),e instanceof Yb)return e.f_;if("string"==typeof e)return jw(t,e);throw qw("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Uw=new RegExp("[~\\*/\\[\\]]");function jw(t,e,n){if(e.search(Uw)>=0)throw qw("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Yb.bind.apply(Yb,li([void 0],e.split("."))))).f_}catch(r){throw qw("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function qw(t,e,n,r,i){var o=r&&!r.et(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Ip(Ep.INVALID_ARGUMENT,(a+=". ")+t+u)}function Bw(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ww=function(){function t(t){this.Sh=t,this.Y_=new Map,this.mutations=[],this.X_=!1,this.Z_=null,this.tf=new Set}return t.prototype.ef=function(t){return si(this,void 0,void 0,(function(){var e,n=this;return ai(this,(function(r){switch(r.label){case 0:if(this.nf(),this.mutations.length>0)throw new Ip(Ep.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return si(this,void 0,void 0,(function(){var n,r,i,o,s,a;return ai(this,(function(u){switch(u.label){case 0:return n=vp(t),r=Ny(n.Qt)+"/documents",i={documents:e.map((function(t){return Iy(n.Qt,t)}))},[4,n.Du("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach((function(t){var e,r,i=(e=n.Qt,"found"in(r=t)?function(t,e){dp(!!e.found),e.found.name,e.found.updateTime;var n=Ty(t,e.found.name),r=by(e.found.updateTime),i=new fd({mapValue:{fields:e.found.fields}});return new yd(n,r,i,{})}(e,r):"missing"in r?function(t,e){dp(!!e.missing),dp(!!e.readTime);var n=Ty(t,e.missing),r=by(e.readTime);return new gd(n,r)}(e,r):pp());s.set(i.key.toString(),i)})),a=[],[2,(e.forEach((function(t){var e=s.get(t.toString());dp(!!e),a.push(e)})),a)]}}))}))}(this.Sh,t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof gd||t instanceof yd?n.sf(t):pp()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.F_(t,this.jt(t))),this.tf.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.F_(t,this.rf(t)))}catch(n){this.Z_=n}this.tf.add(t.toString())},t.prototype.delete=function(t){this.write(new Mv(t,this.jt(t))),this.tf.add(t.toString())},t.prototype.commit=function(){return si(this,void 0,void 0,(function(){var t,e=this;return ai(this,(function(n){switch(n.label){case 0:if(this.nf(),this.Z_)throw this.Z_;return t=this.Y_,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=Vp._t(n);e.mutations.push(new Fv(r,e.jt(r)))})),[4,function(t,e){return si(this,void 0,void 0,(function(){var n,r,i;return ai(this,(function(o){switch(o.label){case 0:return n=vp(t),r=Ny(n.Qt)+"/documents",i={writes:e.map((function(t){return Py(n.Qt,t)}))},[4,n.pu("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.Sh,this.mutations)];case 1:return n.sent(),this.X_=!0,[2]}}))}))},t.prototype.sf=function(t){var e;if(t instanceof yd)e=t.version;else{if(!(t instanceof gd))throw pp();e=Rp.min()}var n=this.Y_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Ip(Ep.ABORTED,"Document version changed between two reads.")}else this.Y_.set(t.key.toString(),e)},t.prototype.jt=function(t){var e=this.Y_.get(t.toString());return!this.tf.has(t.toString())&&e?bv.updateTime(e):bv.Kt()},t.prototype.rf=function(t){var e=this.Y_.get(t.toString());if(!this.tf.has(t.toString())&&e){if(e.isEqual(Rp.min()))throw new Ip(Ep.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return bv.updateTime(e)}return bv.exists(!0)},t.prototype.write=function(t){this.nf(),this.mutations.push(t)},t.prototype.nf=function(){},t}(),Hw=function(){function t(t,e,n,r){this._s=t,this.Sh=e,this.updateFunction=n,this.Es=r,this.cf=5,this.Gu=new w_(this._s,"transaction_retry")}return t.prototype.run=function(){this.af()},t.prototype.af=function(){var t=this;this.Gu.Lu((function(){return si(t,void 0,void 0,(function(){var t,e,n=this;return ai(this,(function(r){return t=new Ww(this.Sh),(e=this.uf(t))&&e.then((function(e){n._s.Ps((function(){return t.commit().then((function(){n.Es.resolve(e)})).catch((function(t){n.hf(t)}))}))})).catch((function(t){n.hf(t)})),[2]}))}))}))},t.prototype.uf=function(t){try{var e=this.updateFunction(t);return!Xp(e)&&e.catch&&e.then?e:(this.Es.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.Es.reject(n),null}},t.prototype.hf=function(t){var e=this;this.cf>0&&this.lf(t)?(this.cf-=1,this._s.Ps((function(){return e.af(),Promise.resolve()}))):this.Es.reject(t)},t.prototype.lf=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Uv(e)}return!1},t}(),Gw=function(){function t(t,e,n){var r=this;this.credentials=t,this._s=e,this.yu=n,this.user=Sp.UNAUTHENTICATED,this.clientId=gp.u(),this._f=function(){},this.C=new zy,this.credentials.v((function(t){cp("FirestoreClient","Received user=",t.uid),r.user=t,r._f(t),r.C.resolve()}))}return t.prototype.getConfiguration=function(){return si(this,void 0,void 0,(function(){return ai(this,(function(t){switch(t.label){case 0:return[4,this.C.promise];case 1:return[2,(t.sent(),{_s:this._s,yu:this.yu,clientId:this.clientId,credentials:this.credentials,Jl:this.user,pl:100})]}}))}))},t.prototype.ff=function(t){var e=this;this._f=t,this.C.promise.then((function(){return e._f(e.user)}))},t.prototype.df=function(){if(this._s.wf)throw new Ip(Ep.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this._s.Ef();var e=new zy;return this._s.Tf((function(){return si(t,void 0,void 0,(function(){var t,n;return ai(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.If?[4,this.If.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.mf?[4,this.mf.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.S(),e.resolve(),[3,6];case 5:return t=r.sent(),n=ig(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zw(t,e){return si(this,void 0,void 0,(function(){var n,r,i=this;return ai(this,(function(o){switch(o.label){case 0:return t._s.Af(),cp("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.Jl,t.ff((function(n){r.isEqual(n)||(r=n,t._s.po((function(){return si(i,void 0,void 0,(function(){return ai(this,(function(t){switch(t.label){case 0:return[4,Mm(e.bh,n)];case 1:return t.sent(),[2]}}))}))})))})),e.persistence.Po((function(){return t.terminate()})),t.mf=e,[2]}}))}))}function Qw(t,e){return si(this,void 0,void 0,(function(){var n,r;return ai(this,(function(i){switch(i.label){case 0:return t._s.Af(),[4,Kw(t)];case 1:return n=i.sent(),cp("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.ff((function(n){return t._s.po((function(){return function(t,e){return si(this,void 0,void 0,(function(){var n,r;return ai(this,(function(i){switch(i.label){case 0:return(n=vp(t))._s.Af(),cp("RemoteStore","RemoteStore received new credentials"),r=M_(n),n.Nh.add(3),[4,k_(n)];case 1:return i.sent(),r&&n.Oh.set("Unknown"),[4,n.Dh.n_(e)];case 2:return i.sent(),n.Nh.delete(3),[4,A_(n)];case 3:return i.sent(),[2]}}))}))}(e.yl,n)}))})),t.If=e,[2]}}))}))}function Kw(t){return si(this,void 0,void 0,(function(){return ai(this,(function(e){switch(e.label){case 0:return t.mf?[3,2]:(cp("FirestoreClient","Using default OfflineComponentProvider"),[4,zw(t,new Hb)]);case 1:e.sent(),e.label=2;case 2:return[2,t.mf]}}))}))}function Yw(t){return si(this,void 0,void 0,(function(){return ai(this,(function(e){switch(e.label){case 0:return t.If?[3,2]:(cp("FirestoreClient","Using default OnlineComponentProvider"),[4,Qw(t,new Qb)]);case 1:e.sent(),e.label=2;case 2:return[2,t.If]}}))}))}function Xw(t){return Kw(t).then((function(t){return t.persistence}))}function $w(t){return Kw(t).then((function(t){return t.bh}))}function Jw(t){return Yw(t).then((function(t){return t.yl}))}function Zw(t){return Yw(t).then((function(t){return t._a}))}function tE(t){return si(this,void 0,void 0,(function(){var e,n;return ai(this,(function(r){switch(r.label){case 0:return[4,Yw(t)];case 1:return e=r.sent(),[2,((n=e.gl).jh=pb.bind(null,e._a),n.Hh=vb.bind(null,e._a),n)]}}))}))}function eE(t,e,n){var r=this;void 0===n&&(n={});var i=new zy;return t._s.Ps((function(){return si(r,void 0,void 0,(function(){var r;return ai(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Kb({next:function(o){e.Ps((function(){return nb(t,s)}));var a=o.docs.has(n);!a&&o.fromCache?i.reject(new Ip(Ep.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Ip(Ep.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new sb(qd(n.path),o,{includeMetadataChanges:!0,nl:!0});return eb(t,s)},[4,tE(t)];case 1:return[2,r.apply(void 0,[o.sent(),t._s,e,n,i])]}}))}))})),i.promise}function nE(t,e,n){var r=this;void 0===n&&(n={});var i=new zy;return t._s.Ps((function(){return si(r,void 0,void 0,(function(){var r;return ai(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Kb({next:function(n){e.Ps((function(){return nb(t,s)})),n.fromCache&&"server"===r.source?i.reject(new Ip(Ep.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new sb(n,o,{includeMetadataChanges:!0,nl:!0});return eb(t,s)},[4,tE(t)];case 1:return[2,r.apply(void 0,[o.sent(),t._s,e,n,i])]}}))}))})),i.promise}var rE=function(){function t(){var t=this;this.Rf=Promise.resolve(),this.Pf=[],this.yf=!1,this.gf=[],this.Vf=null,this.pf=!1,this.bf=[],this.Gu=new w_(this,"async_queue_retry"),this.vf=function(){var e=__();e&&cp("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Gu.qu()};var e=__();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.vf)}return Object.defineProperty(t.prototype,"wf",{get:function(){return this.yf},enumerable:!1,configurable:!0}),t.prototype.Ps=function(t){this.enqueue(t)},t.prototype.Tf=function(t){this.Sf(),this.Df(t)},t.prototype.Ef=function(){if(!this.yf){this.yf=!0;var t=__();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.vf)}},t.prototype.enqueue=function(t){return this.Sf(),this.yf?new Promise((function(t){})):this.Df(t)},t.prototype.po=function(t){var e=this;this.Ps((function(){return e.Pf.push(t),e.Cf()}))},t.prototype.Cf=function(){return si(this,void 0,void 0,(function(){var t,e=this;return ai(this,(function(n){switch(n.label){case 0:if(0===this.Pf.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Pf[0]()];case 2:return n.sent(),this.Pf.shift(),this.Gu.reset(),[3,4];case 3:if(!Jy(t=n.sent()))throw t;return cp("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Pf.length>0&&this.Gu.Lu((function(){return e.Cf()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Df=function(t){var e=this,n=this.Rf.then((function(){return e.pf=!0,t().catch((function(t){throw e.Vf=t,e.pf=!1,hp("INTERNAL UNHANDLED ERROR: ",(r=(n=t).message||"",n.stack&&(r=n.stack.includes(n.message)?n.stack:n.message+"\n"+n.stack),r)),t;var n,r})).then((function(t){return e.pf=!1,t}))}));return this.Rf=n,n},t.prototype.Tr=function(t,e,n){var r=this;this.Sf(),this.bf.indexOf(t)>-1&&(e=0);var i=rg.Ts(this,t,e,n,(function(t){return r.xf(t)}));return this.gf.push(i),i},t.prototype.Sf=function(){this.Vf&&pp()},t.prototype.Af=function(){},t.prototype.Nf=function(){return si(this,void 0,void 0,(function(){var t;return ai(this,(function(e){switch(e.label){case 0:return[4,t=this.Rf];case 1:e.sent(),e.label=2;case 2:if(t!==this.Rf)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.$f=function(t){for(var e=0,n=this.gf;e<n.length;e++)if(n[e].fs===t)return!0;return!1},t.prototype.Ff=function(t){var e=this;return this.Nf().then((function(){e.gf.sort((function(t,e){return t.ds-e.ds}));for(var n=0,r=e.gf;n<r.length;n++){var i=r[n];if(i.Rs(),"all"!==t&&i.fs===t)break}return e.Nf()}))},t.prototype.Of=function(t){this.bf.push(t)},t.prototype.xf=function(t){var e=this.gf.indexOf(t);this.gf.splice(e,1)},t}();function iE(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var oE=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Bf=new rE,r.w_="name"in e?e.name:"[DEFAULT]",r}return ii(e,t),e.prototype.b_=function(){return this.qf||aE(this),this.qf.terminate()},e}(uw);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sE(t){return t.qf||aE(t),t.qf.df(),t.qf}function aE(t){var e,n,r,i=t.p_(),o=(e=t.I_,n=t.w_,new op(e,n,(r=i).host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling));t.qf=new Gw(t.m_,t.Bf,o)}function uE(t,e,n){var r=this,i=new zy;return t._s.enqueue((function(){return si(r,void 0,void 0,(function(){var r;return ai(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,zw(t,n)];case 1:return o.sent(),[4,Qw(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!("FirebaseError"===(s=r=o.sent()).name?s.code===Ep.FAILED_PRECONDITION||s.code===Ep.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&s instanceof DOMException)||22===s.code||20===s.code||11===s.code))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}var s}))}))})).then((function(){return i.promise}))}function cE(t){if(t.R_||t.P_)throw new Ip(Ep.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hE=function(){function t(){}return t.prototype.Uf=function(t,e){switch(void 0===e&&(e="none"),Zp(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Gp(t.integerValue||t.doubleValue);case 3:return this.Qf(t.timestampValue);case 4:return this.Kf(t,e);case 5:return t.stringValue;case 6:return this.Wf(zp(t.bytesValue));case 7:return this.jf(t.referenceValue);case 8:return this.Gf(t.geoPointValue);case 9:return this.zf(t.arrayValue,e);case 10:return this.Hf(t.mapValue,e);default:throw pp()}},t.prototype.Hf=function(t,e){var n=this,r={};return jp(t.fields||{},(function(t,i){r[t]=n.Uf(i,e)})),r},t.prototype.Gf=function(t){return new yw(Gp(t.latitude),Gp(t.longitude))},t.prototype.zf=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.Uf(t,e)}))},t.prototype.Kf=function(t,e){switch(e){case"previous":var n=Kp(t);return null==n?null:this.Uf(n,e);case"estimate":return this.Qf(Yp(t));default:return null}},t.prototype.Qf=function(t){var e=Hp(t);return new xp(e.seconds,e.nanos)},t.prototype.Jf=function(t,e){var n=Lp.ot(t);dp(Gy(n));var r=new sp(n.get(1),n.get(3)),i=new Vp(n.Y(5));return r.isEqual(e)||hp("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}(),lE=function(){function t(t,e,n,r,i){this.Yf=t,this.Xf=e,this.S_=n,this.Zf=r,this.v_=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new cw(this.Yf,this.v_,this.S_)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this.Zf},t.prototype.data=function(){if(this.Zf){if(this.v_){var t=new fE(this.Yf,this.Xf,this.S_,this.Zf,null);return this.v_.fromFirestore(t)}return this.Xf.Uf(this.Zf.bt())}},t.prototype.get=function(t){if(this.Zf){var e=this.Zf.data().field(pE("DocumentSnapshot.get",t));if(null!==e)return this.Xf.Uf(e)}},t}(),fE=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ii(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(lE);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pE(t,e){return"string"==typeof e?jw(t,e):e instanceof $b?e.d_.f_:e.f_}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(t){if(Wd(t)&&0===t.xt.length)throw new Ip(Ep.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var vE=function(){};function yE(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o.td(t)}return t}var gE=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).ed=e,i.nd=n,i.sd=r,i.type="where",i}return ii(e,t),e.prototype.td=function(t){var e,n,r,i=Iw(t.firestore),o=function(t,e,n,r,i,o,s){var a;if(i.ut()){if("array-contains"===o||"array-contains-any"===o)throw new Ip(Ep.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){TE(s,o);for(var u=[],c=0,h=s;c<h.length;c++){var l=h[c];u.push(IE(r,t,l))}a={arrayValue:{values:u}}}else a=IE(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||TE(s,o),a=Rw(n,"where",s,"in"===o||"not-in"===o);var f=Td.create(i,o,a);return function(t,e){if(e.Ct()){var n=Gd(t);if(null!==n&&!n.isEqual(e.field))throw new Ip(Ep.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Hd(t);null!==r&&SE(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new Ip(Ep.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new Ip(Ep.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(t.C_,0,i,t.firestore.I_,this.ed,this.nd,this.sd);return new hw(t.firestore,t.v_,(e=t.C_,n=o,r=e.filters.concat([n]),new Ud(e.path,e.collectionGroup,e.xt.slice(),r,e.limit,e.limitType,e.startAt,e.endAt)))},e}(vE),mE=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ed=e,r.rd=n,r.type="orderBy",r}return ii(e,t),e.prototype.td=function(t){var e,n,r,i=function(t,e,n){if(null!==t.startAt)throw new Ip(Ep.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Ip(Ep.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Ld(e,n);return function(t,e){if(null===Hd(t)){var n=Gd(t);null!==n&&SE(t,n,e.field)}}(t,r),r}(t.C_,this.ed,this.rd);return new hw(t.firestore,t.v_,(e=t.C_,n=i,r=e.xt.concat([n]),new Ud(e.path,e.collectionGroup,r,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)))},e}(vE),_E=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.od=n,i.ad=r,i}return ii(e,t),e.prototype.td=function(t){return new hw(t.firestore,t.v_,Yd(t.C_,this.od,this.ad))},e}(vE),bE=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ud=n,i.hd=r,i}return ii(e,t),e.prototype.td=function(t){var e,n,r=EE(t,this.type,this.ud,this.hd);return new hw(t.firestore,t.v_,(e=t.C_,n=r,new Ud(e.path,e.collectionGroup,e.xt.slice(),e.filters.slice(),e.limit,e.limitType,n,e.endAt)))},e}(vE),wE=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ud=n,i.hd=r,i}return ii(e,t),e.prototype.td=function(t){var e,n,r=EE(t,this.type,this.ud,this.hd);return new hw(t.firestore,t.v_,(e=t.C_,n=r,new Ud(e.path,e.collectionGroup,e.xt.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,n)))},e}(vE);function EE(t,e,n,r){if(n[0]instanceof $b&&(n[0]=n[0].d_),n[0]instanceof lE)return function(t,e,n,r,i){if(!r)throw new Ip(Ep.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=Qd(t);s<a.length;s++){var u=a[s];if(u.field.ut())o.push(sd(e,r.key));else{var c=r.field(u.field);if(Qp(c))throw new Ip(Ep.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=u.field.rt();throw new Ip(Ep.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Rd(o,i)}(t.C_,t.firestore.I_,e,n[0].Zf,r);var i=Iw(t.firestore);return function(t,e,n,r,i,o){var s=t.xt;if(i.length>s.length)throw new Ip(Ep.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.ut()){if("string"!=typeof c)throw new Ip(Ep.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!zd(t)&&-1!==c.indexOf("/"))throw new Ip(Ep.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(Lp.ot(c));if(!Vp.wt(h))throw new Ip(Ep.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var l=new Vp(h);a.push(sd(e,l))}else{var f=Rw(n,r,c);a.push(f)}}return new Rd(a,o)}(t.C_,t.firestore.I_,i,e,n,r)}function IE(t,e,n){if(n instanceof $b&&(n=n.d_),"string"==typeof n){if(""===n)throw new Ip(Ep.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!zd(e)&&-1!==n.indexOf("/"))throw new Ip(Ep.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Lp.ot(n));if(!Vp.wt(r))throw new Ip(Ep.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return sd(t,new Vp(r))}if(n instanceof cw)return sd(t,n.S_);throw new Ip(Ep.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+rw(n)+".")}function TE(t,e){if(!Array.isArray(t)||0===t.length)throw new Ip(Ep.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Ip(Ep.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function SE(t,e,n){if(!n.isEqual(e))throw new Ip(Ep.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CE(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var NE=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return ii(e,t),e.prototype.Wf=function(t){return new Tp(t)},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return new cw(this.firestore,null,e)},e}(hE),AE=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),kE=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this).Yf=e,a.ld=e,a.metadata=o,a}return ii(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this.Zf){if(this.v_){var e=new PE(this.Yf,this.Xf,this.S_,this.Zf,this.metadata,null);return this.v_.fromFirestore(e,t)}return this.Xf.Uf(this.Zf.bt(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this.Zf){var n=this.Zf.data().field(pE("DocumentSnapshot.get",t));if(null!==n)return this.Xf.Uf(n,e.serverTimestamps)}},e}(lE),PE=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ii(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(kE),OE=function(){function t(t,e,n,r){this.Yf=t,this.Xf=e,this._d=r,this.metadata=new AE(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._d.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._d.docs.forEach((function(r){t.call(e,new PE(n.Yf,n.Xf,r.key,r,new AE(n._d.De.has(r.key),n._d.fromCache),n.query.v_))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._d.xe)throw new Ip(Ep.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.fd&&this.dd===e||(this.fd=function(t,e){if(t._d.Se.et()){var n=0;return t._d.docChanges.map((function(e){var r=new PE(t.Yf,t.Xf,e.doc.key,e.doc,new AE(t._d.De.has(e.doc.key),t._d.fromCache),t.query.v_);return e.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=t._d.Se;return t._d.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new PE(t.Yf,t.Xf,e.doc.key,e.doc,new AE(t._d.De.has(e.doc.key),t._d.fromCache),t.query.v_),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:xE(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this.dd=e),this.fd},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xE(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pp()}}function RE(t,e){return t instanceof kE&&e instanceof kE?t.Yf===e.Yf&&t.S_.isEqual(e.S_)&&(null===t.Zf?null===e.Zf:t.Zf.isEqual(e.Zf))&&t.v_===e.v_:t instanceof OE&&e instanceof OE&&t.Yf===e.Yf&&vw(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._d.isEqual(e._d)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var DE=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return ii(e,t),e.prototype.Wf=function(t){return new Tp(t)},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return new cw(this.firestore,null,e)},e}(hE);function LE(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=iw(t,cw);var o=iw(t.firestore,oE),s=Iw(o);return e instanceof $b&&(e=e.d_),FE(o,[("string"==typeof e||e instanceof Yb?xw(s,"updateDoc",t.S_,e,n,r):Ow(s,"updateDoc",t.S_,e)).F_(t.S_,bv.exists(!0))])}function ME(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t instanceof $b&&(t=t.d_);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||iE(i[a])||(s=i[a],a++);var u,c,h,l={includeMetadataChanges:s.includeMetadataChanges};if(iE(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof cw)c=iw(t.firestore,oE),h=qd(t.S_.path),u={next:function(e){i[a]&&i[a](VE(c,t,e))},error:i[a+1],complete:i[a+2]};else{var p=iw(t,hw);c=iw(p.firestore,oE),h=p.C_;var d=new DE(c);u={next:function(t){i[a]&&i[a](new OE(c,d,p,t))},error:i[a+1],complete:i[a+2]},dE(t.C_)}return function(t,e,n,r){var i=this,o=new Kb(r),s=new sb(e,o,n);return t._s.Ps((function(){return si(i,void 0,void 0,(function(){var e;return ai(this,(function(n){switch(n.label){case 0:return e=eb,[4,tE(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){o.i_(),t._s.Ps((function(){return si(i,void 0,void 0,(function(){var e;return ai(this,(function(n){switch(n.label){case 0:return e=nb,[4,tE(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}(sE(c),h,l,u)}function FE(t,e){return function(t,e){var n=this,r=new zy;return t._s.Ps((function(){return si(n,void 0,void 0,(function(){var n;return ai(this,(function(i){switch(i.label){case 0:return n=yb,[4,Zw(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(sE(t),e)}function VE(t,e,n){var r=n.docs.get(e.S_),i=new DE(t);return new kE(t,i,e.S_,r,new AE(n.hasPendingWrites,n.fromCache),e.v_)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var UE=function(){function t(t,e){this.Yf=t,this.wd=e,this.Ed=[],this.Td=!1,this.Id=Iw(t)}return t.prototype.set=function(t,e,n){this.md();var r=jE(t,this.Yf),i=CE(r.v_,e,n),o=Tw(this.Id,"WriteBatch.set",r.S_,i,null!==r.v_,n);return this.Ed.push(o.F_(r.S_,bv.Kt())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.md();var o,s=jE(t,this.Yf);return e instanceof $b&&(e=e.d_),o="string"==typeof e||e instanceof Yb?xw(this.Id,"WriteBatch.update",s.S_,e,n,r):Ow(this.Id,"WriteBatch.update",s.S_,e),this.Ed.push(o.F_(s.S_,bv.exists(!0))),this},t.prototype.delete=function(t){this.md();var e=jE(t,this.Yf);return this.Ed=this.Ed.concat(new Mv(e.S_,bv.Kt())),this},t.prototype.commit=function(){return this.md(),this.Td=!0,this.Ed.length>0?this.wd(this.Ed):Promise.resolve()},t.prototype.md=function(){if(this.Td)throw new Ip(Ep.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function jE(t,e){if(t instanceof $b&&(t=t.d_),t.firestore!==e)throw new Ip(Ep.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qE=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Yf=e,r}return ii(e,t),e.prototype.get=function(e){var n=this,r=jE(e,this.Yf),i=new DE(this.Yf);return t.prototype.get.call(this,e).then((function(t){return new kE(n.Yf,i,r.S_,t.Zf,new AE(!1,!1),r.v_)}))},e}(function(){function t(t,e){this.Yf=t,this.Ad=e,this.Id=Iw(t)}return t.prototype.get=function(t){var e=this,n=jE(t,this.Yf),r=new NE(this.Yf);return this.Ad.ef([n.S_]).then((function(t){if(!t||1!==t.length)return pp();var i=t[0];if(i instanceof gd)return new lE(e.Yf,r,n.S_,null,n.v_);if(i instanceof yd)return new lE(e.Yf,r,i.key,i,n.v_);throw pp()}))},t.prototype.set=function(t,e,n){var r=jE(t,this.Yf),i=CE(r.v_,e,n),o=Tw(this.Id,"Transaction.set",r.S_,i,null!==r.v_,n);return this.Ad.set(r.S_,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=jE(t,this.Yf);return e instanceof $b&&(e=e.d_),o="string"==typeof e||e instanceof Yb?xw(this.Id,"Transaction.update",s.S_,e,n,r):Ow(this.Id,"Transaction.update",s.S_,e),this.Ad.update(s.S_,o),this},t.prototype.delete=function(t){var e=jE(t,this.Yf);return this.Ad.delete(e.S_),this},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BE(){if("undefined"==typeof Uint8Array)throw new Ip(Ep.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function WE(){if("undefined"==typeof atob)throw new Ip(Ep.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var HE=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ii(e,t),e.fromBase64String=function(t){return WE(),new e(Tp.fromBase64String(t))},e.fromUint8Array=function(t){return BE(),new e(Tp.fromUint8Array(t))},e.prototype.toBase64=function(){return WE(),this.d_.toBase64()},e.prototype.toUint8Array=function(){return BE(),this.d_.toUint8Array()},e.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}($b),GE=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){cE(t=iw(t,oE));var n=sE(t),r=t.p_(),i=new Qb;return uE(n,i,new Gb(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t.d_,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){cE(t=iw(t,oE));var e=sE(t),n=t.p_(),r=new Qb;return uE(e,r,new zb(r,n.cacheSizeBytes))}(t.d_)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t.R_&&!t.P_)throw new Ip(Ep.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new zy;return t.Bf.Tf((function(){return si(e,void 0,void 0,(function(){var e;return ai(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return si(this,void 0,void 0,(function(){var e;return ai(this,(function(n){switch(n.label){case 0:return Yy.Kn()?(e=t+"main",[4,Yy.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(Pm(t.I_,t.w_))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t.d_)},t}(),zE=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).Rd=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof sp||(i.Pd=e),i}return ii(e,t),Object.defineProperty(e.prototype,"I_",{get:function(){return this.d_.I_},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this.d_.V_()),t)).merge,this.d_.g_(t)},e.prototype.useEmulator=function(t,e){var n,r,i,o;n=this.d_,r=t,i=e,"firestore.googleapis.com"!==(o=(n=iw(n,uw)).V_()).host&&o.host!==r&&lp("Host has been set in both settings() and useEmulator(), emulator host will be used"),n.g_(Object.assign(Object.assign({},o),{host:r+":"+i,ssl:!1}))},e.prototype.enableNetwork=function(){return function(t){var e=this;return t._s.enqueue((function(){return si(e,void 0,void 0,(function(){var e,n;return ai(this,(function(r){switch(r.label){case 0:return[4,Xw(t)];case 1:return e=r.sent(),[4,Jw(t)];case 2:return n=r.sent(),[2,(e.yo(!0),i=n,o=vp(i),o.Nh.delete(0),A_(o))]}var i,o}))}))}))}(sE(iw(this.d_,oE)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t._s.enqueue((function(){return si(e,void 0,void 0,(function(){var e,n;return ai(this,(function(r){switch(r.label){case 0:return[4,Xw(t)];case 1:return e=r.sent(),[4,Jw(t)];case 2:return n=r.sent(),[2,(e.yo(!1),function(t){return si(this,void 0,void 0,(function(){var e;return ai(this,(function(n){switch(n.label){case 0:return(e=vp(t)).Nh.add(0),[4,k_(e)];case 1:return n.sent(),e.Oh.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(sE(iw(this.d_,oE)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&tw("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Rd.enableMultiTabIndexedDbPersistence(this):this.Rd.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Rd.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.Pd&&(this.Pd._removeServiceInstance("firestore"),this.Pd._removeServiceInstance("firestore-exp")),this.d_._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new zy;return t._s.Ps((function(){return si(e,void 0,void 0,(function(){var e;return ai(this,(function(r){switch(r.label){case 0:return e=Eb,[4,Zw(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(sE(iw(this.d_,oE)))},e.prototype.onSnapshotsInSync=function(t){return e=this.d_,n=t,function(t,e){var n=this,r=new Kb(e);return t._s.Ps((function(){return si(n,void 0,void 0,(function(){var e;return ai(this,(function(n){switch(n.label){case 0:return e=function(t,e){vp(t).Wh.add(e),e.next()},[4,tE(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.i_(),t._s.Ps((function(){return si(n,void 0,void 0,(function(){var e;return ai(this,(function(n){switch(n.label){case 0:return e=function(t,e){vp(t).Wh.delete(e)},[4,tE(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(sE(e=iw(e,oE)),iE(n)?n:{next:n});var e,n},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.Pd)throw new Ip(Ep.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Pd},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new sI(this,fw(this.d_,t))}catch(e){throw JE(e,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new $E(this,pw(this.d_,t))}catch(e){throw JE(e,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new rI(this,function(t,e){if(t=iw(t,uw),Jb("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ip(Ep.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new hw(t,null,(n=e,new Ud(Lp.ct(),n)));var n}(this.d_,t))}catch(e){throw JE(e,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e,n=this;return function(t,e){var n=this,r=new zy;return t._s.Ps((function(){return si(n,void 0,void 0,(function(){var n;return ai(this,(function(i){switch(i.label){case 0:return[4,(o=t,Yw(o).then((function(t){return t.Sh})))];case 1:return n=i.sent(),new Hw(t._s,n,e,r).run(),[2]}var o}))}))})),r.promise}(sE(e=this.d_),(function(r){return function(e){return t(new KE(n,e))}(new qE(e,r))}))},e.prototype.batch=function(){var t=this;return sE(this.d_),new YE(new UE(this.d_,(function(e){return FE(t.d_,e)})))},e.prototype.loadBundle=function(t){throw new Ip(Ep.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new Ip(Ep.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}($b),QE=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return ii(e,t),e.prototype.Wf=function(t){return new HE(new Tp(t))},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return $E.yd(e,this.firestore,null)},e}(hE);var KE=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r.Xf=new QE(e),r}return ii(e,t),e.prototype.get=function(t){var e=this,n=aI(t);return this.d_.get(n).then((function(t){return new eI(e.Yf,new kE(e.Yf.d_,e.Xf,t.S_,t.Zf,t.metadata,n.v_))}))},e.prototype.set=function(t,e,n){var r=aI(t);return n?(Zb("Transaction.set",n),this.d_.set(r,e,n)):this.d_.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=aI(t);return 2===arguments.length?this.d_.update(s,e):(r=this.d_).update.apply(r,li([s,e,n],i)),this},e.prototype.delete=function(t){var e=aI(t);return this.d_.delete(e),this},e}($b),YE=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ii(e,t),e.prototype.set=function(t,e,n){var r=aI(t);return n?(Zb("WriteBatch.set",n),this.d_.set(r,e,n)):this.d_.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=aI(t);return 2===arguments.length?this.d_.update(s,e):(r=this.d_).update.apply(r,li([s,e,n],i)),this},e.prototype.delete=function(t){var e=aI(t);return this.d_.delete(e),this},e.prototype.commit=function(){return this.d_.commit()},e}($b),XE=function(t){function e(e,n,r){var i=this;return(i=t.call(this,r)||this).Yf=e,i.Xf=n,i}return ii(e,t),e.prototype.fromFirestore=function(t,e){var n=new PE(this.Yf.d_,this.Xf,t.S_,t.Zf,t.metadata,null);return this.d_.fromFirestore(new nI(this.Yf,n),null!=e?e:{})},e.prototype.toFirestore=function(t,e){return e?this.d_.toFirestore(t,e):this.d_.toFirestore(t)},e.gd=function(t,n){var r=e.Vd,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new QE(t),n),i.set(n,o)),o},e}($b);XE.Vd=new WeakMap;var $E=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Xf=new QE(e),r}return ii(e,t),e.pd=function(t,n,r){if(t.length%2!=0)throw new Ip(Ep.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.rt()+" has "+t.length);return new e(n,new cw(n.d_,r,new Vp(t)))},e.yd=function(t,n,r){return new e(n,new cw(n.d_,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new sI(this.firestore,this.d_.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.d_.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new sI(this.firestore,fw(this.d_,t))}catch(e){throw JE(e,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof $b&&(t=t.d_),t instanceof cw&&dw(this.d_,t)},e.prototype.set=function(t,e){e=Zb("DocumentReference.set",e);try{return function(t,e,n){t=iw(t,cw);var r=iw(t.firestore,oE),i=CE(t.v_,e,n);return FE(r,[Tw(Iw(r),"setDoc",t.S_,i,null!==t.v_,n).F_(t.S_,bv.Kt())])}(this.d_,t,e)}catch(n){throw JE(n,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?LE(this.d_,t):LE.apply(void 0,li([this.d_,t,e],n))}catch(i){throw JE(i,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return FE(iw((t=this.d_).firestore,oE),[new Mv(t.S_,bv.Kt())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=ZE(e),i=tI(e,(function(e){return new eI(t.firestore,new kE(t.firestore.d_,t.Xf,e.S_,e.Zf,e.metadata,t.d_.v_))}));return ME(this.d_,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=iw(t,cw);var e=iw(t.firestore,oE),n=sE(e),r=new DE(e);return function(t,e){var n=this,r=new zy;return t._s.Ps((function(){return si(n,void 0,void 0,(function(){var n;return ai(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return si(this,void 0,void 0,(function(){var r,i;return ai(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,(s=t,a=e,u=vp(s),u.persistence.runTransaction("read document","readonly",(function(t){return u.Tc.Ho(t,a)})))];case 1:return(i=o.sent())instanceof yd?n.resolve(i):i instanceof gd?n.resolve(null):n.reject(new Ip(Ep.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=ig(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}var s,a,u}))}))},[4,$w(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t.S_).then((function(n){return new kE(e,r,t.S_,n,new AE(n instanceof yd&&n.Vt,!0),t.v_)}))}(this.d_):"server"===(null==t?void 0:t.source)?function(t){t=iw(t,cw);var e=iw(t.firestore,oE);return eE(sE(e),t.S_,{source:"server"}).then((function(n){return VE(e,t,n)}))}(this.d_):function(t){t=iw(t,cw);var e=iw(t.firestore,oE);return eE(sE(e),t.S_).then((function(n){return VE(e,t,n)}))}(this.d_)).then((function(t){return new eI(e.firestore,new kE(e.firestore.d_,e.Xf,t.S_,t.Zf,t.metadata,e.d_.v_))}))},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(XE.gd(this.firestore,t)))},e}($b);function JE(t,e,n){return t.message=t.message.replace(e,n),t}function ZE(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!iE(r))return r}return{}}function tI(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=iE(t[0])?t[0]:iE(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var eI=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return ii(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new $E(this.Yf,this.d_.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.d_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this.d_.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this.d_.data(t)},e.prototype.get=function(t,e){return this.d_.get(t,e)},e.prototype.isEqual=function(t){return RE(this.d_,t.d_)},e}($b),nI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ii(e,t),e.prototype.data=function(t){return this.d_.data(t)},e}(eI),rI=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Xf=new QE(e),r}return ii(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,yE(this.d_,(o=r,s=n,a=pE("where",i=t),new gE(a,s,o))))}catch(i){throw JE(i,/(orderBy|where)\(\)/,"Query.$1()")}var i,o,s,a},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,yE(this.d_,function(t,e){void 0===e&&(e="asc");var n=e,r=pE("orderBy",t);return new mE(r,n)}(t,n)))}catch(r){throw JE(r,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,yE(this.d_,(ow("limit",n=t),new _E("limit",n,"F"))))}catch(n){throw JE(n,"limit()","Query.limit()")}var n},e.prototype.limitToLast=function(t){try{return new e(this.firestore,yE(this.d_,(ow("limitToLast",n=t),new _E("limitToLast",n,"L"))))}catch(n){throw JE(n,"limitToLast()","Query.limitToLast()")}var n},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,yE(this.d_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new bE("startAt",t,!0)}.apply(void 0,t)))}catch(r){throw JE(r,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,yE(this.d_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new bE("startAfter",t,!1)}.apply(void 0,t)))}catch(r){throw JE(r,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,yE(this.d_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new wE("endBefore",t,!0)}.apply(void 0,t)))}catch(r){throw JE(r,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,yE(this.d_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new wE("endAt",t,!1)}.apply(void 0,t)))}catch(r){throw JE(r,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return vw(this.d_,t.d_)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=iw(t,hw);var e=iw(t.firestore,oE),n=sE(e),r=new DE(e);return function(t,e){var n=this,r=new zy;return t._s.Ps((function(){return si(n,void 0,void 0,(function(){var n;return ai(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return si(this,void 0,void 0,(function(){var r,i,o,s,a;return ai(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Wm(t,e,!0)];case 1:return a=u.sent(),r=new cb(e,a.Rc),i=r.fl(a.documents),o=r.wi(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=ig(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}}))}))},[4,$w(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t.C_).then((function(n){return new OE(e,r,t,n)}))}(this.d_):"server"===(null==t?void 0:t.source)?function(t){t=iw(t,hw);var e=iw(t.firestore,oE),n=sE(e),r=new DE(e);return nE(n,t.C_,{source:"server"}).then((function(n){return new OE(e,r,t,n)}))}(this.d_):function(t){t=iw(t,hw);var e=iw(t.firestore,oE),n=sE(e),r=new DE(e);return dE(t.C_),nE(n,t.C_).then((function(n){return new OE(e,r,t,n)}))}(this.d_)).then((function(t){return new oI(e.firestore,new OE(e.firestore.d_,e.Xf,e.d_,t._d))}))},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=ZE(e),i=tI(e,(function(e){return new oI(t.firestore,new OE(t.firestore.d_,t.Xf,t.d_,e._d))}));return ME(this.d_,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(XE.gd(this.firestore,t)))},e}($b),iI=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return ii(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this.d_.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new nI(this.Yf,this.d_.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this.d_.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this.d_.newIndex},enumerable:!1,configurable:!0}),e}($b),oI=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return ii(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new rI(this.Yf,this.d_.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.d_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.d_.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this.d_.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this.d_.docs.map((function(e){return new nI(t.Yf,e)}))},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this.d_.docChanges(t).map((function(t){return new iI(e.Yf,t)}))},e.prototype.forEach=function(t,e){var n=this;this.d_.forEach((function(r){t.call(e,new nI(n.Yf,r))}))},e.prototype.isEqual=function(t){return RE(this.d_,t.d_)},e}($b),sI=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r.d_=n,r}return ii(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.d_.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.d_.parent;return t?new $E(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new $E(this.firestore,void 0===t?pw(this.d_):pw(this.d_,t))}catch(e){throw JE(e,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e,n,r,i,o,s=this;return(e=this.d_,n=t,r=iw(e.firestore,oE),i=pw(e),o=CE(e.v_,n),FE(r,[Tw(Iw(e.firestore),"addDoc",i.S_,o,null!==e.v_,{}).F_(i.S_,bv.exists(!1))]).then((function(){return i}))).then((function(t){return new $E(s.firestore,t)}))},e.prototype.isEqual=function(t){return dw(this.d_,t.d_)},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(XE.gd(this.firestore,t)))},e}(rI);function aI(t){return t instanceof $b&&(t=t.d_),iw(t,cw)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var uI,cI=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(Yb.bind.apply(Yb,li([void 0],e))))||this}return ii(e,t),e.documentId=function(){return new e(Fp.ht().rt())},e.prototype.isEqual=function(t){return t instanceof $b&&(t=t.d_),t instanceof Yb&&this.d_.f_.isEqual(t.f_)},e}($b),hI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ii(e,t),e.serverTimestamp=function(){var t=new Nw("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new Sw("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Aw("arrayUnion",t)}.apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new kw("arrayRemove",t)}.apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=new Pw("increment",t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},e}($b),lI={Firestore:zE,GeoPoint:yw,Timestamp:xp,Blob:HE,Transaction:KE,WriteBatch:YE,DocumentReference:$E,DocumentSnapshot:eI,Query:rI,QueryDocumentSnapshot:nI,QuerySnapshot:oI,CollectionReference:sI,FieldPath:cI,FieldValue:hI,setLogLevel:function(t){var e;e=t,ap.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};(uI=Eo).INTERNAL.registerComponent(new Qi("firestore",(function(t){return function(t,e){return new zE(t,new oE(t,e),new GE)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},lI))),uI.registerVersion("@firebase/firestore","2.1.6");
/*!
  * vue-router v4.0.3
  * (c) 2021 Eduardo San Martin Morote
  * @license MIT
  */
const fI="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,pI=t=>fI?Symbol(t):"_vr_"+t,dI=pI("rvlm"),vI=pI("rvd"),yI=pI("r"),gI=pI("rl"),mI=pI("rvl"),_I="undefined"!=typeof window;const bI=Object.assign;function wI(t,e){const n={};for(const r in e){const i=e[r];n[r]=Array.isArray(i)?i.map(t):t(i)}return n}let EI=()=>{};const II=/\/$/;function TI(t,e,n="/"){let r,i={},o="",s="";const a=e.indexOf("?"),u=e.indexOf("#",a>-1?a:0);return a>-1&&(r=e.slice(0,a),o=e.slice(a+1,u>-1?u:e.length),i=t(o)),u>-1&&(r=r||e.slice(0,u),s=e.slice(u,e.length)),r=function(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/");let i,o,s=n.length-1;for(i=0;i<r.length;i++)if(o=r[i],1!==s&&"."!==o){if(".."!==o)break;s--}return n.slice(0,s).join("/")+"/"+r.slice(i-(i===r.length?1:0)).join("/")}(null!=r?r:e,n),{fullPath:r+(o&&"?")+o+s,path:r,query:i,hash:s}}function SI(t,e){return!e||t.toLowerCase().indexOf(e.toLowerCase())?t:t.slice(e.length)||"/"}function CI(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function NI(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(let n in t)if(!AI(t[n],e[n]))return!1;return!0}function AI(t,e){return Array.isArray(t)?kI(t,e):Array.isArray(e)?kI(e,t):t===e}function kI(t,e){return Array.isArray(e)?t.length===e.length&&t.every(((t,n)=>t===e[n])):1===t.length&&t[0]===e}var PI,OI,xI,RI;function DI(t){if(!t)if(_I){const e=document.querySelector("base");t=(t=e&&e.getAttribute("href")||"/").replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return"/"!==t[0]&&"#"!==t[0]&&(t="/"+t),t.replace(II,"")}(OI=PI||(PI={})).pop="pop",OI.push="push",(RI=xI||(xI={})).back="back",RI.forward="forward",RI.unknown="";const LI=/^[^#]+#/;function MI(t,e){return t.replace(LI,"#")+e}const FI=()=>({left:window.pageXOffset,top:window.pageYOffset});function VI(t){let e;if("el"in t){let n=t.el;const r="string"==typeof n&&n.startsWith("#"),i="string"==typeof n?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=function(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(null!=e.left?e.left:window.pageXOffset,null!=e.top?e.top:window.pageYOffset)}function UI(t,e){return(history.state?history.state.position-e:-1)+t}const jI=new Map;function qI(t,e){const{pathname:n,search:r,hash:i}=e;if(t.indexOf("#")>-1){let t=i.slice(1);return"/"!==t[0]&&(t="/"+t),SI(t,"")}return SI(n,t)+r+i}function BI(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?FI():null}}function WI(t){const{history:e,location:n}=window;let r={value:qI(t,n)},i={value:e.state};function o(r,o,s){const a=t.indexOf("#"),u=a>-1?(n.host&&document.querySelector("base")?t:t.slice(a))+r:location.protocol+"//"+location.host+t+r;try{e[s?"replaceState":"pushState"](o,"",u),i.value=o}catch(c){console.error(c),n[s?"replace":"assign"](u)}}return i.value||o(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0),{location:r,state:i,push:function(t,n){const s=bI({},i.value,e.state,{forward:t,scroll:FI()});o(s.current,s,!0),o(t,bI({},BI(r.value,t,null),{position:s.position+1},n),!1),r.value=t},replace:function(t,n){o(t,bI({},e.state,BI(i.value.back,t,i.value.forward,!0),n,{position:i.value.position}),!0),r.value=t}}}function HI(t){const e=WI(t=DI(t)),n=function(t,e,n,r){let i=[],o=[],s=null;const a=({state:o})=>{const a=qI(t,location),u=n.value,c=e.value;let h=0;if(o){if(n.value=a,e.value=o,s&&s===u)return void(s=null);h=c?o.position-c.position:0}else r(a);i.forEach((t=>{t(n.value,u,{delta:h,type:PI.pop,direction:h?h>0?xI.forward:xI.back:xI.unknown})}))};function u(){const{history:t}=window;t.state&&t.replaceState(bI({},t.state,{scroll:FI()}),"")}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u),{pauseListeners:function(){s=n.value},listen:function(t){i.push(t);const e=()=>{const e=i.indexOf(t);e>-1&&i.splice(e,1)};return o.push(e),e},destroy:function(){for(const t of o)t();o=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}}}(t,e.state,e.location,e.replace);const r=bI({location:"",base:t,go:function(t,e=!0){e||n.pauseListeners(),history.go(t)},createHref:MI.bind(null,t)},e,n);return Object.defineProperty(r,"location",{get:()=>e.location.value}),Object.defineProperty(r,"state",{get:()=>e.state.value}),r}function GI(t){return"string"==typeof t||"symbol"==typeof t}const zI={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},QI=pI("nf");var KI,YI;function XI(t,e){return bI(new Error,{type:t,[QI]:!0},e)}function $I(t,e){return t instanceof Error&&QI in t&&(null==e||!!(t.type&e))}(YI=KI||(KI={}))[YI.aborted=4]="aborted",YI[YI.cancelled=8]="cancelled",YI[YI.duplicated=16]="duplicated";const JI={sensitive:!1,strict:!1,start:!0,end:!0},ZI=/[.+*?^${}()[\]/\\]/g;function tT(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?1===t.length&&80===t[0]?-1:1:t.length>e.length?1===e.length&&80===e[0]?1:-1:0}function eT(t,e){let n=0;const r=t.score,i=e.score;for(;n<r.length&&n<i.length;){const t=tT(r[n],i[n]);if(t)return t;n++}return i.length-r.length}const nT={type:0,value:""},rT=/[a-zA-Z0-9_]/;function iT(t,e,n){const r=function(t,e){const n=bI({},JI,e);let r=[],i=n.start?"^":"";const o=[];for(const u of t){const t=u.length?[]:[90];n.strict&&!u.length&&(i+="/");for(let e=0;e<u.length;e++){const r=u[e];let s=40+(n.sensitive?.25:0);if(0===r.type)e||(i+="/"),i+=r.value.replace(ZI,"\\$&"),s+=40;else if(1===r.type){const{value:t,repeatable:n,optional:u,regexp:c}=r;o.push({name:t,repeatable:n,optional:u});const h=c||"[^/]+?";if("[^/]+?"!==h){s+=10;try{new RegExp(`(${h})`)}catch(a){throw new Error(`Invalid custom RegExp for param "${t}" (${h}): `+a.message)}}let l=n?`((?:${h})(?:/(?:${h}))*)`:`(${h})`;e||(l=u?`(?:/${l})`:"/"+l),u&&(l+="?"),i+=l,s+=20,u&&(s+=-8),n&&(s+=-20),".*"===h&&(s+=-50)}t.push(s)}r.push(t)}if(n.strict&&n.end){const t=r.length-1;r[t][r[t].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const s=new RegExp(i,n.sensitive?"":"i");return{re:s,score:r,keys:o,parse:function(t){const e=t.match(s),n={};if(!e)return null;for(let r=1;r<e.length;r++){const t=e[r]||"",i=o[r-1];n[i.name]=t&&i.repeatable?t.split("/"):t}return n},stringify:function(e){let n="",r=!1;for(const i of t){r&&n.endsWith("/")||(n+="/"),r=!1;for(const t of i)if(0===t.type)n+=t.value;else if(1===t.type){const{value:i,repeatable:o,optional:s}=t,a=i in e?e[i]:"";if(Array.isArray(a)&&!o)throw new Error(`Provided param "${i}" is an array but it is not repeatable (* or + modifiers)`);const u=Array.isArray(a)?a.join("/"):a;if(!u){if(!s)throw new Error(`Missing required param "${i}"`);n.endsWith("/")?n=n.slice(0,-1):r=!0}n+=u}}return n}}}(function(t){if(!t)return[[]];if("/"===t)return[[nT]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(t){throw new Error(`ERR (${n})/"${c}": ${t}`)}let n=0,r=n;const i=[];let o;function s(){o&&i.push(o),o=[]}let a,u=0,c="",h="";function l(){c&&(0===n?o.push({type:0,value:c}):1===n||2===n||3===n?(o.length>1&&("*"===a||"+"===a)&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:c,regexp:h,repeatable:"*"===a||"+"===a,optional:"*"===a||"?"===a})):e("Invalid state to consume buffer"),c="")}function f(){c+=a}for(;u<t.length;)if(a=t[u++],"\\"!==a||2===n)switch(n){case 0:"/"===a?(c&&l(),s()):":"===a?(l(),n=1):f();break;case 4:f(),n=r;break;case 1:"("===a?n=2:rT.test(a)?f():(l(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&u--);break;case 2:")"===a?"\\"==h[h.length-1]?h=h.slice(0,-1)+a:n=3:h+=a;break;case 3:l(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&u--,h="";break;default:e("Unknown state")}else r=n,n=4;return 2===n&&e(`Unfinished custom RegExp for param "${c}"`),l(),s(),i}(t.path),n),i=bI(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function oT(t,e){const n=[],r=new Map;function i(t,n,r){let a=!r,u=function(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:sT(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||{}:{default:t.component}}}(t);u.aliasOf=r&&r.record;const c=cT(e,t),h=[u];if("alias"in t){const e="string"==typeof t.alias?[t.alias]:t.alias;for(const t of e)h.push(bI({},u,{components:r?r.record.components:u.components,path:t,aliasOf:r?r.record:u}))}let l,f;for(const e of h){let{path:h}=e;if(n&&"/"!==h[0]){let t=n.record.path,r="/"===t[t.length-1]?"":"/";e.path=n.record.path+(h&&r+h)}if(l=iT(e,n,c),r?r.alias.push(l):(f=f||l,f!==l&&f.alias.push(l),a&&t.name&&!aT(l)&&o(t.name)),"children"in u){let t=u.children;for(let e=0;e<t.length;e++)i(t[e],l,r&&r.children[e])}r=r||l,s(l)}return f?()=>{o(f)}:EI}function o(t){if(GI(t)){const e=r.get(t);e&&(r.delete(t),n.splice(n.indexOf(e),1),e.children.forEach(o),e.alias.forEach(o))}else{let e=n.indexOf(t);e>-1&&(n.splice(e,1),t.record.name&&r.delete(t.record.name),t.children.forEach(o),t.alias.forEach(o))}}function s(t){let e=0;for(;e<n.length&&eT(t,n[e])>=0;)e++;n.splice(e,0,t),t.record.name&&!aT(t)&&r.set(t.record.name,t)}return e=cT({strict:!1,end:!0,sensitive:!1},e),t.forEach((t=>i(t))),{addRoute:i,resolve:function(t,e){let i,o,s,a={};if("name"in t&&t.name){if(i=r.get(t.name),!i)throw XI(1,{location:t});s=i.record.name,a=bI(function(t,e){let n={};for(let r of e)r in t&&(n[r]=t[r]);return n}(e.params,i.keys.filter((t=>!t.optional)).map((t=>t.name))),t.params),o=i.stringify(a)}else if("path"in t)o=t.path,i=n.find((t=>t.re.test(o))),i&&(a=i.parse(o),s=i.record.name);else{if(i=e.name?r.get(e.name):n.find((t=>t.re.test(e.path))),!i)throw XI(1,{location:t,currentLocation:e});s=i.record.name,a=bI({},e.params,t.params),o=i.stringify(a)}const u=[];let c=i;for(;c;)u.unshift(c.record),c=c.parent;return{name:s,path:o,params:a,matched:u,meta:uT(u)}},removeRoute:o,getRoutes:function(){return n},getRecordMatcher:function(t){return r.get(t)}}}function sT(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(let r in t.components)e[r]="boolean"==typeof n?n:n[r];return e}function aT(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function uT(t){return t.reduce(((t,e)=>bI(t,e.meta)),{})}function cT(t,e){let n={};for(let r in t)n[r]=r in e?e[r]:t[r];return n}const hT=/#/g,lT=/&/g,fT=/\//g,pT=/=/g,dT=/\?/g,vT=/\+/g,yT=/%5B/g,gT=/%5D/g,mT=/%5E/g,_T=/%60/g,bT=/%7B/g,wT=/%7C/g,ET=/%7D/g,IT=/%20/g;function TT(t){return encodeURI(""+t).replace(wT,"|").replace(yT,"[").replace(gT,"]")}function ST(t){return TT(t).replace(vT,"%2B").replace(IT,"+").replace(hT,"%23").replace(lT,"%26").replace(_T,"`").replace(bT,"{").replace(ET,"}").replace(mT,"^")}function CT(t){return function(t){return TT(t).replace(hT,"%23").replace(dT,"%3F")}(t).replace(fT,"%2F")}function NT(t){try{return decodeURIComponent(""+t)}catch(e){}return""+t}function AT(t){const e={};if(""===t||"?"===t)return e;const n=("?"===t[0]?t.slice(1):t).split("&");for(let r=0;r<n.length;++r){const t=n[r].replace(vT," ");let i=t.indexOf("="),o=NT(i<0?t:t.slice(0,i)),s=i<0?null:NT(t.slice(i+1));if(o in e){let t=e[o];Array.isArray(t)||(t=e[o]=[t]),t.push(s)}else e[o]=s}return e}function kT(t){let e="";for(let n in t){e.length&&(e+="&");const r=t[n];if(n=ST(n).replace(pT,"%3D"),null==r){void 0!==r&&(e+=n);continue}let i=Array.isArray(r)?r.map((t=>t&&ST(t))):[r&&ST(r)];for(let t=0;t<i.length;t++)e+=(t?"&":"")+n,null!=i[t]&&(e+="="+i[t])}return e}function PT(t){const e={};for(let n in t){let r=t[n];void 0!==r&&(e[n]=Array.isArray(r)?r.map((t=>null==t?null:""+t)):null==r?r:""+r)}return e}function OT(){let t=[];return{add:function(e){return t.push(e),()=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)}},list:()=>t,reset:function(){t=[]}}}function xT(t,e,n,r,i){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise(((s,a)=>{const u=t=>{var u;!1===t?a(XI(4,{from:n,to:e})):t instanceof Error?a(t):"string"==typeof(u=t)||u&&"object"==typeof u?a(XI(2,{from:e,to:t})):(o&&r.enterCallbacks[i]===o&&"function"==typeof t&&o.push(t),s())},c=t.call(r&&r.instances[i],e,n,u);let h=Promise.resolve(c);t.length<3&&(h=h.then(u)),h.catch((t=>a(t)))}))}function RT(t,e,n,r){const i=[];for(const s of t)for(const t in s.components){let a=s.components[t];if("beforeRouteEnter"===e||s.instances[t])if("object"==typeof(o=a)||"displayName"in o||"props"in o||"__vccOpts"in o){const o=(a.__vccOpts||a)[e];o&&i.push(xT(o,n,r,s,t))}else{let o=a();o=o.catch(console.error),i.push((()=>o.then((i=>{if(!i)return Promise.reject(new Error(`Couldn't resolve component "${t}" at "${s.path}"`));const o=(a=i).__esModule||fI&&"Module"===a[Symbol.toStringTag]?i.default:i;var a;s.components[t]=o;const u=o[e];return u&&xT(u,n,r,s,t)()}))))}}var o;return i}function DT(t){const e=rr(yI),n=rr(gI),r=Cr((()=>e.resolve(Jt(t.to)))),i=Cr((()=>{let{matched:t}=r.value,{length:e}=t;const i=t[e-1];let o=n.matched;if(!i||!o.length)return-1;let s=o.findIndex(CI.bind(null,i));if(s>-1)return s;let a=MT(t[e-2]);return e>1&&MT(i)===a&&o[o.length-1].path!==a?o.findIndex(CI.bind(null,t[e-2])):s})),o=Cr((()=>i.value>-1&&function(t,e){for(let n in e){let r=e[n],i=t[n];if("string"==typeof r){if(r!==i)return!1}else if(!Array.isArray(i)||i.length!==r.length||r.some(((t,e)=>t!==i[e])))return!1}return!0}(n.params,r.value.params))),s=Cr((()=>i.value>-1&&i.value===n.matched.length-1&&NI(n.params,r.value.params)));return{route:r,href:Cr((()=>r.value.href)),isActive:o,isExactActive:s,navigate:function(n={}){return function(t){if(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)return;if(t.defaultPrevented)return;if(void 0!==t.button&&0!==t.button)return;if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}t.preventDefault&&t.preventDefault();return!0}(n)?e[Jt(t.replace)?"replace":"push"](Jt(t.to)):Promise.resolve()}}}const LT=Tn({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},setup(t,{slots:e,attrs:n}){const r=qt(DT(t)),{options:i}=rr(yI),o=Cr((()=>({[FT(t.activeClass,i.linkActiveClass,"router-link-active")]:r.isActive,[FT(t.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive})));return()=>{const i=e.default&&e.default(r);return t.custom?i:Nr("a",bI({"aria-current":r.isExactActive?t.ariaCurrentValue:null,onClick:r.navigate,href:r.href},n,{class:o.value}),i)}}});function MT(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const FT=(t,e,n)=>null!=t?t:null!=e?e:n;function VT(t,e){if(!t)return null;const n=t(e);return 1===n.length?n[0]:n}const UT=Tn({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},setup(t,{attrs:e,slots:n}){const r=rr(mI),i=Cr((()=>t.route||r.value)),o=rr(vI,0),s=Cr((()=>i.value.matched[o]));nr(vI,o+1),nr(dI,s),nr(mI,i);const a=$t(u);var u;return an((()=>[a.value,s.value,t.name]),(([t,e,n],[r,i,o])=>{e&&(e.instances[n]=t,i&&i!==e&&t&&t===r&&(e.leaveGuards=i.leaveGuards,e.updateGuards=i.updateGuards)),!t||!e||i&&CI(e,i)&&r||(e.enterCallbacks[n]||[]).forEach((e=>e(t)))}),{flush:"post"}),()=>{const r=i.value,o=s.value,u=o&&o.components[t.name],c=t.name;if(!u)return VT(n.default,{Component:u,route:r});const h=o.props[t.name],l=h?!0===h?r.params:"function"==typeof h?h(r):h:null,f=Nr(u,bI({},l,e,{onVnodeUnmounted:t=>{t.component.isUnmounted&&(o.instances[c]=null)},ref:a}));return VT(n.default,{Component:f,route:r})||f}}});function jT(t){const e=oT(t.routes,t);let n=t.parseQuery||AT,r=t.stringifyQuery||kT,i=t.history;const o=OT(),s=OT(),a=OT(),u=$t(zI,!0);let c=zI;_I&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=wI.bind(null,(t=>""+t)),l=wI.bind(null,CT),f=wI.bind(null,NT);function p(t,o){if(o=bI({},o||u.value),"string"==typeof t){let r=TI(n,t,o.path),s=e.resolve({path:r.path},o),a=i.createHref(r.fullPath);return bI(r,s,{params:f(s.params),hash:NT(r.hash),redirectedFrom:void 0,href:a})}let s;"path"in t?s=bI({},t,{path:TI(n,t.path,o.path).path}):(s=bI({},t,{params:l(t.params)}),o.params=l(o.params));let a=e.resolve(s,o);const c=t.hash||"";a.params=h(f(a.params));const p=function(t,e){let n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}(r,bI({},t,{hash:(d=c,TT(d).replace(bT,"{").replace(ET,"}").replace(mT,"^")),path:a.path}));var d;let v=i.createHref(p);return bI({fullPath:p,hash:c,query:r===kT?PT(t.query):t.query},a,{redirectedFrom:void 0,href:v})}function d(t){return"string"==typeof t?TI(n,t,u.value.path):bI({},t)}function v(t,e){if(c!==t)return XI(8,{from:e,to:t})}function y(t){return m(t)}function g(t){const e=t.matched[t.matched.length-1];if(e&&e.redirect){const{redirect:n}=e;let r="function"==typeof n?n(t):n;return"string"==typeof r&&(r=r.indexOf("?")>-1||r.indexOf("#")>-1?r=d(r):{path:r}),bI({query:t.query,hash:t.hash,params:t.params},r)}}function m(t,e){const n=c=p(t),i=u.value,o=t.state,s=t.force,a=!0===t.replace,h=g(n);if(h)return m(bI(d(h),{state:o,force:s,replace:a}),e||n);const l=n;let f;return l.redirectedFrom=e,!s&&function(t,e,n){let r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&CI(e.matched[r],n.matched[i])&&NI(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}(r,i,n)&&(f=XI(16,{to:l,from:i}),P(i,i,!0,!1)),(f?Promise.resolve(f):b(l,i)).catch((t=>$I(t)?t:A(t))).then((t=>{if(t){if($I(t,2))return m(bI(d(t.to),{state:o,force:s,replace:a}),e||l)}else t=E(l,i,!0,a,o);return w(l,i,t),t}))}function _(t,e){const n=v(t,e);return n?Promise.reject(n):Promise.resolve()}function b(t,e){let n;const[r,i,a]=function(t,e){const n=[],r=[],i=[],o=Math.max(e.matched.length,t.matched.length);for(let s=0;s<o;s++){const o=e.matched[s];o&&(t.matched.indexOf(o)<0?n.push(o):r.push(o));const a=t.matched[s];a&&e.matched.indexOf(a)<0&&i.push(a)}return[n,r,i]}(t,e);n=RT(r.reverse(),"beforeRouteLeave",t,e);for(const o of r)o.leaveGuards.forEach((r=>{n.push(xT(r,t,e))}));const u=_.bind(null,t,e);return n.push(u),qT(n).then((()=>{n=[];for(const r of o.list())n.push(xT(r,t,e));return n.push(u),qT(n)})).then((()=>{n=RT(i,"beforeRouteUpdate",t,e);for(const r of i)r.updateGuards.forEach((r=>{n.push(xT(r,t,e))}));return n.push(u),qT(n)})).then((()=>{n=[];for(const r of t.matched)if(r.beforeEnter&&e.matched.indexOf(r)<0)if(Array.isArray(r.beforeEnter))for(const i of r.beforeEnter)n.push(xT(i,t,e));else n.push(xT(r.beforeEnter,t,e));return n.push(u),qT(n)})).then((()=>(t.matched.forEach((t=>t.enterCallbacks={})),n=RT(a,"beforeRouteEnter",t,e),n.push(u),qT(n)))).then((()=>{n=[];for(const r of s.list())n.push(xT(r,t,e));return n.push(u),qT(n)})).catch((t=>$I(t,8)?t:Promise.reject(t)))}function w(t,e,n){for(const r of a.list())r(t,e,n)}function E(t,e,n,r,o){const s=v(t,e);if(s)return s;const a=e===zI,c=_I?history.state:{};n&&(r||a?i.replace(t.fullPath,bI({scroll:a&&c&&c.scroll},o)):i.push(t.fullPath,o)),u.value=t,P(t,e,n,a),k()}let I;function T(){I=i.listen(((t,e,n)=>{let r=p(t);const o=g(r);if(o)return void m(bI(o,{replace:!0}),r).catch(EI);c=r;const s=u.value;var a,h;_I&&(a=UI(s.fullPath,n.delta),h=FI(),jI.set(a,h)),b(r,s).catch((t=>$I(t,12)?t:$I(t,2)?(m(t.to,r).catch(EI),Promise.reject()):(n.delta&&i.go(-n.delta,!1),A(t)))).then((t=>{(t=t||E(r,s,!1))&&n.delta&&i.go(-n.delta,!1),w(r,s,t)})).catch(EI)}))}let S,C=OT(),N=OT();function A(t){return k(t),N.list().forEach((e=>e(t))),Promise.reject(t)}function k(t){S||(S=!0,T(),C.list().forEach((([e,n])=>t?n(t):e())),C.reset())}function P(e,n,r,i){const{scrollBehavior:o}=t;if(!_I||!o)return Promise.resolve();let s=!r&&function(t){const e=jI.get(t);return jI.delete(t),e}(UI(e.fullPath,0))||(i||!r)&&history.state&&history.state.scroll||null;return _e().then((()=>o(e,n,s))).then((t=>t&&VI(t))).catch(A)}const O=t=>i.go(t);let x;const R=new Set;return{currentRoute:u,addRoute:function(t,n){let r,i;return GI(t)?(r=e.getRecordMatcher(t),i=n):i=t,e.addRoute(i,r)},removeRoute:function(t){let n=e.getRecordMatcher(t);n&&e.removeRoute(n)},hasRoute:function(t){return!!e.getRecordMatcher(t)},getRoutes:function(){return e.getRoutes().map((t=>t.record))},resolve:p,options:t,push:y,replace:function(t){return y(bI(d(t),{replace:!0}))},go:O,back:()=>O(-1),forward:()=>O(1),beforeEach:o.add,beforeResolve:s.add,afterEach:a.add,onError:N.add,isReady:function(){return S&&u.value!==zI?Promise.resolve():new Promise(((t,e)=>{C.add([t,e])}))},install(t){t.component("RouterLink",LT),t.component("RouterView",UT),t.config.globalProperties.$router=this,Object.defineProperty(t.config.globalProperties,"$route",{get:()=>Jt(u)}),_I&&!x&&u.value===zI&&(x=!0,y(i.location).catch((t=>{})));const e={};for(let r in zI)e[r]=Cr((()=>u.value[r]));t.provide(yI,this),t.provide(gI,qt(e)),t.provide(mI,u);let n=t.unmount;R.add(t),t.unmount=function(){R.delete(t),R.size<1&&(I(),u.value=zI,x=!1,S=!1),n.call(this,arguments)}}}}function qT(t){return t.reduce(((t,e)=>t.then((()=>e()))),Promise.resolve())}let BT=(t=21)=>{let e="",n=crypto.getRandomValues(new Uint8Array(t));for(;t--;){let r=63&n[t];e+=r<36?r.toString(36):r<62?(r-26).toString(36).toUpperCase():r<63?"_":"-"}return e};
/*!
 * vuex v4.0.0
 * (c) 2021 Evan You
 * @license MIT
 */var WT=("undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).__VUE_DEVTOOLS_GLOBAL_HOOK__;function HT(t,e){Object.keys(t).forEach((function(n){return e(t[n],n)}))}var GT=function(t,e){this.runtime=e,this._children=Object.create(null),this._rawModule=t;var n=t.state;this.state=("function"==typeof n?n():n)||{}},zT={namespaced:{configurable:!0}};zT.namespaced.get=function(){return!!this._rawModule.namespaced},GT.prototype.addChild=function(t,e){this._children[t]=e},GT.prototype.removeChild=function(t){delete this._children[t]},GT.prototype.getChild=function(t){return this._children[t]},GT.prototype.hasChild=function(t){return t in this._children},GT.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)},GT.prototype.forEachChild=function(t){HT(this._children,t)},GT.prototype.forEachGetter=function(t){this._rawModule.getters&&HT(this._rawModule.getters,t)},GT.prototype.forEachAction=function(t){this._rawModule.actions&&HT(this._rawModule.actions,t)},GT.prototype.forEachMutation=function(t){this._rawModule.mutations&&HT(this._rawModule.mutations,t)},Object.defineProperties(GT.prototype,zT);var QT=function(t){this.register([],t,!1)};function KT(t,e,n){if(e.update(n),n.modules)for(var r in n.modules){if(!e.getChild(r))return;KT(t.concat(r),e.getChild(r),n.modules[r])}}function YT(t){return new XT(t)}QT.prototype.get=function(t){return t.reduce((function(t,e){return t.getChild(e)}),this.root)},QT.prototype.getNamespace=function(t){var e=this.root;return t.reduce((function(t,n){return t+((e=e.getChild(n)).namespaced?n+"/":"")}),"")},QT.prototype.update=function(t){KT([],this.root,t)},QT.prototype.register=function(t,e,n){var r=this;void 0===n&&(n=!0);var i=new GT(e,n);0===t.length?this.root=i:this.get(t.slice(0,-1)).addChild(t[t.length-1],i);e.modules&&HT(e.modules,(function(e,i){r.register(t.concat(i),e,n)}))},QT.prototype.unregister=function(t){var e=this.get(t.slice(0,-1)),n=t[t.length-1],r=e.getChild(n);r&&r.runtime&&e.removeChild(n)},QT.prototype.isRegistered=function(t){var e=this.get(t.slice(0,-1)),n=t[t.length-1];return!!e&&e.hasChild(n)};var XT=function(t){var e=this;void 0===t&&(t={});var n=t.plugins;void 0===n&&(n=[]);var r=t.strict;void 0===r&&(r=!1),this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new QT(t),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null);var i=this,o=this.dispatch,s=this.commit;this.dispatch=function(t,e){return o.call(i,t,e)},this.commit=function(t,e,n){return s.call(i,t,e,n)},this.strict=r;var a=this._modules.root.state;eS(this,a,[],this._modules.root),tS(this,a),n.forEach((function(t){return t(e)})),(void 0===t.devtools||t.devtools)&&function(t){WT&&(t._devtoolHook=WT,WT.emit("vuex:init",t),WT.on("vuex:travel-to-state",(function(e){t.replaceState(e)})),t.subscribe((function(t,e){WT.emit("vuex:mutation",t,e)}),{prepend:!0}),t.subscribeAction((function(t,e){WT.emit("vuex:action",t,e)}),{prepend:!0}))}(this)},$T={state:{configurable:!0}};function JT(t,e,n){return e.indexOf(t)<0&&(n&&n.prepend?e.unshift(t):e.push(t)),function(){var n=e.indexOf(t);n>-1&&e.splice(n,1)}}function ZT(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var n=t.state;eS(t,n,[],t._modules.root,!0),tS(t,n,e)}function tS(t,e,n){var r=t._state;t.getters={},t._makeLocalGettersCache=Object.create(null);var i=t._wrappedGetters,o={};HT(i,(function(e,n){o[n]=function(t,e){return function(){return t(e)}}(e,t),Object.defineProperty(t.getters,n,{get:function(){return o[n]()},enumerable:!0})})),t._state=qt({data:e}),t.strict&&function(t){an((function(){return t._state.data}),(function(){}),{deep:!0,flush:"sync"})}(t),r&&n&&t._withCommit((function(){r.data=null}))}function eS(t,e,n,r,i){var o=!n.length,s=t._modules.getNamespace(n);if(r.namespaced&&(t._modulesNamespaceMap[s],t._modulesNamespaceMap[s]=r),!o&&!i){var a=nS(e,n.slice(0,-1)),u=n[n.length-1];t._withCommit((function(){a[u]=r.state}))}var c=r.context=function(t,e,n){var r=""===e,i={dispatch:r?t.dispatch:function(n,r,i){var o=rS(n,r,i),s=o.payload,a=o.options,u=o.type;return a&&a.root||(u=e+u),t.dispatch(u,s)},commit:r?t.commit:function(n,r,i){var o=rS(n,r,i),s=o.payload,a=o.options,u=o.type;a&&a.root||(u=e+u),t.commit(u,s,a)}};return Object.defineProperties(i,{getters:{get:r?function(){return t.getters}:function(){return function(t,e){if(!t._makeLocalGettersCache[e]){var n={},r=e.length;Object.keys(t.getters).forEach((function(i){if(i.slice(0,r)===e){var o=i.slice(r);Object.defineProperty(n,o,{get:function(){return t.getters[i]},enumerable:!0})}})),t._makeLocalGettersCache[e]=n}return t._makeLocalGettersCache[e]}(t,e)}},state:{get:function(){return nS(t.state,n)}}}),i}(t,s,n);r.forEachMutation((function(e,n){!function(t,e,n,r){(t._mutations[e]||(t._mutations[e]=[])).push((function(e){n.call(t,r.state,e)}))}(t,s+n,e,c)})),r.forEachAction((function(e,n){var r=e.root?n:s+n,i=e.handler||e;!function(t,e,n,r){(t._actions[e]||(t._actions[e]=[])).push((function(e){var i=n.call(t,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:t.getters,rootState:t.state},e);return function(t){return t&&"function"==typeof t.then}(i)||(i=Promise.resolve(i)),t._devtoolHook?i.catch((function(e){throw t._devtoolHook.emit("vuex:error",e),e})):i}))}(t,r,i,c)})),r.forEachGetter((function(e,n){!function(t,e,n,r){if(t._wrappedGetters[e])return;t._wrappedGetters[e]=function(t){return n(r.state,r.getters,t.state,t.getters)}}(t,s+n,e,c)})),r.forEachChild((function(r,o){eS(t,e,n.concat(o),r,i)}))}function nS(t,e){return e.reduce((function(t,e){return t[e]}),t)}function rS(t,e,n){var r;return null!==(r=t)&&"object"==typeof r&&t.type&&(n=e,e=t,t=t.type),{type:t,payload:e,options:n}}XT.prototype.install=function(t,e){t.provide(e||"store",this),t.config.globalProperties.$store=this},$T.state.get=function(){return this._state.data},$T.state.set=function(t){},XT.prototype.commit=function(t,e,n){var r=this,i=rS(t,e,n),o=i.type,s=i.payload,a={type:o,payload:s},u=this._mutations[o];u&&(this._withCommit((function(){u.forEach((function(t){t(s)}))})),this._subscribers.slice().forEach((function(t){return t(a,r.state)})))},XT.prototype.dispatch=function(t,e){var n=this,r=rS(t,e),i=r.type,o=r.payload,s={type:i,payload:o},a=this._actions[i];if(a){try{this._actionSubscribers.slice().filter((function(t){return t.before})).forEach((function(t){return t.before(s,n.state)}))}catch(uI){}var u=a.length>1?Promise.all(a.map((function(t){return t(o)}))):a[0](o);return new Promise((function(t,e){u.then((function(e){try{n._actionSubscribers.filter((function(t){return t.after})).forEach((function(t){return t.after(s,n.state)}))}catch(uI){}t(e)}),(function(t){try{n._actionSubscribers.filter((function(t){return t.error})).forEach((function(e){return e.error(s,n.state,t)}))}catch(uI){}e(t)}))}))}},XT.prototype.subscribe=function(t,e){return JT(t,this._subscribers,e)},XT.prototype.subscribeAction=function(t,e){return JT("function"==typeof t?{before:t}:t,this._actionSubscribers,e)},XT.prototype.watch=function(t,e,n){var r=this;return an((function(){return t(r.state,r.getters)}),e,Object.assign({},n))},XT.prototype.replaceState=function(t){var e=this;this._withCommit((function(){e._state.data=t}))},XT.prototype.registerModule=function(t,e,n){void 0===n&&(n={}),"string"==typeof t&&(t=[t]),this._modules.register(t,e),eS(this,this.state,t,this._modules.get(t),n.preserveState),tS(this,this.state)},XT.prototype.unregisterModule=function(t){var e=this;"string"==typeof t&&(t=[t]),this._modules.unregister(t),this._withCommit((function(){delete nS(e.state,t.slice(0,-1))[t[t.length-1]]})),ZT(this)},XT.prototype.hasModule=function(t){return"string"==typeof t&&(t=[t]),this._modules.isRegistered(t)},XT.prototype.hotUpdate=function(t){this._modules.update(t),ZT(this,!0)},XT.prototype._withCommit=function(t){var e=this._committing;this._committing=!0,t(),this._committing=e},Object.defineProperties(XT.prototype,$T);export{Ln as F,Yn as a,$n as b,Wn as c,Jn as d,_n as e,Eo as f,Ar as g,Zr as h,jT as i,HI as j,YT as k,ni as l,BT as n,qn as o,xn as r,u as t,$r as v,je as w};
